{"ast":null,"code":"import React from'react';import{Redirect}from'react-router-dom';import Pages from'./Pages';import{browser}from'webextension-polyfill-ts';import{Button,withStyles}from'@material-ui/core';import{truncateString}from'../../shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ApproveButton=withStyles(function(){return{root:{backgroundColor:'transparent','&:hover':{backgroundColor:'rgba(11, 156, 49, 0.6)'}}};})(Button);var CancelButton=withStyles(function(){return{root:{backgroundColor:'transparent','&:hover':{backgroundColor:'rgba(255, 0, 0, 0.6)'}}};})(Button);export var SignMessagePage=function SignMessagePage(signingContainer,popupContainer){var messageWithID=signingContainer.messageToSign;// useState(signingContainer.messageToSign);\nbrowser.windows.getCurrent().then(function(w){if(w.type==='popup'&&(messageWithID===null||messageWithID===void 0?void 0:messageWithID.id)){window.addEventListener('beforeunload',function(e){signingContainer.messageToSign&&signingContainer.cancelSigningMessage(messageWithID.id);});}});// console.log(messageWithID);\nreturn messageWithID?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Do you want to sign the message?\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"code\",{children:\"Casper Message:\"})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'.1rem .5rem',backgroundColor:'rgba(0, 0, 0, 0.1)',borderRadius:'10px',fontSize:'1rem'},children:/*#__PURE__*/_jsx(\"p\",{children:messageWithID.messageString})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"code\",{children:\"Signing Key:\"})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'.1rem .5rem',backgroundColor:'rgba(0, 0, 0, 0.1)',borderRadius:'10px',fontSize:'0.9rem'},children:/*#__PURE__*/_jsx(\"p\",{children:truncateString(messageWithID.signingKey,15,15)})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1.5rem',display:'flex',justifyContent:'space-evenly'},children:[/*#__PURE__*/_jsx(ApproveButton,{variant:\"outlined\",onClick:function onClick(){return signingContainer.approveSigningMessage(messageWithID.id).then(function(){return popupContainer.callClosePopup();});},children:\"Approve\"}),/*#__PURE__*/_jsx(CancelButton,{variant:\"outlined\",onClick:function onClick(){return signingContainer.cancelSigningMessage(messageWithID.id).then(function(){return popupContainer.callClosePopup();});},children:\"Cancel\"})]})]}):/*#__PURE__*/_jsx(Redirect,{to:Pages.Home});};","map":{"version":3,"sources":["/home/chef/Desktop/signer/src/popup/components/SignMessagePage.tsx"],"names":["React","Redirect","Pages","browser","Button","withStyles","truncateString","ApproveButton","root","backgroundColor","CancelButton","SignMessagePage","signingContainer","popupContainer","messageWithID","messageToSign","windows","getCurrent","then","w","type","id","window","addEventListener","e","cancelSigningMessage","padding","borderRadius","fontSize","messageString","signingKey","marginTop","display","justifyContent","approveSigningMessage","callClosePopup","Home"],"mappings":"AACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,OAASC,OAAT,KAAwB,0BAAxB,CACA,OAASC,MAAT,CAAiBC,UAAjB,KAAmC,mBAAnC,CACA,OAASC,cAAT,KAA+B,cAA/B,C,wFAGA,GAAMC,CAAAA,aAAa,CAAGF,UAAU,CAAC,iBAAO,CACtCG,IAAI,CAAE,CACJC,eAAe,CAAE,aADb,CAEJ,UAAW,CACTA,eAAe,CAAE,wBADR,CAFP,CADgC,CAAP,EAAD,CAAV,CAOlBL,MAPkB,CAAtB,CASA,GAAMM,CAAAA,YAAY,CAAGL,UAAU,CAAC,iBAAO,CACrCG,IAAI,CAAE,CACJC,eAAe,CAAE,aADb,CAEJ,UAAW,CACTA,eAAe,CAAE,sBADR,CAFP,CAD+B,CAAP,EAAD,CAAV,CAOjBL,MAPiB,CAArB,CASA,MAAO,IAAMO,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAC7BC,gBAD6B,CAE7BC,cAF6B,CAG1B,CACH,GAAMC,CAAAA,aAAa,CAAGF,gBAAgB,CAACG,aAAvC,CAAsD;AACtDZ,OAAO,CAACa,OAAR,CAAgBC,UAAhB,GAA6BC,IAA7B,CAAkC,SAAAC,CAAC,CAAI,CACrC,GAAIA,CAAC,CAACC,IAAF,GAAW,OAAX,GAAsBN,aAAtB,SAAsBA,aAAtB,iBAAsBA,aAAa,CAAEO,EAArC,CAAJ,CAA6C,CAC3CC,MAAM,CAACC,gBAAP,CAAwB,cAAxB,CAAwC,SAAAC,CAAC,CAAI,CAC3CZ,gBAAgB,CAACG,aAAjB,EACEH,gBAAgB,CAACa,oBAAjB,CAAsCX,aAAa,CAACO,EAApD,CADF,CAED,CAHD,EAID,CACF,CAPD,EASA;AACA,MAAOP,CAAAA,aAAa,cAClB,oCACE,wDADF,cAEE,aAFF,cAGE,gCACE,yCADF,EAHF,cAME,YACE,KAAK,CAAE,CACLY,OAAO,CAAE,aADJ,CAELjB,eAAe,CAAE,oBAFZ,CAGLkB,YAAY,CAAE,MAHT,CAILC,QAAQ,CAAE,MAJL,CADT,uBAQE,mBAAId,aAAa,CAACe,aAAlB,EARF,EANF,cAgBE,aAhBF,cAiBE,gCACE,sCADF,EAjBF,cAoBE,YACE,KAAK,CAAE,CACLH,OAAO,CAAE,aADJ,CAELjB,eAAe,CAAE,oBAFZ,CAGLkB,YAAY,CAAE,MAHT,CAILC,QAAQ,CAAE,QAJL,CADT,uBAQE,mBAAItB,cAAc,CAACQ,aAAa,CAACgB,UAAf,CAA2B,EAA3B,CAA+B,EAA/B,CAAlB,EARF,EApBF,cA8BE,aACE,KAAK,CAAE,CACLC,SAAS,CAAE,QADN,CAELC,OAAO,CAAE,MAFJ,CAGLC,cAAc,CAAE,cAHX,CADT,wBAOE,KAAC,aAAD,EACE,OAAO,CAAC,UADV,CAEE,OAAO,CAAE,yBACPrB,CAAAA,gBAAgB,CACbsB,qBADH,CACyBpB,aAAa,CAACO,EADvC,EAEGH,IAFH,CAEQ,iBAAML,CAAAA,cAAc,CAACsB,cAAf,EAAN,EAFR,CADO,EAFX,qBAPF,cAiBE,KAAC,YAAD,EACE,OAAO,CAAC,UADV,CAEE,OAAO,CAAE,yBACPvB,CAAAA,gBAAgB,CACba,oBADH,CACwBX,aAAa,CAACO,EADtC,EAEGH,IAFH,CAEQ,iBAAML,CAAAA,cAAc,CAACsB,cAAf,EAAN,EAFR,CADO,EAFX,oBAjBF,GA9BF,GADkB,cA6DlB,KAAC,QAAD,EAAU,EAAE,CAAEjC,KAAK,CAACkC,IAApB,EA7DF,CA+DD,CA9EM","sourcesContent":["import SigningContainer from '../container/SigningContainer';\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Pages from './Pages';\nimport { browser } from 'webextension-polyfill-ts';\nimport { Button, withStyles } from '@material-ui/core';\nimport { truncateString } from '../../shared';\nimport PopupContainer from '../container/PopupContainer';\n\nconst ApproveButton = withStyles(() => ({\n  root: {\n    backgroundColor: 'transparent',\n    '&:hover': {\n      backgroundColor: 'rgba(11, 156, 49, 0.6)'\n    }\n  }\n}))(Button);\n\nconst CancelButton = withStyles(() => ({\n  root: {\n    backgroundColor: 'transparent',\n    '&:hover': {\n      backgroundColor: 'rgba(255, 0, 0, 0.6)'\n    }\n  }\n}))(Button);\n\nexport const SignMessagePage = (\n  signingContainer: SigningContainer,\n  popupContainer: PopupContainer\n) => {\n  const messageWithID = signingContainer.messageToSign; // useState(signingContainer.messageToSign);\n  browser.windows.getCurrent().then(w => {\n    if (w.type === 'popup' && messageWithID?.id) {\n      window.addEventListener('beforeunload', e => {\n        signingContainer.messageToSign &&\n          signingContainer.cancelSigningMessage(messageWithID.id);\n      });\n    }\n  });\n\n  // console.log(messageWithID);\n  return messageWithID ? (\n    <div>\n      <h2>Do you want to sign the message?</h2>\n      <br />\n      <b>\n        <code>Casper Message:</code>\n      </b>\n      <div\n        style={{\n          padding: '.1rem .5rem',\n          backgroundColor: 'rgba(0, 0, 0, 0.1)',\n          borderRadius: '10px',\n          fontSize: '1rem'\n        }}\n      >\n        <p>{messageWithID.messageString}</p>\n      </div>\n      <br />\n      <b>\n        <code>Signing Key:</code>\n      </b>\n      <div\n        style={{\n          padding: '.1rem .5rem',\n          backgroundColor: 'rgba(0, 0, 0, 0.1)',\n          borderRadius: '10px',\n          fontSize: '0.9rem'\n        }}\n      >\n        <p>{truncateString(messageWithID.signingKey, 15, 15)}</p>\n      </div>\n      <div\n        style={{\n          marginTop: '1.5rem',\n          display: 'flex',\n          justifyContent: 'space-evenly'\n        }}\n      >\n        <ApproveButton\n          variant=\"outlined\"\n          onClick={() =>\n            signingContainer\n              .approveSigningMessage(messageWithID.id)\n              .then(() => popupContainer.callClosePopup())\n          }\n        >\n          Approve\n        </ApproveButton>\n        <CancelButton\n          variant=\"outlined\"\n          onClick={() =>\n            signingContainer\n              .cancelSigningMessage(messageWithID.id)\n              .then(() => popupContainer.callClosePopup())\n          }\n        >\n          Cancel\n        </CancelButton>\n      </div>\n    </div>\n  ) : (\n    <Redirect to={Pages.Home} />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}