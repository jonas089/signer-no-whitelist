{"ast":null,"code":"var _jsxFileName = \"/home/chef/Desktop/signer/src/popup/components/SignMessagePage.tsx\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Pages from './Pages';\nimport { browser } from 'webextension-polyfill-ts';\nimport { Button, withStyles } from '@material-ui/core';\nimport { truncateString } from '../../shared';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ApproveButton = withStyles(() => ({\n  root: {\n    backgroundColor: 'transparent',\n    '&:hover': {\n      backgroundColor: 'rgba(11, 156, 49, 0.6)'\n    }\n  }\n}))(Button);\nconst CancelButton = withStyles(() => ({\n  root: {\n    backgroundColor: 'transparent',\n    '&:hover': {\n      backgroundColor: 'rgba(255, 0, 0, 0.6)'\n    }\n  }\n}))(Button);\nexport const SignMessagePage = (signingContainer, popupContainer) => {\n  const messageWithID = signingContainer.messageToSign; // useState(signingContainer.messageToSign);\n\n  browser.windows.getCurrent().then(w => {\n    if (w.type === 'popup' && (messageWithID === null || messageWithID === void 0 ? void 0 : messageWithID.id)) {\n      window.addEventListener('beforeunload', e => {\n        signingContainer.messageToSign && signingContainer.cancelSigningMessage(messageWithID.id);\n      });\n    }\n  }); // console.log(messageWithID);\n\n  return messageWithID ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Do you want to sign the message?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n      children: /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"Casper Message:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '.1rem .5rem',\n        backgroundColor: 'rgba(0, 0, 0, 0.1)',\n        borderRadius: '10px',\n        fontSize: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: messageWithID.messageString\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n      children: /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"Signing Key:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '.1rem .5rem',\n        backgroundColor: 'rgba(0, 0, 0, 0.1)',\n        borderRadius: '10px',\n        fontSize: '0.9rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: truncateString(messageWithID.signingKey, 15, 15)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '1.5rem',\n        display: 'flex',\n        justifyContent: 'space-evenly'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ApproveButton, {\n        variant: \"outlined\",\n        onClick: () => signingContainer.approveSigningMessage(messageWithID.id).then(() => popupContainer.callClosePopup()),\n        children: \"Approve\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CancelButton, {\n        variant: \"outlined\",\n        onClick: () => signingContainer.cancelSigningMessage(messageWithID.id).then(() => popupContainer.callClosePopup()),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n    to: Pages.Home\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_c = SignMessagePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignMessagePage\");","map":{"version":3,"sources":["/home/chef/Desktop/signer/src/popup/components/SignMessagePage.tsx"],"names":["React","Redirect","Pages","browser","Button","withStyles","truncateString","ApproveButton","root","backgroundColor","CancelButton","SignMessagePage","signingContainer","popupContainer","messageWithID","messageToSign","windows","getCurrent","then","w","type","id","window","addEventListener","e","cancelSigningMessage","padding","borderRadius","fontSize","messageString","signingKey","marginTop","display","justifyContent","approveSigningMessage","callClosePopup","Home"],"mappings":"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","sourcesContent":["import SigningContainer from '../container/SigningContainer';\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Pages from './Pages';\nimport { browser } from 'webextension-polyfill-ts';\nimport { Button, withStyles } from '@material-ui/core';\nimport { truncateString } from '../../shared';\nimport PopupContainer from '../container/PopupContainer';\n\nconst ApproveButton = withStyles(() => ({\n  root: {\n    backgroundColor: 'transparent',\n    '&:hover': {\n      backgroundColor: 'rgba(11, 156, 49, 0.6)'\n    }\n  }\n}))(Button);\n\nconst CancelButton = withStyles(() => ({\n  root: {\n    backgroundColor: 'transparent',\n    '&:hover': {\n      backgroundColor: 'rgba(255, 0, 0, 0.6)'\n    }\n  }\n}))(Button);\n\nexport const SignMessagePage = (\n  signingContainer: SigningContainer,\n  popupContainer: PopupContainer\n) => {\n  const messageWithID = signingContainer.messageToSign; // useState(signingContainer.messageToSign);\n  browser.windows.getCurrent().then(w => {\n    if (w.type === 'popup' && messageWithID?.id) {\n      window.addEventListener('beforeunload', e => {\n        signingContainer.messageToSign &&\n          signingContainer.cancelSigningMessage(messageWithID.id);\n      });\n    }\n  });\n\n  // console.log(messageWithID);\n  return messageWithID ? (\n    <div>\n      <h2>Do you want to sign the message?</h2>\n      <br />\n      <b>\n        <code>Casper Message:</code>\n      </b>\n      <div\n        style={{\n          padding: '.1rem .5rem',\n          backgroundColor: 'rgba(0, 0, 0, 0.1)',\n          borderRadius: '10px',\n          fontSize: '1rem'\n        }}\n      >\n        <p>{messageWithID.messageString}</p>\n      </div>\n      <br />\n      <b>\n        <code>Signing Key:</code>\n      </b>\n      <div\n        style={{\n          padding: '.1rem .5rem',\n          backgroundColor: 'rgba(0, 0, 0, 0.1)',\n          borderRadius: '10px',\n          fontSize: '0.9rem'\n        }}\n      >\n        <p>{truncateString(messageWithID.signingKey, 15, 15)}</p>\n      </div>\n      <div\n        style={{\n          marginTop: '1.5rem',\n          display: 'flex',\n          justifyContent: 'space-evenly'\n        }}\n      >\n        <ApproveButton\n          variant=\"outlined\"\n          onClick={() =>\n            signingContainer\n              .approveSigningMessage(messageWithID.id)\n              .then(() => popupContainer.callClosePopup())\n          }\n        >\n          Approve\n        </ApproveButton>\n        <CancelButton\n          variant=\"outlined\"\n          onClick={() =>\n            signingContainer\n              .cancelSigningMessage(messageWithID.id)\n              .then(() => popupContainer.callClosePopup())\n          }\n        >\n          Cancel\n        </CancelButton>\n      </div>\n    </div>\n  ) : (\n    <Redirect to={Pages.Home} />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}