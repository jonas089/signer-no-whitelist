{"ast":null,"code":"// ASN.1 JavaScript decoder\n// Copyright (c) 2008-2020 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n(typeof define != 'undefined' ? define : function (factory) {\n  'use strict';\n\n  if (typeof module == 'object') module.exports = factory(function (name) {\n    return require(name);\n  });else window.asn1 = factory(function (name) {\n    return window[name.substring(2)];\n  });\n})(function (require) {\n  \"use strict\";\n\n  var Int10 = require('./int10'),\n      oids = require('./oids'),\n      ellipsis = \"\\u2026\",\n      reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/,\n      reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\n\n  function stringCut(str, len) {\n    if (str.length > len) str = str.substring(0, len) + ellipsis;\n    return str;\n  }\n\n  function Stream(enc, pos) {\n    if (enc instanceof Stream) {\n      this.enc = enc.enc;\n      this.pos = enc.pos;\n    } else {\n      // enc should be an array or a binary string\n      this.enc = enc;\n      this.pos = pos;\n    }\n  }\n\n  Stream.prototype.get = function (pos) {\n    if (pos === undefined) pos = this.pos++;\n    if (pos >= this.enc.length) throw 'Requesting byte offset ' + pos + ' on a stream of length ' + this.enc.length;\n    return typeof this.enc == \"string\" ? this.enc.charCodeAt(pos) : this.enc[pos];\n  };\n\n  Stream.prototype.hexDigits = \"0123456789ABCDEF\";\n\n  Stream.prototype.hexByte = function (b) {\n    return this.hexDigits.charAt(b >> 4 & 0xF) + this.hexDigits.charAt(b & 0xF);\n  };\n\n  Stream.prototype.hexDump = function (start, end, raw) {\n    var s = \"\";\n\n    for (var i = start; i < end; ++i) {\n      s += this.hexByte(this.get(i));\n      if (raw !== true) switch (i & 0xF) {\n        case 0x7:\n          s += \"  \";\n          break;\n\n        case 0xF:\n          s += \"\\n\";\n          break;\n\n        default:\n          s += \" \";\n      }\n    }\n\n    return s;\n  };\n\n  var b64Safe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n\n  Stream.prototype.b64Dump = function (start, end) {\n    var extra = (end - start) % 3,\n        s = '',\n        i,\n        c;\n\n    for (i = start; i + 2 < end; i += 3) {\n      c = this.get(i) << 16 | this.get(i + 1) << 8 | this.get(i + 2);\n      s += b64Safe.charAt(c >> 18 & 0x3F);\n      s += b64Safe.charAt(c >> 12 & 0x3F);\n      s += b64Safe.charAt(c >> 6 & 0x3F);\n      s += b64Safe.charAt(c & 0x3F);\n    }\n\n    if (extra > 0) {\n      c = this.get(i) << 16;\n      if (extra > 1) c |= this.get(i + 1) << 8;\n      s += b64Safe.charAt(c >> 18 & 0x3F);\n      s += b64Safe.charAt(c >> 12 & 0x3F);\n      if (extra == 2) s += b64Safe.charAt(c >> 6 & 0x3F);\n    }\n\n    return s;\n  };\n\n  Stream.prototype.isASCII = function (start, end) {\n    for (var i = start; i < end; ++i) {\n      var c = this.get(i);\n      if (c < 32 || c > 176) return false;\n    }\n\n    return true;\n  };\n\n  Stream.prototype.parseStringISO = function (start, end) {\n    var s = \"\";\n\n    for (var i = start; i < end; ++i) s += String.fromCharCode(this.get(i));\n\n    return s;\n  };\n\n  Stream.prototype.parseStringUTF = function (start, end) {\n    function ex(c) {\n      // must be 10xxxxxx\n      if (c < 0x80 || c >= 0xC0) throw new Error('Invalid UTF-8 continuation byte: ' + c);\n      return c & 0x3F;\n    }\n\n    function surrogate(cp) {\n      if (cp < 0x10000) throw new Error('UTF-8 overlong encoding, codepoint encoded in 4 bytes: ' + cp); // we could use String.fromCodePoint(cp) but let's be nice to older browsers and use surrogate pairs\n\n      cp -= 0x10000;\n      return String.fromCharCode((cp >> 10) + 0xD800, (cp & 0x3FF) + 0xDC00);\n    }\n\n    var s = \"\";\n\n    for (var i = start; i < end;) {\n      var c = this.get(i++);\n      if (c < 0x80) // 0xxxxxxx (7 bit)\n        s += String.fromCharCode(c);else if (c < 0xC0) throw new Error('Invalid UTF-8 starting byte: ' + c);else if (c < 0xE0) // 110xxxxx 10xxxxxx (11 bit)\n        s += String.fromCharCode((c & 0x1F) << 6 | ex(this.get(i++)));else if (c < 0xF0) // 1110xxxx 10xxxxxx 10xxxxxx (16 bit)\n        s += String.fromCharCode((c & 0x0F) << 12 | ex(this.get(i++)) << 6 | ex(this.get(i++)));else if (c < 0xF8) // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx (21 bit)\n        s += surrogate((c & 0x07) << 18 | ex(this.get(i++)) << 12 | ex(this.get(i++)) << 6 | ex(this.get(i++)));else throw new Error('Invalid UTF-8 starting byte (since 2003 it is restricted to 4 bytes): ' + c);\n    }\n\n    return s;\n  };\n\n  Stream.prototype.parseStringBMP = function (start, end) {\n    var str = \"\",\n        hi,\n        lo;\n\n    for (var i = start; i < end;) {\n      hi = this.get(i++);\n      lo = this.get(i++);\n      str += String.fromCharCode(hi << 8 | lo);\n    }\n\n    return str;\n  };\n\n  Stream.prototype.parseTime = function (start, end, shortYear) {\n    var s = this.parseStringISO(start, end),\n        m = (shortYear ? reTimeS : reTimeL).exec(s);\n    if (!m) return \"Unrecognized time: \" + s;\n\n    if (shortYear) {\n      // to avoid querying the timer, use the fixed range [1970, 2069]\n      // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n      m[1] = +m[1];\n      m[1] += m[1] < 70 ? 2000 : 1900;\n    }\n\n    s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n\n    if (m[5]) {\n      s += \":\" + m[5];\n\n      if (m[6]) {\n        s += \":\" + m[6];\n        if (m[7]) s += \".\" + m[7];\n      }\n    }\n\n    if (m[8]) {\n      s += \" UTC\";\n\n      if (m[8] != 'Z') {\n        s += m[8];\n        if (m[9]) s += \":\" + m[9];\n      }\n    }\n\n    return s;\n  };\n\n  Stream.prototype.parseInteger = function (start, end) {\n    var v = this.get(start),\n        neg = v > 127,\n        pad = neg ? 255 : 0,\n        len,\n        s = ''; // skip unuseful bits (not allowed in DER)\n\n    while (v == pad && ++start < end) v = this.get(start);\n\n    len = end - start;\n    if (len === 0) return neg ? '-1' : '0'; // show bit length of huge integers\n\n    if (len > 4) {\n      s = v;\n      len <<= 3;\n\n      while (((s ^ pad) & 0x80) == 0) {\n        s <<= 1;\n        --len;\n      }\n\n      s = \"(\" + len + \" bit)\\n\";\n    } // decode the integer\n\n\n    if (neg) v = v - 256;\n    var n = new Int10(v);\n\n    for (var i = start + 1; i < end; ++i) n.mulAdd(256, this.get(i));\n\n    return s + n.toString();\n  };\n\n  Stream.prototype.parseBitString = function (start, end, maxLength) {\n    var unusedBits = this.get(start);\n    if (unusedBits > 7) throw 'Invalid BitString with unusedBits=' + unusedBits;\n    var lenBit = (end - start - 1 << 3) - unusedBits,\n        s = \"\";\n\n    for (var i = start + 1; i < end; ++i) {\n      var b = this.get(i),\n          skip = i == end - 1 ? unusedBits : 0;\n\n      for (var j = 7; j >= skip; --j) s += b >> j & 1 ? \"1\" : \"0\";\n\n      if (s.length > maxLength) s = stringCut(s, maxLength);\n    }\n\n    return {\n      size: lenBit,\n      str: s\n    };\n  };\n\n  Stream.prototype.parseOctetString = function (start, end, maxLength) {\n    var len = end - start,\n        s;\n\n    try {\n      s = this.parseStringUTF(start, end);\n      var v;\n\n      for (i = 0; i < s.length; ++i) {\n        v = s.charCodeAt(i);\n        if (v < 32 && v != 9 && v != 10 && v != 13) // [\\t\\r\\n] are (kinda) printable\n          throw new Error('Unprintable character at index ' + i + ' (code ' + s.charCodeAt(i) + \")\");\n      }\n\n      return {\n        size: len,\n        str: s\n      };\n    } catch (e) {// ignore\n    }\n\n    maxLength /= 2; // we work in bytes\n\n    if (len > maxLength) end = start + maxLength;\n    s = '';\n\n    for (var i = start; i < end; ++i) s += this.hexByte(this.get(i));\n\n    if (len > maxLength) s += ellipsis;\n    return {\n      size: len,\n      str: s\n    };\n  };\n\n  Stream.prototype.parseOID = function (start, end, maxLength) {\n    var s = '',\n        n = new Int10(),\n        bits = 0;\n\n    for (var i = start; i < end; ++i) {\n      var v = this.get(i);\n      n.mulAdd(128, v & 0x7F);\n      bits += 7;\n\n      if (!(v & 0x80)) {\n        // finished\n        if (s === '') {\n          n = n.simplify();\n\n          if (n instanceof Int10) {\n            n.sub(80);\n            s = \"2.\" + n.toString();\n          } else {\n            var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n            s = m + \".\" + (n - m * 40);\n          }\n        } else s += \".\" + n.toString();\n\n        if (s.length > maxLength) return stringCut(s, maxLength);\n        n = new Int10();\n        bits = 0;\n      }\n    }\n\n    if (bits > 0) s += \".incomplete\";\n\n    if (typeof oids === 'object') {\n      var oid = oids[s];\n\n      if (oid) {\n        if (oid.d) s += \"\\n\" + oid.d;\n        if (oid.c) s += \"\\n\" + oid.c;\n        if (oid.w) s += \"\\n(warning!)\";\n      }\n    }\n\n    return s;\n  };\n\n  function ASN1(stream, header, length, tag, tagLen, sub) {\n    if (!(tag instanceof ASN1Tag)) throw 'Invalid tag value.';\n    this.stream = stream;\n    this.header = header;\n    this.length = length;\n    this.tag = tag;\n    this.tagLen = tagLen;\n    this.sub = sub;\n  }\n\n  ASN1.prototype.typeName = function () {\n    switch (this.tag.tagClass) {\n      case 0:\n        // universal\n        switch (this.tag.tagNumber) {\n          case 0x00:\n            return \"EOC\";\n\n          case 0x01:\n            return \"BOOLEAN\";\n\n          case 0x02:\n            return \"INTEGER\";\n\n          case 0x03:\n            return \"BIT_STRING\";\n\n          case 0x04:\n            return \"OCTET_STRING\";\n\n          case 0x05:\n            return \"NULL\";\n\n          case 0x06:\n            return \"OBJECT_IDENTIFIER\";\n\n          case 0x07:\n            return \"ObjectDescriptor\";\n\n          case 0x08:\n            return \"EXTERNAL\";\n\n          case 0x09:\n            return \"REAL\";\n\n          case 0x0A:\n            return \"ENUMERATED\";\n\n          case 0x0B:\n            return \"EMBEDDED_PDV\";\n\n          case 0x0C:\n            return \"UTF8String\";\n\n          case 0x10:\n            return \"SEQUENCE\";\n\n          case 0x11:\n            return \"SET\";\n\n          case 0x12:\n            return \"NumericString\";\n\n          case 0x13:\n            return \"PrintableString\";\n          // ASCII subset\n\n          case 0x14:\n            return \"TeletexString\";\n          // aka T61String\n\n          case 0x15:\n            return \"VideotexString\";\n\n          case 0x16:\n            return \"IA5String\";\n          // ASCII\n\n          case 0x17:\n            return \"UTCTime\";\n\n          case 0x18:\n            return \"GeneralizedTime\";\n\n          case 0x19:\n            return \"GraphicString\";\n\n          case 0x1A:\n            return \"VisibleString\";\n          // ASCII subset\n\n          case 0x1B:\n            return \"GeneralString\";\n\n          case 0x1C:\n            return \"UniversalString\";\n\n          case 0x1E:\n            return \"BMPString\";\n        }\n\n        return \"Universal_\" + this.tag.tagNumber.toString();\n\n      case 1:\n        return \"Application_\" + this.tag.tagNumber.toString();\n\n      case 2:\n        return \"[\" + this.tag.tagNumber.toString() + \"]\";\n      // Context\n\n      case 3:\n        return \"Private_\" + this.tag.tagNumber.toString();\n    }\n  };\n\n  function recurse(el, parser, maxLength) {\n    var differentTags = false;\n    if (el.sub) el.sub.forEach(function (e1) {\n      if (e1.tag.tagClass != el.tag.tagClass || e1.tag.tagNumber != el.tag.tagNumber) differentTags = true;\n    });\n    if (!el.sub || differentTags) return el.stream[parser](el.posContent(), el.posContent() + Math.abs(el.length), maxLength);\n    var d = {\n      size: 0,\n      str: ''\n    };\n    el.sub.forEach(function (el) {\n      var d1 = recurse(el, parser, maxLength - d.str.length);\n      d.size += d1.size;\n      d.str += d1.str;\n    });\n    return d;\n  }\n  /** A string preview of the content (intended for humans). */\n\n\n  ASN1.prototype.content = function (maxLength) {\n    if (this.tag === undefined) return null;\n    if (maxLength === undefined) maxLength = Infinity;\n    var content = this.posContent(),\n        len = Math.abs(this.length);\n\n    if (!this.tag.isUniversal()) {\n      if (this.sub !== null) return \"(\" + this.sub.length + \" elem)\";\n      var d1 = this.stream.parseOctetString(content, content + len, maxLength);\n      return \"(\" + d1.size + \" byte)\\n\" + d1.str;\n    }\n\n    switch (this.tag.tagNumber) {\n      case 0x01:\n        // BOOLEAN\n        return this.stream.get(content) === 0 ? \"false\" : \"true\";\n\n      case 0x02:\n        // INTEGER\n        return this.stream.parseInteger(content, content + len);\n\n      case 0x03:\n        // BIT_STRING\n        var d = recurse(this, 'parseBitString', maxLength);\n        return \"(\" + d.size + \" bit)\\n\" + d.str;\n\n      case 0x04:\n        // OCTET_STRING\n        d = recurse(this, 'parseOctetString', maxLength);\n        return \"(\" + d.size + \" byte)\\n\" + d.str;\n      //case 0x05: // NULL\n\n      case 0x06:\n        // OBJECT_IDENTIFIER\n        return this.stream.parseOID(content, content + len, maxLength);\n      //case 0x07: // ObjectDescriptor\n      //case 0x08: // EXTERNAL\n      //case 0x09: // REAL\n\n      case 0x0A:\n        // ENUMERATED\n        return this.stream.parseInteger(content, content + len);\n      //case 0x0B: // EMBEDDED_PDV\n\n      case 0x10: // SEQUENCE\n\n      case 0x11:\n        // SET\n        if (this.sub !== null) return \"(\" + this.sub.length + \" elem)\";else return \"(no elem)\";\n\n      case 0x0C:\n        // UTF8String\n        return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n\n      case 0x12: // NumericString\n\n      case 0x13: // PrintableString\n\n      case 0x14: // TeletexString\n\n      case 0x15: // VideotexString\n\n      case 0x16: // IA5String\n\n      case 0x1A: // VisibleString\n\n      case 0x1B:\n        // GeneralString\n        //case 0x19: // GraphicString\n        //case 0x1C: // UniversalString\n        return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n\n      case 0x1E:\n        // BMPString\n        return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n\n      case 0x17: // UTCTime\n\n      case 0x18:\n        // GeneralizedTime\n        return this.stream.parseTime(content, content + len, this.tag.tagNumber == 0x17);\n    }\n\n    return null;\n  };\n\n  ASN1.prototype.toString = function () {\n    return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + (this.sub === null ? 'null' : this.sub.length) + \"]\";\n  };\n\n  ASN1.prototype.toPrettyString = function (indent) {\n    if (indent === undefined) indent = '';\n    var s = indent + this.typeName() + \" @\" + this.stream.pos;\n    if (this.length >= 0) s += \"+\";\n    s += this.length;\n    if (this.tag.tagConstructed) s += \" (constructed)\";else if (this.tag.isUniversal() && (this.tag.tagNumber == 0x03 || this.tag.tagNumber == 0x04) && this.sub !== null) s += \" (encapsulates)\";\n    var content = this.content();\n    if (content) s += \": \" + content.replace(/\\n/g, '|');\n    s += \"\\n\";\n\n    if (this.sub !== null) {\n      indent += '  ';\n\n      for (var i = 0, max = this.sub.length; i < max; ++i) s += this.sub[i].toPrettyString(indent);\n    }\n\n    return s;\n  };\n\n  ASN1.prototype.posStart = function () {\n    return this.stream.pos;\n  };\n\n  ASN1.prototype.posContent = function () {\n    return this.stream.pos + this.header;\n  };\n\n  ASN1.prototype.posEnd = function () {\n    return this.stream.pos + this.header + Math.abs(this.length);\n  };\n  /** Position of the length. */\n\n\n  ASN1.prototype.posLen = function () {\n    return this.stream.pos + this.tagLen;\n  };\n\n  ASN1.prototype.toHexString = function () {\n    return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n  };\n\n  ASN1.prototype.toB64String = function () {\n    return this.stream.b64Dump(this.posStart(), this.posEnd());\n  };\n\n  ASN1.decodeLength = function (stream) {\n    var buf = stream.get(),\n        len = buf & 0x7F;\n    if (len == buf) // first bit was 0, short form\n      return len;\n    if (len === 0) // long form with length 0 is a special case\n      return null; // undefined length\n\n    if (len > 6) // no reason to use Int10, as it would be a huge buffer anyways\n      throw \"Length over 48 bits not supported at position \" + (stream.pos - 1);\n    buf = 0;\n\n    for (var i = 0; i < len; ++i) buf = buf * 256 + stream.get();\n\n    return buf;\n  };\n\n  function ASN1Tag(stream) {\n    var buf = stream.get();\n    this.tagClass = buf >> 6;\n    this.tagConstructed = (buf & 0x20) !== 0;\n    this.tagNumber = buf & 0x1F;\n\n    if (this.tagNumber == 0x1F) {\n      // long tag\n      var n = new Int10();\n\n      do {\n        buf = stream.get();\n        n.mulAdd(128, buf & 0x7F);\n      } while (buf & 0x80);\n\n      this.tagNumber = n.simplify();\n    }\n  }\n\n  ASN1Tag.prototype.isUniversal = function () {\n    return this.tagClass === 0x00;\n  };\n\n  ASN1Tag.prototype.isEOC = function () {\n    return this.tagClass === 0x00 && this.tagNumber === 0x00;\n  };\n\n  ASN1.decode = function (stream, offset) {\n    if (!(stream instanceof Stream)) stream = new Stream(stream, offset || 0);\n\n    var streamStart = new Stream(stream),\n        tag = new ASN1Tag(stream),\n        tagLen = stream.pos - streamStart.pos,\n        len = ASN1.decodeLength(stream),\n        start = stream.pos,\n        header = start - streamStart.pos,\n        sub = null,\n        getSub = function () {\n      sub = [];\n\n      if (len !== null) {\n        // definite length\n        var end = start + len;\n        if (end > stream.enc.length) throw 'Container at offset ' + start + ' has a length of ' + len + ', which is past the end of the stream';\n\n        while (stream.pos < end) sub[sub.length] = ASN1.decode(stream);\n\n        if (stream.pos != end) throw 'Content size is not correct for container at offset ' + start;\n      } else {\n        // undefined length\n        try {\n          for (;;) {\n            var s = ASN1.decode(stream);\n            if (s.tag.isEOC()) break;\n            sub[sub.length] = s;\n          }\n\n          len = start - stream.pos; // undefined lengths are represented as negative values\n        } catch (e) {\n          throw 'Exception while decoding undefined length content at offset ' + start + ': ' + e;\n        }\n      }\n    };\n\n    if (tag.tagConstructed) {\n      // must have valid content\n      getSub();\n    } else if (tag.isUniversal() && (tag.tagNumber == 0x03 || tag.tagNumber == 0x04)) {\n      // sometimes BitString and OctetString are used to encapsulate ASN.1\n      try {\n        if (tag.tagNumber == 0x03) if (stream.get() != 0) throw \"BIT STRINGs with unused bits cannot encapsulate.\";\n        getSub();\n\n        for (var i = 0; i < sub.length; ++i) if (sub[i].tag.isEOC()) throw 'EOC is not supposed to be actual content.';\n      } catch (e) {\n        // but silently ignore when they don't\n        sub = null; //DEBUG console.log('Could not decode structure at ' + start + ':', e);\n      }\n    }\n\n    if (sub === null) {\n      if (len === null) throw \"We can't skip over an invalid tag with undefined length at offset \" + start;\n      stream.pos = start + Math.abs(len);\n    }\n\n    return new ASN1(streamStart, header, len, tag, tagLen, sub);\n  };\n\n  return ASN1;\n});","map":{"version":3,"sources":["/home/chef/Desktop/signer/node_modules/@lapo/asn1js/asn1.js"],"names":["define","factory","module","exports","name","require","window","asn1","substring","Int10","oids","ellipsis","reTimeS","reTimeL","stringCut","str","len","length","Stream","enc","pos","prototype","get","undefined","charCodeAt","hexDigits","hexByte","b","charAt","hexDump","start","end","raw","s","i","b64Safe","b64Dump","extra","c","isASCII","parseStringISO","String","fromCharCode","parseStringUTF","ex","Error","surrogate","cp","parseStringBMP","hi","lo","parseTime","shortYear","m","exec","parseInteger","v","neg","pad","n","mulAdd","toString","parseBitString","maxLength","unusedBits","lenBit","skip","j","size","parseOctetString","e","parseOID","bits","simplify","sub","oid","d","w","ASN1","stream","header","tag","tagLen","ASN1Tag","typeName","tagClass","tagNumber","recurse","el","parser","differentTags","forEach","e1","posContent","Math","abs","d1","content","Infinity","isUniversal","toPrettyString","indent","tagConstructed","replace","max","posStart","posEnd","posLen","toHexString","toB64String","decodeLength","buf","isEOC","decode","offset","streamStart","getSub"],"mappings":"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","sourcesContent":["// ASN.1 JavaScript decoder\n// Copyright (c) 2008-2020 Lapo Luchini <lapo@lapo.it>\n\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n(typeof define != 'undefined' ? define : function (factory) { 'use strict';\n    if (typeof module == 'object') module.exports = factory(function (name) { return require(name); });\n    else window.asn1 = factory(function (name) { return window[name.substring(2)]; });\n})(function (require) {\n\"use strict\";\n\nvar Int10 = require('./int10'),\n    oids = require('./oids'),\n    ellipsis = \"\\u2026\",\n    reTimeS =     /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/,\n    reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\n\nfunction stringCut(str, len) {\n    if (str.length > len)\n        str = str.substring(0, len) + ellipsis;\n    return str;\n}\n\nfunction Stream(enc, pos) {\n    if (enc instanceof Stream) {\n        this.enc = enc.enc;\n        this.pos = enc.pos;\n    } else {\n        // enc should be an array or a binary string\n        this.enc = enc;\n        this.pos = pos;\n    }\n}\nStream.prototype.get = function (pos) {\n    if (pos === undefined)\n        pos = this.pos++;\n    if (pos >= this.enc.length)\n        throw 'Requesting byte offset ' + pos + ' on a stream of length ' + this.enc.length;\n    return (typeof this.enc == \"string\") ? this.enc.charCodeAt(pos) : this.enc[pos];\n};\nStream.prototype.hexDigits = \"0123456789ABCDEF\";\nStream.prototype.hexByte = function (b) {\n    return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);\n};\nStream.prototype.hexDump = function (start, end, raw) {\n    var s = \"\";\n    for (var i = start; i < end; ++i) {\n        s += this.hexByte(this.get(i));\n        if (raw !== true)\n            switch (i & 0xF) {\n            case 0x7: s += \"  \"; break;\n            case 0xF: s += \"\\n\"; break;\n            default:  s += \" \";\n            }\n    }\n    return s;\n};\nvar b64Safe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\nStream.prototype.b64Dump = function (start, end) {\n    var extra = (end - start) % 3,\n        s = '',\n        i, c;\n    for (i = start; i + 2 < end; i += 3) {\n        c = this.get(i) << 16 | this.get(i + 1) << 8 | this.get(i + 2);\n        s += b64Safe.charAt(c >> 18 & 0x3F);\n        s += b64Safe.charAt(c >> 12 & 0x3F);\n        s += b64Safe.charAt(c >>  6 & 0x3F);\n        s += b64Safe.charAt(c       & 0x3F);\n    }\n    if (extra > 0) {\n        c = this.get(i) << 16;\n        if (extra > 1) c |= this.get(i + 1) << 8;\n        s += b64Safe.charAt(c >> 18 & 0x3F);\n        s += b64Safe.charAt(c >> 12 & 0x3F);\n        if (extra == 2) s += b64Safe.charAt(c >> 6 & 0x3F);\n    }\n    return s;\n};\nStream.prototype.isASCII = function (start, end) {\n    for (var i = start; i < end; ++i) {\n        var c = this.get(i);\n        if (c < 32 || c > 176)\n            return false;\n    }\n    return true;\n};\nStream.prototype.parseStringISO = function (start, end) {\n    var s = \"\";\n    for (var i = start; i < end; ++i)\n        s += String.fromCharCode(this.get(i));\n    return s;\n};\nStream.prototype.parseStringUTF = function (start, end) {\n    function ex(c) { // must be 10xxxxxx\n        if ((c < 0x80) || (c >= 0xC0))\n            throw new Error('Invalid UTF-8 continuation byte: ' + c);\n        return (c & 0x3F);\n    }\n    function surrogate(cp) {\n        if (cp < 0x10000)\n            throw new Error('UTF-8 overlong encoding, codepoint encoded in 4 bytes: ' + cp);\n        // we could use String.fromCodePoint(cp) but let's be nice to older browsers and use surrogate pairs\n        cp -= 0x10000;\n        return String.fromCharCode((cp >> 10) + 0xD800, (cp & 0x3FF) + 0xDC00);\n    }\n    var s = \"\";\n    for (var i = start; i < end; ) {\n        var c = this.get(i++);\n        if (c < 0x80) // 0xxxxxxx (7 bit)\n            s += String.fromCharCode(c);\n        else if (c < 0xC0)\n            throw new Error('Invalid UTF-8 starting byte: ' + c);\n        else if (c < 0xE0) // 110xxxxx 10xxxxxx (11 bit)\n            s += String.fromCharCode(((c & 0x1F) << 6) | ex(this.get(i++)));\n        else if (c < 0xF0) // 1110xxxx 10xxxxxx 10xxxxxx (16 bit)\n            s += String.fromCharCode(((c & 0x0F) << 12) | (ex(this.get(i++)) << 6) | ex(this.get(i++)));\n        else if (c < 0xF8) // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx (21 bit)\n            s += surrogate(((c & 0x07) << 18) | (ex(this.get(i++)) << 12) | (ex(this.get(i++)) << 6) | ex(this.get(i++)));\n        else\n            throw new Error('Invalid UTF-8 starting byte (since 2003 it is restricted to 4 bytes): ' + c);\n    }\n    return s;\n};\nStream.prototype.parseStringBMP = function (start, end) {\n    var str = \"\", hi, lo;\n    for (var i = start; i < end; ) {\n        hi = this.get(i++);\n        lo = this.get(i++);\n        str += String.fromCharCode((hi << 8) | lo);\n    }\n    return str;\n};\nStream.prototype.parseTime = function (start, end, shortYear) {\n    var s = this.parseStringISO(start, end),\n        m = (shortYear ? reTimeS : reTimeL).exec(s);\n    if (!m)\n        return \"Unrecognized time: \" + s;\n    if (shortYear) {\n        // to avoid querying the timer, use the fixed range [1970, 2069]\n        // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n        m[1] = +m[1];\n        m[1] += (m[1] < 70) ? 2000 : 1900;\n    }\n    s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n    if (m[5]) {\n        s += \":\" + m[5];\n        if (m[6]) {\n            s += \":\" + m[6];\n            if (m[7])\n                s += \".\" + m[7];\n        }\n    }\n    if (m[8]) {\n        s += \" UTC\";\n        if (m[8] != 'Z') {\n            s += m[8];\n            if (m[9])\n                s += \":\" + m[9];\n        }\n    }\n    return s;\n};\nStream.prototype.parseInteger = function (start, end) {\n    var v = this.get(start),\n        neg = (v > 127),\n        pad = neg ? 255 : 0,\n        len,\n        s = '';\n    // skip unuseful bits (not allowed in DER)\n    while (v == pad && ++start < end)\n        v = this.get(start);\n    len = end - start;\n    if (len === 0)\n        return neg ? '-1' : '0';\n    // show bit length of huge integers\n    if (len > 4) {\n        s = v;\n        len <<= 3;\n        while (((s ^ pad) & 0x80) == 0) {\n            s <<= 1;\n            --len;\n        }\n        s = \"(\" + len + \" bit)\\n\";\n    }\n    // decode the integer\n    if (neg) v = v - 256;\n    var n = new Int10(v);\n    for (var i = start + 1; i < end; ++i)\n        n.mulAdd(256, this.get(i));\n    return s + n.toString();\n};\nStream.prototype.parseBitString = function (start, end, maxLength) {\n    var unusedBits = this.get(start);\n    if (unusedBits > 7)\n        throw 'Invalid BitString with unusedBits=' + unusedBits;\n    var lenBit = ((end - start - 1) << 3) - unusedBits,\n        s = \"\";\n    for (var i = start + 1; i < end; ++i) {\n        var b = this.get(i),\n            skip = (i == end - 1) ? unusedBits : 0;\n        for (var j = 7; j >= skip; --j)\n            s += (b >> j) & 1 ? \"1\" : \"0\";\n        if (s.length > maxLength)\n            s = stringCut(s, maxLength);\n    }\n    return { size: lenBit, str: s };\n};\nStream.prototype.parseOctetString = function (start, end, maxLength) {\n    var len = end - start,\n        s;\n    try {\n        s = this.parseStringUTF(start, end);\n        var v;\n        for (i = 0; i < s.length; ++i) {\n            v = s.charCodeAt(i);\n            if (v < 32 && v != 9 && v != 10 && v != 13) // [\\t\\r\\n] are (kinda) printable\n                throw new Error('Unprintable character at index ' + i + ' (code ' + s.charCodeAt(i) + \")\");\n        }\n        return { size: len, str: s };\n    } catch (e) {\n        // ignore\n    }\n    maxLength /= 2; // we work in bytes\n    if (len > maxLength)\n        end = start + maxLength;\n    s = '';\n    for (var i = start; i < end; ++i)\n        s += this.hexByte(this.get(i));\n    if (len > maxLength)\n        s += ellipsis;\n    return { size: len, str: s };\n};\nStream.prototype.parseOID = function (start, end, maxLength) {\n    var s = '',\n        n = new Int10(),\n        bits = 0;\n    for (var i = start; i < end; ++i) {\n        var v = this.get(i);\n        n.mulAdd(128, v & 0x7F);\n        bits += 7;\n        if (!(v & 0x80)) { // finished\n            if (s === '') {\n                n = n.simplify();\n                if (n instanceof Int10) {\n                    n.sub(80);\n                    s = \"2.\" + n.toString();\n                } else {\n                    var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n                    s = m + \".\" + (n - m * 40);\n                }\n            } else\n                s += \".\" + n.toString();\n            if (s.length > maxLength)\n                return stringCut(s, maxLength);\n            n = new Int10();\n            bits = 0;\n        }\n    }\n    if (bits > 0)\n        s += \".incomplete\";\n    if (typeof oids === 'object') {\n        var oid = oids[s];\n        if (oid) {\n            if (oid.d) s += \"\\n\" + oid.d;\n            if (oid.c) s += \"\\n\" + oid.c;\n            if (oid.w) s += \"\\n(warning!)\";\n        }\n    }\n    return s;\n};\n\nfunction ASN1(stream, header, length, tag, tagLen, sub) {\n    if (!(tag instanceof ASN1Tag)) throw 'Invalid tag value.';\n    this.stream = stream;\n    this.header = header;\n    this.length = length;\n    this.tag = tag;\n    this.tagLen = tagLen;\n    this.sub = sub;\n}\nASN1.prototype.typeName = function () {\n    switch (this.tag.tagClass) {\n    case 0: // universal\n        switch (this.tag.tagNumber) {\n        case 0x00: return \"EOC\";\n        case 0x01: return \"BOOLEAN\";\n        case 0x02: return \"INTEGER\";\n        case 0x03: return \"BIT_STRING\";\n        case 0x04: return \"OCTET_STRING\";\n        case 0x05: return \"NULL\";\n        case 0x06: return \"OBJECT_IDENTIFIER\";\n        case 0x07: return \"ObjectDescriptor\";\n        case 0x08: return \"EXTERNAL\";\n        case 0x09: return \"REAL\";\n        case 0x0A: return \"ENUMERATED\";\n        case 0x0B: return \"EMBEDDED_PDV\";\n        case 0x0C: return \"UTF8String\";\n        case 0x10: return \"SEQUENCE\";\n        case 0x11: return \"SET\";\n        case 0x12: return \"NumericString\";\n        case 0x13: return \"PrintableString\"; // ASCII subset\n        case 0x14: return \"TeletexString\"; // aka T61String\n        case 0x15: return \"VideotexString\";\n        case 0x16: return \"IA5String\"; // ASCII\n        case 0x17: return \"UTCTime\";\n        case 0x18: return \"GeneralizedTime\";\n        case 0x19: return \"GraphicString\";\n        case 0x1A: return \"VisibleString\"; // ASCII subset\n        case 0x1B: return \"GeneralString\";\n        case 0x1C: return \"UniversalString\";\n        case 0x1E: return \"BMPString\";\n        }\n        return \"Universal_\" + this.tag.tagNumber.toString();\n    case 1: return \"Application_\" + this.tag.tagNumber.toString();\n    case 2: return \"[\" + this.tag.tagNumber.toString() + \"]\"; // Context\n    case 3: return \"Private_\" + this.tag.tagNumber.toString();\n    }\n};\nfunction recurse(el, parser, maxLength) {\n    var differentTags = false;\n    if (el.sub) el.sub.forEach(function (e1) {\n        if (e1.tag.tagClass != el.tag.tagClass || e1.tag.tagNumber != el.tag.tagNumber)\n            differentTags = true;\n    });\n    if (!el.sub || differentTags)\n        return el.stream[parser](el.posContent(), el.posContent() + Math.abs(el.length), maxLength);\n    var d = { size: 0, str: '' };\n    el.sub.forEach(function (el) {\n        var d1 = recurse(el, parser, maxLength - d.str.length);\n        d.size += d1.size;\n        d.str += d1.str;\n    });\n    return d;\n}\n/** A string preview of the content (intended for humans). */\nASN1.prototype.content = function (maxLength) {\n    if (this.tag === undefined)\n        return null;\n    if (maxLength === undefined)\n        maxLength = Infinity;\n    var content = this.posContent(),\n        len = Math.abs(this.length);\n    if (!this.tag.isUniversal()) {\n        if (this.sub !== null)\n            return \"(\" + this.sub.length + \" elem)\";\n        var d1 = this.stream.parseOctetString(content, content + len, maxLength);\n        return \"(\" + d1.size + \" byte)\\n\" + d1.str;\n    }\n    switch (this.tag.tagNumber) {\n    case 0x01: // BOOLEAN\n        return (this.stream.get(content) === 0) ? \"false\" : \"true\";\n    case 0x02: // INTEGER\n        return this.stream.parseInteger(content, content + len);\n    case 0x03: // BIT_STRING\n        var d = recurse(this, 'parseBitString', maxLength);\n        return \"(\" + d.size + \" bit)\\n\" + d.str;\n    case 0x04: // OCTET_STRING\n        d = recurse(this, 'parseOctetString', maxLength);\n        return \"(\" + d.size + \" byte)\\n\" + d.str;\n    //case 0x05: // NULL\n    case 0x06: // OBJECT_IDENTIFIER\n        return this.stream.parseOID(content, content + len, maxLength);\n    //case 0x07: // ObjectDescriptor\n    //case 0x08: // EXTERNAL\n    //case 0x09: // REAL\n    case 0x0A: // ENUMERATED\n        return this.stream.parseInteger(content, content + len);\n    //case 0x0B: // EMBEDDED_PDV\n    case 0x10: // SEQUENCE\n    case 0x11: // SET\n        if (this.sub !== null)\n            return \"(\" + this.sub.length + \" elem)\";\n        else\n            return \"(no elem)\";\n    case 0x0C: // UTF8String\n        return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n    case 0x12: // NumericString\n    case 0x13: // PrintableString\n    case 0x14: // TeletexString\n    case 0x15: // VideotexString\n    case 0x16: // IA5String\n    case 0x1A: // VisibleString\n    case 0x1B: // GeneralString\n    //case 0x19: // GraphicString\n    //case 0x1C: // UniversalString\n        return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n    case 0x1E: // BMPString\n        return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n    case 0x17: // UTCTime\n    case 0x18: // GeneralizedTime\n        return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));\n    }\n    return null;\n};\nASN1.prototype.toString = function () {\n    return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? 'null' : this.sub.length) + \"]\";\n};\nASN1.prototype.toPrettyString = function (indent) {\n    if (indent === undefined) indent = '';\n    var s = indent + this.typeName() + \" @\" + this.stream.pos;\n    if (this.length >= 0)\n        s += \"+\";\n    s += this.length;\n    if (this.tag.tagConstructed)\n        s += \" (constructed)\";\n    else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null))\n        s += \" (encapsulates)\";\n    var content = this.content();\n    if (content)\n        s += \": \" + content.replace(/\\n/g, '|');\n    s += \"\\n\";\n    if (this.sub !== null) {\n        indent += '  ';\n        for (var i = 0, max = this.sub.length; i < max; ++i)\n            s += this.sub[i].toPrettyString(indent);\n    }\n    return s;\n};\nASN1.prototype.posStart = function () {\n    return this.stream.pos;\n};\nASN1.prototype.posContent = function () {\n    return this.stream.pos + this.header;\n};\nASN1.prototype.posEnd = function () {\n    return this.stream.pos + this.header + Math.abs(this.length);\n};\n/** Position of the length. */\nASN1.prototype.posLen = function() {\n    return this.stream.pos + this.tagLen;\n};\nASN1.prototype.toHexString = function () {\n    return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n};\nASN1.prototype.toB64String = function () {\n    return this.stream.b64Dump(this.posStart(), this.posEnd());\n};\nASN1.decodeLength = function (stream) {\n    var buf = stream.get(),\n        len = buf & 0x7F;\n    if (len == buf) // first bit was 0, short form\n        return len;\n    if (len === 0) // long form with length 0 is a special case\n        return null; // undefined length\n    if (len > 6) // no reason to use Int10, as it would be a huge buffer anyways\n        throw \"Length over 48 bits not supported at position \" + (stream.pos - 1);\n    buf = 0;\n    for (var i = 0; i < len; ++i)\n        buf = (buf * 256) + stream.get();\n    return buf;\n};\nfunction ASN1Tag(stream) {\n    var buf = stream.get();\n    this.tagClass = buf >> 6;\n    this.tagConstructed = ((buf & 0x20) !== 0);\n    this.tagNumber = buf & 0x1F;\n    if (this.tagNumber == 0x1F) { // long tag\n        var n = new Int10();\n        do {\n            buf = stream.get();\n            n.mulAdd(128, buf & 0x7F);\n        } while (buf & 0x80);\n        this.tagNumber = n.simplify();\n    }\n}\nASN1Tag.prototype.isUniversal = function () {\n    return this.tagClass === 0x00;\n};\nASN1Tag.prototype.isEOC = function () {\n    return this.tagClass === 0x00 && this.tagNumber === 0x00;\n};\nASN1.decode = function (stream, offset) {\n    if (!(stream instanceof Stream))\n        stream = new Stream(stream, offset || 0);\n    var streamStart = new Stream(stream),\n        tag = new ASN1Tag(stream),\n        tagLen = stream.pos - streamStart.pos,\n        len = ASN1.decodeLength(stream),\n        start = stream.pos,\n        header = start - streamStart.pos,\n        sub = null,\n        getSub = function () {\n            sub = [];\n            if (len !== null) {\n                // definite length\n                var end = start + len;\n                if (end > stream.enc.length)\n                    throw 'Container at offset ' + start +  ' has a length of ' + len + ', which is past the end of the stream';\n                while (stream.pos < end)\n                    sub[sub.length] = ASN1.decode(stream);\n                if (stream.pos != end)\n                    throw 'Content size is not correct for container at offset ' + start;\n            } else {\n                // undefined length\n                try {\n                    for (;;) {\n                        var s = ASN1.decode(stream);\n                        if (s.tag.isEOC())\n                            break;\n                        sub[sub.length] = s;\n                    }\n                    len = start - stream.pos; // undefined lengths are represented as negative values\n                } catch (e) {\n                    throw 'Exception while decoding undefined length content at offset ' + start + ': ' + e;\n                }\n            }\n        };\n    if (tag.tagConstructed) {\n        // must have valid content\n        getSub();\n    } else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {\n        // sometimes BitString and OctetString are used to encapsulate ASN.1\n        try {\n            if (tag.tagNumber == 0x03)\n                if (stream.get() != 0)\n                    throw \"BIT STRINGs with unused bits cannot encapsulate.\";\n            getSub();\n            for (var i = 0; i < sub.length; ++i)\n                if (sub[i].tag.isEOC())\n                    throw 'EOC is not supposed to be actual content.';\n        } catch (e) {\n            // but silently ignore when they don't\n            sub = null;\n            //DEBUG console.log('Could not decode structure at ' + start + ':', e);\n        }\n    }\n    if (sub === null) {\n        if (len === null)\n            throw \"We can't skip over an invalid tag with undefined length at offset \" + start;\n        stream.pos = start + Math.abs(len);\n    }\n    return new ASN1(streamStart, header, len, tag, tagLen, sub);\n};\n\nreturn ASN1;\n\n});\n"]},"metadata":{},"sourceType":"script"}