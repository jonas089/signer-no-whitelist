{"ast":null,"code":"import e from \"@babel/runtime/helpers/classCallCheck\";\nimport t from \"@babel/runtime/helpers/createClass\";\nimport n from \"@babel/runtime/helpers/assertThisInitialized\";\nimport r from \"@babel/runtime/helpers/inherits\";\nimport i from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport s from \"@babel/runtime/helpers/getPrototypeOf\";\nimport { Component as a, useRef as o, useEffect as u, useMemo as c } from \"react\";\nimport l from \"prop-types\";\nimport d from \"@babel/runtime/helpers/asyncToGenerator\";\nimport h from \"@babel/runtime/helpers/slicedToArray\";\nimport m from \"@babel/runtime/regenerator\";\nimport p from \"@babel/runtime/helpers/typeof\";\nvar f = \"object\" === (\"undefined\" == typeof window || \"undefined\" == typeof window ? \"undefined\" : p(window)),\n    v = f ? document : {},\n    g = [\"mousemove\", \"keydown\", \"wheel\", \"DOMMouseScroll\", \"mousewheel\", \"mousedown\", \"touchstart\", \"touchmove\", \"MSPointerDown\", \"MSPointerMove\", \"visibilitychange\"];\n\nfunction b(e, t) {\n  var n;\n\n  function r() {\n    for (var r = arguments.length, i = new Array(r), s = 0; s < r; s++) {\n      i[s] = arguments[s];\n    }\n\n    n && clearTimeout(n), n = setTimeout(function () {\n      e.apply(void 0, i), n = null;\n    }, t);\n  }\n\n  return r.cancel = function () {\n    clearTimeout(n);\n  }, r;\n}\n\nfunction T(e, t) {\n  var n = 0;\n  return function () {\n    var r = new Date().getTime();\n    if (!(r - n < t)) return n = r, e.apply(void 0, arguments);\n  };\n}\n\nvar _ = 0,\n    y = 0;\n\nfunction w() {\n  var e = new Date().getTime();\n  return e === _ ? 1e3 * e + ++y : (_ = e, y = 0, 1e3 * e);\n}\n\nfunction k() {\n  return Math.random().toString(36).substring(2);\n}\n\nfunction A() {\n  var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;\n  return new Promise(function (t) {\n    return setTimeout(t, e);\n  });\n}\n\nfunction I() {\n  return new Date().getTime();\n}\n\nvar E = {\n  create: function create(e) {\n    var t = {\n      messagesCallback: null,\n      bc: new BroadcastChannel(e)\n    };\n    return t.bc.onmessage = function (e) {\n      t.messagesCallback && t.messagesCallback(e.data);\n    }, t;\n  },\n  close: function close(e) {\n    e.bc.close();\n  },\n  onMessage: function onMessage(e, t) {\n    e.messagesCallback = t;\n  },\n  postMessage: function postMessage(e, t) {\n    try {\n      return e.bc.postMessage(t, !1), Promise.resolve();\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  },\n  canBeUsed: function canBeUsed() {\n    return \"function\" == typeof BroadcastChannel;\n  },\n  type: \"broadcastChannel\",\n  averageResponseTime: function averageResponseTime() {\n    return 150;\n  },\n  microSeconds: w\n},\n    L = function () {\n  function n() {\n    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 6e4;\n    e(this, n), this.ttl = t, this.set = new Set(), this.timeMap = new Map();\n  }\n\n  return t(n, [{\n    key: \"has\",\n    value: function value(e) {\n      return this.set.has(e);\n    }\n  }, {\n    key: \"add\",\n    value: function value(e) {\n      this.timeMap.set(e, I()), this.set.add(e), this._removeTooOldValues();\n    }\n  }, {\n    key: \"clear\",\n    value: function value() {\n      this.set.clear(), this.timeMap.clear();\n    }\n  }, {\n    key: \"_removeTooOldValues\",\n    value: function value() {\n      for (var e = I() - this.ttl, t = this.set[Symbol.iterator]();;) {\n        var n = t.next().value;\n        if (!n) return;\n        if (!(this.timeMap.get(n) < e)) return;\n        this.timeMap.delete(n), this.set.delete(n);\n      }\n    }\n  }]), n;\n}();\n\nfunction O() {\n  var e;\n  if (\"undefined\" == typeof window) return null;\n\n  try {\n    e = window.localStorage, e = window[\"ie8-eventlistener/storage\"] || window.localStorage;\n  } catch (e) {}\n\n  return e;\n}\n\nfunction M(e, t) {\n  var n = e,\n      r = function r(e) {\n    e.key === n && t(JSON.parse(e.newValue));\n  };\n\n  return window.addEventListener(\"storage\", r), r;\n}\n\nfunction D() {\n  var e = O();\n  if (!e) return !1;\n\n  try {\n    var t = \"__check\";\n    e.setItem(t, \"works\"), e.removeItem(t);\n  } catch (e) {\n    return !1;\n  }\n\n  return !0;\n}\n\nvar S = {\n  create: function create(e) {\n    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n    if (!D()) throw new Error(\"❌ localStorage cannot be used.\");\n    var n = k(),\n        r = new L(t.removeTimeout),\n        i = {\n      channelName: e,\n      uuid: n,\n      eMIs: r\n    };\n    return i.listener = M(e, function (e) {\n      i.messagesCallback && e.uuid !== n && e.token && !r.has(e.token) && (e.data.time && e.data.time < i.messagesCallbackTime || (r.add(e.token), i.messagesCallback(e.data)));\n    }), i;\n  },\n  close: function close(e) {\n    var t;\n    t = e.listener, window.removeEventListener(\"storage\", t);\n  },\n  onMessage: function onMessage(e, t, n) {\n    e.messagesCallbackTime = n, e.messagesCallback = t;\n  },\n  postMessage: function postMessage(e, t) {\n    return new Promise(function (n) {\n      var r = e.channelName,\n          i = {\n        token: k(),\n        time: new Date().getTime(),\n        data: t,\n        uuid: e.uuid\n      },\n          s = JSON.stringify(i);\n      O().setItem(r, s);\n      var a = document.createEvent(\"Event\");\n      a.initEvent(\"storage\", !0, !0), a.key = r, a.newValue = s, window.dispatchEvent(a), n();\n    });\n  },\n  canBeUsed: D,\n  type: \"localStorage\",\n  averageResponseTime: function averageResponseTime() {\n    var e = navigator.userAgent.toLowerCase();\n    return e.includes(\"safari\") && !e.includes(\"chrome\") ? 240 : 120;\n  },\n  microSeconds: w\n},\n    P = new Set();\nvar C = {\n  create: function create(e) {\n    var t = {\n      name: e,\n      messagesCallback: null\n    };\n    return P.add(t), t;\n  },\n  close: function close(e) {\n    P.delete(e);\n  },\n  onMessage: function onMessage(e, t) {\n    e.messagesCallback = t;\n  },\n  postMessage: function postMessage(e, t) {\n    return new Promise(function (n) {\n      return setTimeout(function () {\n        Array.from(P).filter(function (t) {\n          return t.name === e.name;\n        }).filter(function (t) {\n          return t !== e;\n        }).filter(function (e) {\n          return !!e.messagesCallback;\n        }).forEach(function (e) {\n          return e.messagesCallback(t);\n        }), n();\n      }, 5);\n    });\n  },\n  canBeUsed: function canBeUsed() {\n    return !0;\n  },\n  type: \"simulate\",\n  averageResponseTime: function averageResponseTime() {\n    return 5;\n  },\n  microSeconds: w\n},\n    x = [E, S];\n\nfunction B() {\n  var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n\n  if (e.type) {\n    if (\"simulate\" === e.type) return C;\n    var t = x.find(function (t) {\n      return t.type === e.type;\n    });\n    if (t) return t;\n    throw new Error(\"❌ Method \".concat(e.type, \" is not supported.\"));\n  }\n\n  var n = x.find(function (e) {\n    return e.canBeUsed();\n  });\n  if (!n) throw new Error(\"❌ No method found \".concat(JSON.stringify(x.map(function (e) {\n    return e.type;\n  }))));\n  return n;\n}\n\nvar R = function () {\n  function n(t) {\n    var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n    e(this, n), this.name = t, this.options = r, this.method = B(this.options), this.closed = !1, this._isListening = !1, this._onMessageListener = null, this._addEventListeners = {\n      message: [],\n      internal: []\n    }, this._unSendMessagePromises = new Set(), this._beforeClose = [], this._preparePromises = null, j(this);\n  }\n\n  return t(n, [{\n    key: \"postMessage\",\n    value: function value(e) {\n      if (this.closed) throw new Error(\"❌ Cannot post message after channel has closed\");\n      return N(this, \"message\", e);\n    }\n  }, {\n    key: \"postInternal\",\n    value: function value(e) {\n      return N(this, \"internal\", e);\n    }\n  }, {\n    key: \"onmessage\",\n    get: function get() {\n      return this._onMessageListener;\n    },\n    set: function set(e) {\n      var t = {\n        time: this.method.microSeconds(),\n        fn: e\n      };\n      U(this, \"message\", this._onMessageListener), e && \"function\" == typeof e ? (this._onMessageListener = t, Y(this, \"message\", t)) : this._onMessageListener = null;\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function value(e, t) {\n      Y(this, e, {\n        time: this.method.microSeconds(),\n        fn: t\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function value(e, t) {\n      U(this, e, this._addEventListeners[e].find(function (e) {\n        return e.fn === t;\n      }));\n    }\n  }, {\n    key: \"close\",\n    value: function value() {\n      var e = this;\n\n      if (!this.closed) {\n        this.closed = !0;\n        var t = this._preparePromises ? this._preparePromises : Promise.resolve();\n        return this._onMessageListener = null, this._addEventListeners.message = [], t.then(function () {\n          return Promise.all(Array.from(e._unSendMessagePromises));\n        }).then(function () {\n          return Promise.all(e._beforeClose.map(function (e) {\n            return e();\n          }));\n        }).then(function () {\n          return e.method.close(e._state);\n        });\n      }\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.method.type;\n    }\n  }, {\n    key: \"isClosed\",\n    value: function value() {\n      return this.closed;\n    }\n  }]), n;\n}();\n\nfunction N(e, t, n) {\n  var r = {\n    time: e.method.microSeconds(),\n    type: t,\n    data: n\n  };\n  return (e._preparePromises ? e._preparePromises : Promise.resolve()).then(function () {\n    var t = e.method.postMessage(e._state, r);\n    return e._unSendMessagePromises.add(t), t.catch().then(function () {\n      return e._unSendMessagePromises.delete(t);\n    }), t;\n  });\n}\n\nfunction j(e) {\n  var t,\n      n = e.method.create(e.name, e.options);\n  (t = n) && \"function\" == typeof t.then ? (e._preparePromises = n, n.then(function (t) {\n    e._state = t;\n  })) : e._state = n;\n}\n\nfunction X(e) {\n  return e._addEventListeners.message.length > 0 || e._addEventListeners.internal.length > 0;\n}\n\nfunction Y(e, t, n) {\n  e._addEventListeners[t].push(n), function (e) {\n    if (!e._isListening && X(e)) {\n      var t = function t(_t) {\n        e._addEventListeners[_t.type].forEach(function (e) {\n          _t.time >= e.time && e.fn(_t.data);\n        });\n      },\n          n = e.method.microSeconds();\n\n      e._preparePromises ? e._preparePromises.then(function () {\n        e._isListening = !0, e.method.onMessage(e._state, t, n);\n      }) : (e._isListening = !0, e.method.onMessage(e._state, t, n));\n    }\n  }(e);\n}\n\nfunction U(e, t, n) {\n  e._addEventListeners[t] = e._addEventListeners[t].filter(function (e) {\n    return e !== n;\n  }), function (e) {\n    if (e._isListening && !X(e)) {\n      e._isListening = !1;\n      var t = e.method.microSeconds();\n      e.method.onMessage(e._state, null, t);\n    }\n  }(e);\n}\n\nvar F = function () {\n  function n(t, r) {\n    var i = this;\n    e(this, n), this._channel = t, this._options = r, this.isLeader = !1, this.isDead = !1, this.token = k(), this._isApplying = !1, this._reApply = !1, this._unloadFns = [], this._listeners = [], this._intervals = [], this._duplicateListeners = function () {}, this._duplicateCalled = !1, this._onBeforeDie = d(m.mark(function e() {\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e);\n    }));\n\n    var s = function () {\n      var e = d(m.mark(function e() {\n        return m.wrap(function (e) {\n          for (;;) {\n            switch (e.prev = e.next) {\n              case 0:\n                return e.abrupt(\"return\", i.die());\n\n              case 1:\n              case \"end\":\n                return e.stop();\n            }\n          }\n        }, e);\n      }));\n      return function () {\n        return e.apply(this, arguments);\n      };\n    }();\n\n    f && (window.addEventListener(\"beforeUnload\", s), window.addEventListener(\"unload\", s), this._unloadFns.push([\"beforeUnload\", s]), this._unloadFns.push([\"unload\", s]));\n  }\n\n  var r;\n  return t(n, [{\n    key: \"applyOnce\",\n    value: function value() {\n      var e = this;\n      if (this.isLeader) return Promise.resolve(!1);\n      if (this.isDead) return Promise.resolve(!1);\n      if (this._isApplying) return this._reApply = !0, Promise.resolve(!1);\n      this._isApplying = !0;\n\n      var t = !1,\n          n = function n(_n) {\n        \"leader\" === _n.context && _n.token !== e.token && (\"apply\" === _n.action && _n.token > e.token && (t = !0), \"tell\" === _n.action && (t = !0));\n      };\n\n      return this._channel.addEventListener(\"internal\", n), V(this, \"apply\").then(function () {\n        return A(e._options.responseTime);\n      }).then(function () {\n        return t ? Promise.reject(new Error()) : V(e, \"apply\");\n      }).then(function () {\n        return A(e._options.responseTime);\n      }).then(function () {\n        return t ? Promise.reject(new Error()) : V(e);\n      }).then(function () {\n        return function (e) {\n          e.isLeader = !0;\n\n          var t = function t(_t2) {\n            \"leader\" === _t2.context && \"apply\" === _t2.action && V(e, \"tell\"), \"leader\" !== _t2.context || \"tell\" !== _t2.action || e._duplicateCalled || (e._duplicateCalled = !0, e._duplicateListeners(), V(e, \"tell\"));\n          };\n\n          return e._channel.addEventListener(\"internal\", t), e._listeners.push(t), V(e, \"tell\");\n        }(e);\n      }).then(function () {\n        return !0;\n      }).catch(function () {\n        return !1;\n      }).then(function (t) {\n        return e._channel.removeEventListener(\"internal\", n), e._isApplying = !1, !t && e._reApply ? (e._reApply = !1, e.applyOnce()) : t;\n      });\n    }\n  }, {\n    key: \"awaitLeadership\",\n    value: function value() {\n      var e;\n      return this._awaitLeadershipPromise || (this._awaitLeadershipPromise = (e = this).isLeader ? Promise.resolve() : new Promise(function (t) {\n        var n = !1;\n\n        function r() {\n          n || (n = !0, clearInterval(i), e._channel.removeEventListener(\"internal\", s), t(!0));\n        }\n\n        e.applyOnce().then(function () {\n          e.isLeader && r();\n        });\n        var i = setInterval(function () {\n          e.applyOnce().then(function () {\n            e.isLeader && r();\n          });\n        }, e._options.fallbackInterval);\n\n        e._intervals.push(i);\n\n        var s = function s(t) {\n          \"leader\" === t.context && \"death\" === t.action && e.applyOnce().then(function () {\n            e.isLeader && r();\n          });\n        };\n\n        e._channel.addEventListener(\"internal\", s), e._listeners.push(s);\n      })), this._awaitLeadershipPromise;\n    }\n  }, {\n    key: \"onDuplicate\",\n    get: function get() {\n      return this._duplicateListeners;\n    },\n    set: function set(e) {\n      this._duplicateListeners = e;\n    }\n  }, {\n    key: \"onBeforeDie\",\n    get: function get() {\n      return this._onBeforeDie;\n    },\n    set: function set(e) {\n      this._onBeforeDie = e;\n    }\n  }, {\n    key: \"die\",\n    value: (r = d(m.mark(function e() {\n      var t = this;\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n              if (!this.isDead) {\n                e.next = 2;\n                break;\n              }\n\n              return e.abrupt(\"return\");\n\n            case 2:\n              return this.isDead = !0, e.next = 5, this.onBeforeDie();\n\n            case 5:\n              return this._listeners.forEach(function (e) {\n                return t._channel.removeEventListener(\"internal\", e);\n              }), this._intervals.forEach(function (e) {\n                return clearInterval(e);\n              }), this._unloadFns.forEach(function (e) {\n                f && window.removeEventListener(e[0], e[1]);\n              }), e.abrupt(\"return\", V(this, \"death\"));\n\n            case 9:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e, this);\n    })), function () {\n      return r.apply(this, arguments);\n    })\n  }]), n;\n}();\n\nfunction V(e, t) {\n  var n = {\n    context: \"leader\",\n    action: t,\n    token: e.token\n  };\n  return e._channel.postInternal(n);\n}\n\nvar J = function J(e) {\n  var t = e.type,\n      n = e.channelName,\n      r = e.fallbackInterval,\n      i = e.responseTime,\n      s = e.emitOnAllTabs,\n      a = e.callbacks,\n      o = e.start,\n      u = e.reset,\n      c = e.pause,\n      l = e.resume,\n      p = new R(n, {\n    type: t\n  }),\n      f = function (e, t) {\n    if (e._leaderElector) throw new Error(\"❌ MessageChannel already has a leader-elector\");\n    var n = new F(e, t);\n    return e._beforeClose.push(d(m.mark(function e() {\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n              return e.abrupt(\"return\", n.die());\n\n            case 1:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e);\n    }))), e._leaderElector = n, n;\n  }(p, {\n    fallbackInterval: r,\n    responseTime: i\n  }),\n      v = {};\n\n  v[f.token] = !1;\n\n  var g = !1,\n      b = !0,\n      T = function T() {\n    return g;\n  };\n\n  f.awaitLeadership().then(function () {\n    g = !0;\n  }), p.addEventListener(\"message\", function (e) {\n    var t = h(e, 2),\n        n = t[0],\n        r = t[1];\n\n    switch (n) {\n      case \"register\":\n        v[r] = !1;\n        break;\n\n      case \"deregister\":\n        delete v[r];\n        break;\n\n      case \"idle\":\n        _(r);\n\n        break;\n\n      case \"active\":\n        y(r);\n        break;\n\n      case \"emitIdle\":\n        a.onIdle();\n        break;\n\n      case \"emitActive\":\n        a.onActive();\n        break;\n\n      case \"start\":\n        o(!0);\n        break;\n\n      case \"reset\":\n        u(!0);\n        break;\n\n      case \"pause\":\n        c(!0);\n        break;\n\n      case \"resume\":\n        l(!0);\n    }\n  });\n\n  var _ = function _() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : f.token;\n    v[e] = !0;\n    var t = Object.values(v).every(function (e) {\n      return e;\n    });\n    !b && t && (b = !0, T() ? (a.onIdle(), s && w(\"emitIdle\")) : w(\"idle\"));\n  },\n      y = function y() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : f.token;\n    v[e] = !1;\n    var t = Object.values(v).some(function (e) {\n      return !e;\n    });\n    b && t && (b = !1, T() ? (a.onActive(), s && w(\"emitActive\")) : w(\"active\"));\n  };\n\n  f.onDuplicate = d(m.mark(function e() {\n    return m.wrap(function (e) {\n      for (;;) {\n        switch (e.prev = e.next) {\n          case 0:\n            return e.next = 2, f.die();\n\n          case 2:\n            return e.abrupt(\"return\", e.sent);\n\n          case 3:\n          case \"end\":\n            return e.stop();\n        }\n      }\n    }, e);\n  })), f.onBeforeDie = d(m.mark(function e() {\n    return m.wrap(function (e) {\n      for (;;) {\n        switch (e.prev = e.next) {\n          case 0:\n            return e.next = 2, w(\"deregister\");\n\n          case 2:\n            return e.abrupt(\"return\", e.sent);\n\n          case 3:\n          case \"end\":\n            return e.stop();\n        }\n      }\n    }, e);\n  }));\n\n  var w = function () {\n    var e = d(m.mark(function e(t) {\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n              return e.abrupt(\"return\", p.postMessage([t, f.token]));\n\n            case 1:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e);\n    }));\n    return function (t) {\n      return e.apply(this, arguments);\n    };\n  }(),\n      k = function () {\n    var e = d(m.mark(function e() {\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n              return e.next = 2, f.die();\n\n            case 2:\n              return e.next = 4, p.close();\n\n            case 4:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e);\n    }));\n    return function () {\n      return e.apply(this, arguments);\n    };\n  }();\n\n  return w(\"register\"), {\n    close: k,\n    send: w,\n    isLeader: T,\n    idle: _,\n    active: y,\n    isAllIdle: function isAllIdle() {\n      return b;\n    },\n    setAllIdle: function setAllIdle(e) {\n      b = e;\n    }\n  };\n};\n\nfunction z(e) {\n  var t = function () {\n    if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n    if (Reflect.construct.sham) return !1;\n    if (\"function\" == typeof Proxy) return !0;\n\n    try {\n      return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;\n    } catch (e) {\n      return !1;\n    }\n  }();\n\n  return function () {\n    var n,\n        r = s(e);\n\n    if (t) {\n      var a = s(this).constructor;\n      n = Reflect.construct(r, arguments, a);\n    } else n = r.apply(this, arguments);\n\n    return i(this, n);\n  };\n}\n\nvar G = function (i) {\n  r(o, a);\n  var s = z(o);\n\n  function o(t) {\n    var r;\n    if (e(this, o), (r = s.call(this, t)).state = {\n      idle: !1,\n      oldDate: +new Date(),\n      lastActive: +new Date(),\n      lastIdle: null,\n      idleTime: 0,\n      remaining: null,\n      pageX: null,\n      pageY: null\n    }, r.tId = null, r.eventsBound = !1, r.callbackRefs = {}, t.debounce > 0 && t.throttle > 0) throw new Error(\"onAction can either be throttled or debounced (not both)\");\n    return t.debounce > 0 ? r._onAction = b(t.onAction, t.debounce) : t.throttle > 0 ? r._onAction = T(t.onAction, t.throttle) : r._onAction = t.onAction, t.eventsThrottle > 0 ? r.handleEvent = T(r._handleEvent.bind(n(r)), t.eventsThrottle) : r.handleEvent = r._handleEvent.bind(n(r)), t.startOnMount && !t.startManually || (r.state.idle = !0), r._toggleIdleState = r._toggleIdleState.bind(n(r)), r.start = r.start.bind(n(r)), r.reset = r.reset.bind(n(r)), r.pause = r.pause.bind(n(r)), r.resume = r.resume.bind(n(r)), r.isIdle = r.isIdle.bind(n(r)), r.getRemainingTime = r.getRemainingTime.bind(n(r)), r.getElapsedTime = r.getElapsedTime.bind(n(r)), r.getLastActiveTime = r.getLastActiveTime.bind(n(r)), r.getLastIdleTime = r.getLastIdleTime.bind(n(r)), r.getTotalIdleTime = r.getTotalIdleTime.bind(n(r)), r.getTotalActiveTime = r.getTotalActiveTime.bind(n(r)), r;\n  }\n\n  return t(o, [{\n    key: \"componentDidMount\",\n    value: function value() {\n      var e = this.props,\n          t = e.startOnMount,\n          n = e.startManually;\n      this._setupTabManager(), n || (t ? this.start() : this._bindEvents());\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function value(e) {\n      e.debounce !== this.props.debounce && this.props.debounce > 0 ? (this._onAction.cancel && this._onAction.cancel(), this._onAction = b(this.props.onAction, this.props.debounce)) : e.throttle !== this.props.throttle && this.props.throttle > 0 ? (this._onAction.cancel && this._onAction.cancel(), this._onAction = T(this.props.onAction, this.props.throttle)) : (e.throttle && 0 === this.props.throttle || e.debounce && 0 === this.props.debounce) && (this._onAction.cancel && this._onAction.cancel(), this._onAction = this.props.onAction), e.eventsThrottle !== this.props.eventsThrottle && (this._unbindEvents(), this.handleEvent = T(this._handleEvent.bind(this), this.props.eventsThrottle), this._bindEvents()), e.timeout !== this.props.timeout && this.state.idle && this.reset(), e.onActive !== this.props.onActive && (this.callbackRefs.onActive = this.props.onActive), e.onIdle !== this.props.onIdle && (this.callbackRefs.onIdle = this.props.onIdle);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function value() {\n      clearTimeout(this.tId), this._unbindEvents(!0), this._onAction.cancel && this._onAction.cancel(), this.manager && this.manager.close().catch(console.error);\n    }\n  }, {\n    key: \"render\",\n    value: function value() {\n      return this.props.children || null;\n    }\n  }, {\n    key: \"_setupTabManager\",\n    value: function value() {\n      var e = this.props,\n          t = e.crossTab,\n          n = e.onIdle,\n          r = e.onActive;\n\n      if (this.callbackRefs = {\n        onIdle: n,\n        onActive: r\n      }, t) {\n        var i = Object.assign({\n          channelName: \"idle-timer\",\n          fallbackInterval: 2e3,\n          responseTime: 100,\n          removeTimeout: 6e4,\n          emitOnAllTabs: !1\n        }, !0 === t ? {} : t),\n            s = i.type,\n            a = i.channelName,\n            o = i.fallbackInterval,\n            u = i.responseTime,\n            c = i.emitOnAllTabs;\n        this.manager = J({\n          type: s,\n          channelName: a,\n          fallbackInterval: o,\n          responseTime: u,\n          emitOnAllTabs: c,\n          callbacks: this.callbackRefs,\n          start: this.start,\n          reset: this.reset,\n          pause: this.pause,\n          resume: this.resume\n        });\n      }\n    }\n  }, {\n    key: \"_bindEvents\",\n    value: function value() {\n      var e = this;\n\n      if (f) {\n        var t = this.props,\n            n = t.element,\n            r = t.events,\n            i = t.passive,\n            s = t.capture;\n        this.eventsBound || (r.forEach(function (t) {\n          n.addEventListener(t, e.handleEvent, {\n            capture: s,\n            passive: i\n          });\n        }), this.eventsBound = !0);\n      }\n    }\n  }, {\n    key: \"_unbindEvents\",\n    value: function value() {\n      var e = this,\n          t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n\n      if (f) {\n        var n = this.props,\n            r = n.element,\n            i = n.events,\n            s = n.passive,\n            a = n.capture;\n        (this.eventsBound || t) && (i.forEach(function (t) {\n          r.removeEventListener(t, e.handleEvent, {\n            capture: a,\n            passive: s\n          });\n        }), this.eventsBound = !1);\n      }\n    }\n  }, {\n    key: \"_toggleIdleState\",\n    value: function value(e) {\n      var t = this;\n      this.setState(function (e) {\n        return {\n          idle: !e.idle,\n          lastIdle: e.idle ? e.lastIdle : +new Date() - t.props.timeout,\n          idleTime: e.idle ? e.idleTime + +new Date() - e.lastIdle : e.idleTime\n        };\n      }, function () {\n        var n = t.props,\n            r = n.onActive,\n            i = n.onIdle,\n            s = n.stopOnIdle;\n        t.state.idle ? (s && (clearTimeout(t.tId), t.tId = null, t._unbindEvents()), t.manager ? t.manager.idle() : i(e)) : (t._bindEvents(), t.manager ? t.manager.active() : r(e));\n      });\n    }\n  }, {\n    key: \"_handleEvent\",\n    value: function value(e) {\n      var t = this.state,\n          n = t.remaining,\n          r = t.pageX,\n          i = t.pageY,\n          s = t.idle,\n          a = this.props,\n          o = a.timeout,\n          u = a.stopOnIdle;\n\n      if (this._onAction(e), !n) {\n        if (\"mousemove\" === e.type) {\n          if (e.pageX === r && e.pageY === i) return;\n          if (void 0 === e.pageX && void 0 === e.pageY) return;\n          if (this.getElapsedTime() < 200) return;\n        }\n\n        clearTimeout(this.tId), this.tId = null;\n        var c = +new Date() - this.getLastActiveTime();\n        (s && !u || !s && c > o) && this._toggleIdleState(e), this.setState({\n          lastActive: +new Date(),\n          pageX: e.pageX,\n          pageY: e.pageY\n        }), s && u || (this.tId = setTimeout(this._toggleIdleState, o));\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function value() {\n      var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];\n      clearTimeout(this.tId), this.tId = null, this._bindEvents(), this.setState({\n        idle: !1,\n        oldDate: +new Date(),\n        lastActive: +new Date(),\n        remaining: null\n      }), this.manager && (this.manager.setAllIdle(!1), !e && this.props.crossTab.emitOnAllTabs && this.manager.send(\"start\"));\n      var t = this.props.timeout;\n      this.tId = setTimeout(this._toggleIdleState, t);\n    }\n  }, {\n    key: \"reset\",\n    value: function value() {\n      var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n      clearTimeout(this.tId), this.tId = null, this._bindEvents(), this.state.idle && (this.manager ? this.manager.active() : this.props.onActive()), this.manager && (this.manager.setAllIdle(!1), !e && this.props.crossTab.emitOnAllTabs && this.manager.send(\"reset\")), this.setState({\n        idle: !1,\n        oldDate: +new Date(),\n        lastActive: +new Date(),\n        remaining: null\n      });\n      var t = this.props.timeout;\n      this.tId = setTimeout(this._toggleIdleState, t);\n    }\n  }, {\n    key: \"pause\",\n    value: function value() {\n      var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],\n          t = this.state.remaining;\n      null === t && (this._unbindEvents(), clearTimeout(this.tId), this.tId = null, this.manager && !e && this.props.crossTab.emitOnAllTabs && this.manager.send(\"pause\"), this.setState({\n        remaining: this.getRemainingTime()\n      }));\n    }\n  }, {\n    key: \"resume\",\n    value: function value() {\n      var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],\n          t = this.state,\n          n = t.remaining,\n          r = t.idle;\n      null !== n && (this._bindEvents(), this.manager && !e && this.props.crossTab.emitOnAllTabs && this.manager.send(\"resume\"), r || (this.tId = setTimeout(this._toggleIdleState, n), this.setState({\n        remaining: null,\n        lastActive: +new Date()\n      })));\n    }\n  }, {\n    key: \"getRemainingTime\",\n    value: function value() {\n      var e = this.state,\n          t = e.remaining,\n          n = e.lastActive,\n          r = this.props.timeout;\n      if (null !== t) return t < 0 ? 0 : t;\n      var i = r - (+new Date() - n);\n      return i < 0 ? 0 : i;\n    }\n  }, {\n    key: \"getElapsedTime\",\n    value: function value() {\n      var e = this.state.oldDate;\n      return +new Date() - e;\n    }\n  }, {\n    key: \"getLastIdleTime\",\n    value: function value() {\n      return this.state.lastIdle;\n    }\n  }, {\n    key: \"getTotalIdleTime\",\n    value: function value() {\n      var e = this.state,\n          t = e.idle,\n          n = e.lastIdle,\n          r = e.idleTime;\n      return t ? +new Date() - n + r : r;\n    }\n  }, {\n    key: \"getLastActiveTime\",\n    value: function value() {\n      return this.state.lastActive;\n    }\n  }, {\n    key: \"getTotalActiveTime\",\n    value: function value() {\n      return this.getElapsedTime() - this.getTotalIdleTime();\n    }\n  }, {\n    key: \"isIdle\",\n    value: function value() {\n      return this.state.idle;\n    }\n  }, {\n    key: \"isLeader\",\n    value: function value() {\n      return !this.manager || this.manager.isLeader();\n    }\n  }]), o;\n}();\n\nfunction W() {\n  var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n      t = e.timeout,\n      n = void 0 === t ? 12e5 : t,\n      r = e.element,\n      i = void 0 === r ? v : r,\n      s = e.events,\n      a = void 0 === s ? g : s,\n      l = e.onIdle,\n      h = void 0 === l ? function () {} : l,\n      p = e.onActive,\n      _ = void 0 === p ? function () {} : p,\n      y = e.onAction,\n      w = void 0 === y ? function () {} : y,\n      k = e.debounce,\n      A = void 0 === k ? 0 : k,\n      I = e.throttle,\n      E = void 0 === I ? 0 : I,\n      L = e.eventsThrottle,\n      O = void 0 === L ? 200 : L,\n      M = e.startOnMount,\n      D = void 0 === M || M,\n      S = e.startManually,\n      P = void 0 !== S && S,\n      C = e.stopOnIdle,\n      x = void 0 !== C && C,\n      B = e.capture,\n      R = void 0 === B || B,\n      N = e.passive,\n      j = void 0 === N || N,\n      X = e.crossTab,\n      Y = void 0 !== X && X,\n      U = o(!1),\n      F = o(!0),\n      V = o(+new Date()),\n      z = o(null),\n      G = o(null),\n      W = o(null),\n      q = o(null),\n      H = o(null),\n      K = o(null),\n      Q = o(0),\n      Z = o(!0),\n      $ = o(n),\n      ee = o(null);\n\n  Y && (!0 === Y && (Y = {}), Y = Object.assign({\n    channelName: \"idle-timer\",\n    fallbackInterval: 2e3,\n    responseTime: 100,\n    removeTimeout: 6e4,\n    emitOnAllTabs: !1\n  }, Y));\n  var te = o(h),\n      ne = o(_),\n      re = o(w);\n  u(function () {\n    te.current = h;\n  }, [h]), u(function () {\n    ne.current = _;\n  }, [_]), u(function () {\n    re.current = w;\n  }, [w]);\n\n  var ie = c(function () {\n    function e(e) {\n      re.current(e);\n    }\n\n    return e.cancel && e.cancel(), A > 0 ? b(e, A) : E > 0 ? T(e, E) : e;\n  }, [E, A]),\n      se = function se(e) {\n    var t = !F.current;\n    F.current = t, t ? (x && (clearTimeout(q.current), q.current = null, ce()), K.current = +new Date() - $.current, ee.current ? ee.current.idle() : te.current(e)) : (Q.current += +new Date() - K.current, ue(), ee.current ? ee.current.active() : ne.current(e));\n  },\n      ae = function ae(e) {\n    if (ie(e), !z.current) {\n      if (\"mousemove\" === e.type) {\n        if (e.pageX === G && e.pageY === W) return;\n        if (void 0 === e.pageX && void 0 === e.pageY) return;\n        if (de() < 200) return;\n      }\n\n      clearTimeout(q.current), q.current = null;\n      var t = +new Date() - pe();\n      (F.current && !x || !F.current && t > $.current) && se(e), H.current = +new Date(), G.current = e.pageX, W.current = e.pageY, F.current || (q.current = setTimeout(se, $.current));\n    }\n  },\n      oe = o(ae),\n      ue = function ue() {\n    f && (U.current || (a.forEach(function (e) {\n      i.addEventListener(e, oe.current, {\n        capture: R,\n        passive: j\n      });\n    }), U.current = !0));\n  },\n      ce = function ce() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n    f && (U.current || e) && (a.forEach(function (e) {\n      i.removeEventListener(e, oe.current, {\n        capture: R,\n        passive: j\n      });\n    }), U.current = !1);\n  },\n      le = function le() {\n    if (null !== z.current) return z.current < 0 ? 0 : z.current;\n    var e = $.current - (+new Date() - H.current);\n    return e < 0 ? 0 : e;\n  },\n      de = function de() {\n    return +new Date() - V.current;\n  },\n      he = function he() {\n    return K.current;\n  },\n      me = function me() {\n    return F.current ? +new Date() - K.current + Q.current : Q.current;\n  },\n      pe = function pe() {\n    return H.current;\n  },\n      fe = function fe() {\n    return de() - me();\n  },\n      ve = function ve() {\n    return F.current;\n  },\n      ge = function ge() {\n    return !ee.current || ee.current.isLeader();\n  },\n      be = function be() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n    clearTimeout(q.current), q.current = null, ue(), F.current = !1, V.current = +new Date(), H.current = +new Date(), z.current = null, ee.current && (ee.current.setAllIdle(!1), !e && Y.emitOnAllTabs && ee.current.send(\"start\")), q.current = setTimeout(se, $.current);\n  },\n      Te = function Te() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n    clearTimeout(q.current), q.current = null, ue(), F.current && (ee.current ? ee.current.active() : ne.current()), F.current = !1, V.current = +new Date(), H.current = +new Date(), z.current = null, ee.current && (ee.current.setAllIdle(!1), !e && Y.emitOnAllTabs && ee.current.send(\"reset\")), q.current = setTimeout(se, $.current);\n  },\n      _e = function _e() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n    null === z.current && (ce(), clearTimeout(q.current), q.current = null, z.current = le(), ee.current && !e && Y.emitOnAllTabs && ee.current.send(\"pause\"));\n  },\n      ye = function ye() {\n    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n    null !== z.current && (ue(), F.current || (q.current = setTimeout(se, z.current), z.current = null, H.current = +new Date()), ee.current && !e && Y.emitOnAllTabs && ee.current.send(\"resume\"));\n  };\n\n  return u(function () {\n    if (A > 0 && E > 0) throw new Error(\"onAction can either be throttled or debounced (not both)\");\n    return Y && (ee.current = J({\n      type: Y.type,\n      channelName: Y.channelName,\n      fallbackInterval: Y.fallbackInterval,\n      responseTime: Y.responseTime,\n      emitOnAllTabs: Y.emitOnAllTabs,\n      callbacks: {\n        onIdle: te.current,\n        onActive: ne.current\n      },\n      start: be,\n      reset: Te,\n      pause: _e,\n      resume: ye\n    })), P ? d(m.mark(function e() {\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n              if (clearTimeout(q.current), ce(!0), !Y) {\n                e.next = 5;\n                break;\n              }\n\n              return e.next = 5, ee.current.close();\n\n            case 5:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e);\n    })) : (D ? be() : ue(), d(m.mark(function e() {\n      return m.wrap(function (e) {\n        for (;;) {\n          switch (e.prev = e.next) {\n            case 0:\n              if (clearTimeout(q.current), ce(!0), ie.cancel && ie.cancel(), !Y) {\n                e.next = 6;\n                break;\n              }\n\n              return e.next = 6, ee.current.close();\n\n            case 6:\n            case \"end\":\n              return e.stop();\n          }\n        }\n      }, e);\n    })));\n  }, []), u(function () {\n    var e = U.current;\n    e && ce(), oe.current = O > 0 ? T(ae, O) : ae, e && ue();\n  }, [O]), u(function () {\n    $.current = n, !Z.current && F.current && Te(), Z.current = !1;\n  }, [n]), {\n    isIdle: ve,\n    isLeader: ge,\n    start: be,\n    pause: _e,\n    reset: Te,\n    resume: ye,\n    getLastIdleTime: he,\n    getTotalIdleTime: me,\n    getLastActiveTime: pe,\n    getTotalActiveTime: fe,\n    getElapsedTime: de,\n    getRemainingTime: le\n  };\n}\n\nG.propTypes = {\n  timeout: l.number,\n  events: l.arrayOf(l.string),\n  onIdle: l.func,\n  onActive: l.func,\n  onAction: l.func,\n  debounce: l.number,\n  throttle: l.number,\n  eventsThrottle: l.number,\n  element: l.oneOfType([l.object, l.element]),\n  startOnMount: l.bool,\n  startManually: l.bool,\n  stopOnIdle: l.bool,\n  passive: l.bool,\n  capture: l.bool,\n  crossTab: l.oneOfType([l.bool, l.shape({\n    type: l.oneOf([\"broadcastChannel\", \"localStorage\", \"simulate\"]),\n    channelName: l.string,\n    fallbackInterval: l.number,\n    responseTime: l.number,\n    removeTimeout: l.number,\n    emitOnAllTabs: l.bool\n  })])\n}, G.defaultProps = {\n  timeout: 12e5,\n  element: v,\n  events: g,\n  onIdle: function onIdle() {},\n  onActive: function onActive() {},\n  onAction: function onAction() {},\n  debounce: 0,\n  throttle: 0,\n  eventsThrottle: 200,\n  startOnMount: !0,\n  startManually: !1,\n  stopOnIdle: !1,\n  capture: !0,\n  passive: !0,\n  crossTab: !1\n}, W.propTypes = {\n  timeout: l.number,\n  events: l.arrayOf(l.string),\n  onIdle: l.func,\n  onActive: l.func,\n  onAction: l.func,\n  debounce: l.number,\n  throttle: l.number,\n  eventsThrottle: l.number,\n  element: l.oneOfType([l.object, l.element]),\n  startOnMount: l.bool,\n  startManually: l.bool,\n  stopOnIdle: l.bool,\n  passive: l.bool,\n  capture: l.bool,\n  crossTab: l.oneOfType([l.bool, l.shape({\n    type: l.oneOf([\"broadcastChannel\", \"localStorage\", \"simulate\"]),\n    channelName: l.string,\n    fallbackInterval: l.number,\n    responseTime: l.number,\n    removeTimeout: l.number,\n    emitOnAllTabs: l.bool\n  })])\n}, W.defaultProps = {\n  timeout: 12e5,\n  element: v,\n  events: g,\n  onIdle: function onIdle() {},\n  onActive: function onActive() {},\n  onAction: function onAction() {},\n  debounce: 0,\n  throttle: 0,\n  eventsThrottle: 200,\n  startOnMount: !0,\n  startManually: !1,\n  stopOnIdle: !1,\n  capture: !0,\n  passive: !0,\n  crossTab: !1\n};\nexport default G;\nexport { W as useIdleTimer };","map":{"version":3,"mappings":"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","names":["IS_BROWSER","window","p","DEFAULT_ELEMENT","document","DEFAULT_EVENTS","debounced","fn","delay","timerId","result","args","clearTimeout","setTimeout","cancel","throttled","lastCall","now","Date","getTime","lastMs","additional","microSeconds","ms","randomToken","Math","random","toString","substring","sleep","time","Promise","resolve","create","channelName","state","messagesCallback","bc","BroadcastChannel","onmessage","msg","data","close","channelState","onMessage","postMessage","messageJson","err","reject","canBeUsed","type","averageResponseTime","ObliviousSet","ttl","e","set","Set","timeMap","Map","value","this","has","add","_removeTooOldValues","clear","olderThen","iterator","Symbol","next","get","getLocalStorage","localStorage","addStorageEventListener","key","listener","ev","JSON","parse","newValue","addEventListener","ls","setItem","removeItem","options","Error","uuid","eMIs","removeTimeout","msgObj","token","messagesCallbackTime","removeEventListener","writeObj","stringify","createEvent","initEvent","dispatchEvent","userAgent","navigator","toLowerCase","includes","defaultTime","SIMULATE_CHANNELS","name","Array","from","filter","channel","forEach","METHODS","BroadcastChannelMethod","LocalStorageMethod","chooseMethod","SimulateMethod","method","find","m","useMethod","map","MessageChannel","closed","_isListening","_onMessageListener","_addEventListeners","message","internal","_unSendMessagePromises","_beforeClose","_preparePromises","_prepareChannel","_post","listenObj","_removeListenerObject","_addListenerObject","obj","awaitPrepare","then","all","_this","_state","messageChannel","sendPromise","maybePromise","s","_hasMessageListeners","length","push","listenerFn","_startListening","o","_stopListening","LeaderElection","_channel","_options","isLeader","isDead","_isApplying","_reApply","_unloadFns","_listeners","_intervals","_duplicateListeners","_duplicateCalled","_onBeforeDie","unloadFn","die","stopCriteria","handleMessage","context","_this2","action","_sendMessage","responseTime","leaderElector","isLeaderListener","beLeader","catch","success","applyOnce","_awaitLeadershipPromise","resolved","finish","clearInterval","interval","whenDeathListener","setInterval","fallbackInterval","onBeforeDie","_this3","uFn","n","msgJson","postInternal","TabManager","emitOnAllTabs","callbacks","start","reset","pause","resume","elector","_leaderElector","createLeaderElection","registry","leader","allIdle","awaitLeadership","id","idle","active","onIdle","onActive","isIdle","Object","values","every","v","send","isActive","some","onDuplicate","isAllIdle","setAllIdle","bool","IdleTimer","Component","props","oldDate","lastActive","lastIdle","idleTime","remaining","pageX","pageY","r","tId","eventsBound","callbackRefs","debounce","throttle","_onAction","onAction","eventsThrottle","handleEvent","_handleEvent","bind","startOnMount","startManually","_toggleIdleState","getRemainingTime","getElapsedTime","getLastActiveTime","getLastIdleTime","getTotalIdleTime","getTotalActiveTime","_setupTabManager","_bindEvents","prevProps","_unbindEvents","timeout","manager","console","error","children","crossTab","assign","element","events","passive","capture","force","setState","prevState","_this4","stopOnIdle","elapsedTimeSinceLastActive","remote","timeLeft","useIdleTimer","t","l","y","k","I","L","M","useRef","firstLoad","_timeout","emitOnIdle","emitOnActive","emitOnAction","useEffect","current","intermediateOnAction","useMemo","callOnAction","nextIdle","eventsWereBound","propTypes","PropTypes","number","arrayOf","string","func","oneOfType","object","shape","oneOf","defaultProps"],"sources":["../src/utils.js","../src/MessageChannel/methods/broadcastChannel.js","../src/MessageChannel/ObliviousSet.js","../src/MessageChannel/methods/localStorage.js","../src/MessageChannel/methods/simulate.js","../src/MessageChannel/methodChooser.js","../src/MessageChannel/MessageChannel.js","../src/MessageChannel/leaderElection.js","../src/TabManager.js","../src/IdleTimer.js","../src/useIdleTimer.js"],"sourcesContent":["/**\n * Determine if we are in a browser\n * or a server environment\n * @type {Boolean}\n * @private\n */\nexport const IS_BROWSER =\n  (typeof window === 'undefined' ? 'undefined' : typeof window) === 'object'\n\n/**\n * Default element to listen for events on\n * @type {Object}\n * @private\n */\nexport const DEFAULT_ELEMENT = IS_BROWSER ? document : {}\n\n/**\n * The default events to determine activity\n * @type {Array}\n * @private\n */\nexport const DEFAULT_EVENTS = [\n  'mousemove',\n  'keydown',\n  'wheel',\n  'DOMMouseScroll',\n  'mousewheel',\n  'mousedown',\n  'touchstart',\n  'touchmove',\n  'MSPointerDown',\n  'MSPointerMove',\n  'visibilitychange'\n]\n\n/**\n * Creates a debounced function that delays invoking func until\n * after delay milliseconds has elapsed since the last time the\n * debounced function was invoked.\n * @name debounced\n * @param  {Function} fn   Function to debounce\n * @param  {Number} delay  How long to wait\n * @return {Function}      Executed Function\n * @private\n **/\nexport function debounced (fn, delay) {\n  let timerId\n  function result (...args) {\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n    timerId = setTimeout(() => {\n      fn(...args)\n      timerId = null\n    }, delay)\n  }\n\n  result.cancel = function () {\n    clearTimeout(timerId)\n  }\n\n  return result\n}\n\n/**\n * Creates a throttled function that only invokes func at most\n * once per every wait milliseconds.\n * @name throttled\n * @param  {Function} fn   Function to debounce\n * @param  {Number} delay  How long to wait\n * @return {Function}      Executed Function\n * @private\n **/\nexport function throttled (fn, delay) {\n  let lastCall = 0\n  return function (...args) {\n    const now = new Date().getTime()\n    if (now - lastCall < delay) {\n      return\n    }\n    lastCall = now\n    return fn(...args)\n  }\n}\n\nlet lastMs = 0\nlet additional = 0\n\n/**\n * Returns current time in microseconds.\n *\n * @returns {Number} current time in microseconds\n * @private\n */\nexport function microSeconds () {\n  const ms = new Date().getTime()\n  if (ms === lastMs) {\n    additional++\n    return ms * 1000 + additional\n  } else {\n    lastMs = ms\n    additional = 0\n    return ms * 1000\n  }\n}\n\n/**\n * Generate and return a random token.\n *\n * @returns {String} Random token.\n * @private\n */\nexport function randomToken () {\n  return Math.random().toString(36).substring(2)\n}\n\n/**\n * Checks if a js object is a promise.\n *\n * @param {*} obj  Any javascript object.\n * @returns {Boolean} Wether or not this object is a promise.\n */\nexport function isPromise (obj) {\n  if (obj && typeof obj.then === 'function') {\n    /* istanbul ignore next */\n    return true\n  } else {\n    return false\n  }\n}\n\n/**\n * Sleeps for x amount of milliseconds.\n *\n * @param {Number} time   Amount of time in milliseconds.\n * @returns {Promise}\n * @private\n */\nexport function sleep (time = 0) {\n  return new Promise(resolve => setTimeout(resolve, time))\n}\n\n/**\n * Get the current timestamp.\n *\n * @returns {Number}\n * @private\n */\nexport function now () {\n  return new Date().getTime()\n}\n\n/**\n * Waits until the given function returns true\n * @param  {function}  fn\n * @return {Promise}\n */\nexport function waitUntil (fn, timeout = 0, interval = 20) {\n  let timedOut = false\n  let ok = false\n\n  /* istanbul ignore next */\n  if (timeout !== 0) {\n    sleep(timeout).then(() => {\n      timedOut = true\n    })\n  }\n\n  return new Promise((resolve, reject) => {\n    const runLoop = () => {\n      if (ok) {\n        resolve()\n        return\n      }\n      /* istanbul ignore next */\n      if (timedOut) {\n        reject(new Error(`❌ waitUntil reached timeout of ${timeout}ms`))\n        return\n      }\n      sleep(interval).then(() => {\n        ok = fn()\n        runLoop()\n      })\n    }\n    runLoop()\n  })\n}\n","/* eslint-env browser */\nimport { microSeconds } from '../../utils'\n\nexport const type = 'broadcastChannel'\n\nexport function create (channelName) {\n  const state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName)\n  }\n\n  state.bc.onmessage = msg => {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data)\n    }\n  }\n\n  return state\n}\n\nexport function close (channelState) {\n  channelState.bc.close()\n}\n\nexport function postMessage (channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false)\n    return Promise.resolve()\n  } catch (err) {\n    /* istanbul ignore next */\n    return Promise.reject(err)\n  }\n}\n\nexport function onMessage (channelState, fn) {\n  channelState.messagesCallback = fn\n}\n\nexport function canBeUsed () {\n  if (typeof BroadcastChannel === 'function') {\n    return true\n  } else {\n    /* istanbul ignore next */\n    return false\n  }\n}\n\nexport function averageResponseTime () {\n  return 150\n}\n\nexport default {\n  create,\n  close,\n  onMessage,\n  postMessage,\n  canBeUsed,\n  type,\n  averageResponseTime,\n  microSeconds\n}\n","import { now } from '../utils'\n\nexport default class ObliviousSet {\n  constructor (ttl = 1000 * 60) {\n    this.ttl = ttl\n    this.set = new Set()\n    this.timeMap = new Map()\n  }\n\n  has (value) {\n    return this.set.has(value)\n  }\n\n  add (value) {\n    this.timeMap.set(value, now())\n    this.set.add(value)\n    this._removeTooOldValues()\n  }\n\n  clear () {\n    this.set.clear()\n    this.timeMap.clear()\n  }\n\n  _removeTooOldValues () {\n    const olderThen = now() - this.ttl\n    const iterator = this.set[Symbol.iterator]()\n\n    while (true) {\n      const value = iterator.next().value\n      if (!value) return // no more elements\n      const time = this.timeMap.get(value)\n      if (time < olderThen) {\n        this.timeMap.delete(value)\n        this.set.delete(value)\n      } else {\n        // We reached a value that is not old enough\n        return\n      }\n    }\n  }\n}\n","import ObliviousSet from '../ObliviousSet'\n\nimport {\n  randomToken,\n  microSeconds\n} from '../../utils'\n\nexport const type = 'localStorage'\n\n/**\n * Returns local storage instance\n */\nexport function getLocalStorage () {\n  let localStorage\n  if (typeof window === 'undefined') return null\n  try {\n    localStorage = window.localStorage\n    localStorage = window['ie8-eventlistener/storage'] || window.localStorage\n  } catch (e) {\n    // New versions of Firefox throw a Security exception\n    // if cookies are disabled. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\n  }\n  return localStorage\n}\n\nexport function storageKey (channelName) {\n  return channelName\n}\n\n/**\n* writes the new message to the storage\n* and fires the storage-event so other readers can find it\n*/\nexport function postMessage (channelState, messageJson) {\n  return new Promise(resolve => {\n    const key = storageKey(channelState.channelName)\n    const writeObj = {\n      token: randomToken(),\n      time: new Date().getTime(),\n      data: messageJson,\n      uuid: channelState.uuid\n    }\n    const value = JSON.stringify(writeObj)\n    getLocalStorage().setItem(key, value)\n\n    /**\n       * StorageEvent does not fire the 'storage' event\n       * in the window that changes the state of the local storage.\n       * So we fire it manually\n       */\n    const ev = document.createEvent('Event')\n    ev.initEvent('storage', true, true)\n    ev.key = key\n    ev.newValue = value\n    window.dispatchEvent(ev)\n\n    resolve()\n  })\n}\n\nexport function addStorageEventListener (channelName, fn) {\n  const key = storageKey(channelName)\n  const listener = ev => {\n    if (ev.key === key) {\n      fn(JSON.parse(ev.newValue))\n    }\n  }\n  window.addEventListener('storage', listener)\n  return listener\n}\nexport function removeStorageEventListener (listener) {\n  window.removeEventListener('storage', listener)\n}\n\nexport function create (channelName, options = {}) {\n  if (!canBeUsed()) {\n    /* istanbul ignore next */\n    throw new Error('❌ localStorage cannot be used.')\n  }\n\n  const uuid = randomToken()\n\n  /**\n     * eMIs\n     * contains all messages that have been emitted before\n     * @type {ObliviousSet}\n     */\n  const eMIs = new ObliviousSet(options.removeTimeout)\n\n  const state = {\n    channelName,\n    uuid,\n    eMIs // emittedMessagesIds\n  }\n\n  state.listener = addStorageEventListener(\n    channelName,\n    (msgObj) => {\n      if (!state.messagesCallback) return // no listener\n      if (msgObj.uuid === uuid) return // own message\n      if (!msgObj.token || eMIs.has(msgObj.token)) return // already emitted\n      if (msgObj.data.time && msgObj.data.time < state.messagesCallbackTime) return // too old\n\n      eMIs.add(msgObj.token)\n      state.messagesCallback(msgObj.data)\n    }\n  )\n\n  return state\n}\n\nexport function close (channelState) {\n  removeStorageEventListener(channelState.listener)\n}\n\nexport function onMessage (channelState, fn, time) {\n  channelState.messagesCallbackTime = time\n  channelState.messagesCallback = fn\n}\n\nexport function canBeUsed () {\n  const ls = getLocalStorage()\n\n  if (!ls) return false\n\n  try {\n    const key = '__check'\n    ls.setItem(key, 'works')\n    ls.removeItem(key)\n  } catch (e) {\n    // Safari 10 in private mode will not allow write access to local\n    // storage and fail with a QuotaExceededError. See\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API#Private_Browsing_Incognito_modes\n\n    /* istanbul ignore next */\n    return false\n  }\n\n  return true\n}\n\n/* istanbul ignore next */\nexport function averageResponseTime () {\n  const defaultTime = 120\n  const userAgent = navigator.userAgent.toLowerCase()\n  if (userAgent.includes('safari') && !userAgent.includes('chrome')) {\n    // safari is much slower so this time is higher\n    return defaultTime * 2\n  }\n  return defaultTime\n}\n\nexport default {\n  create,\n  close,\n  onMessage,\n  postMessage,\n  canBeUsed,\n  type,\n  averageResponseTime,\n  microSeconds\n}\n","import { microSeconds } from '../../utils'\n\nexport const type = 'simulate'\n\nconst SIMULATE_CHANNELS = new Set()\n\nexport function create (channelName) {\n  const state = {\n    name: channelName,\n    messagesCallback: null\n  }\n  SIMULATE_CHANNELS.add(state)\n\n  return state\n}\n\nexport function close (channelState) {\n  SIMULATE_CHANNELS.delete(channelState)\n}\n\nexport function postMessage (channelState, messageJson) {\n  return new Promise(resolve => setTimeout(() => {\n    const channelArray = Array.from(SIMULATE_CHANNELS)\n    channelArray\n      .filter(channel => channel.name === channelState.name)\n      .filter(channel => channel !== channelState)\n      .filter(channel => !!channel.messagesCallback)\n      .forEach(channel => channel.messagesCallback(messageJson))\n    resolve()\n  }, 5))\n}\n\nexport function onMessage (channelState, fn) {\n  channelState.messagesCallback = fn\n}\n\n/* istanbul ignore next */\nexport function canBeUsed () {\n  return true\n}\n\n/* istanbul ignore next */\nexport function averageResponseTime () {\n  return 5\n}\n\nexport default {\n  create,\n  close,\n  onMessage,\n  postMessage,\n  canBeUsed,\n  type,\n  averageResponseTime,\n  microSeconds\n}\n","import BroadcastChannelMethod from './methods/broadcastChannel'\nimport LocalStorageMethod from './methods/localStorage'\nimport SimulateMethod from './methods/simulate'\n\n// Order is important\nconst METHODS = [\n  BroadcastChannelMethod,\n  LocalStorageMethod\n]\n\nexport function chooseMethod (options = {}) {\n  if (options.type) {\n    // For testing\n    if (options.type === 'simulate') {\n      return SimulateMethod\n    }\n\n    // Chosen type\n    const method = METHODS.find(m => m.type === options.type)\n    if (!method) throw new Error(`❌ Method ${options.type} is not supported.`)\n    else return method\n  }\n\n  const useMethod = METHODS.find(method => method.canBeUsed())\n\n  /* istanbul ignore next */\n  if (!useMethod) {\n    throw new Error(`❌ No method found ${JSON.stringify(METHODS.map(m => m.type))}`)\n  }\n  return useMethod\n}\n","import { chooseMethod } from './methodChooser'\nimport { isPromise } from '../utils'\n\nexport class MessageChannel {\n  constructor (name, options = {}) {\n    this.name = name\n    this.options = options\n    this.method = chooseMethod(this.options)\n    this.closed = false\n\n    // isListening\n    this._isListening = false\n\n    /**\n     * _onMessageListener\n     * setting onmessage twice,\n     * will overwrite the first listener\n     */\n    this._onMessageListener = null\n\n    /**\n     * _addEventListeners\n     */\n    this._addEventListeners = {\n      message: [],\n      internal: []\n    }\n\n    /**\n     * Un send message promises\n     * where the sending is still in progress\n     * @type {Set<Promise>}\n     */\n    this._unSendMessagePromises = new Set()\n\n    /**\n     * _beforeClose\n     * array of promises that will be awaited\n     * before the channel is closed\n     */\n    this._beforeClose = []\n\n    /**\n     * _preparePromise\n     */\n    this._preparePromises = null\n    _prepareChannel(this)\n  }\n\n  postMessage (msg) {\n    if (this.closed) {\n      throw new Error(\n        '❌ Cannot post message after channel has closed'\n      )\n    }\n    return _post(this, 'message', msg)\n  }\n\n  postInternal (msg) {\n    return _post(this, 'internal', msg)\n  }\n\n  set onmessage (fn) {\n    const time = this.method.microSeconds()\n    const listenObj = {\n      time,\n      fn\n    }\n    _removeListenerObject(this, 'message', this._onMessageListener)\n    if (fn && typeof fn === 'function') {\n      this._onMessageListener = listenObj\n      _addListenerObject(this, 'message', listenObj)\n    } else {\n      /* istanbul ignore next */\n      this._onMessageListener = null\n    }\n  }\n\n  /* istanbul ignore next */\n  get onmessage () {\n    return this._onMessageListener\n  }\n\n  addEventListener (type, fn) {\n    const time = this.method.microSeconds()\n    const listenObj = {\n      time,\n      fn\n    }\n    _addListenerObject(this, type, listenObj)\n  }\n\n  removeEventListener (type, fn) {\n    const obj = this._addEventListeners[type].find(obj => obj.fn === fn)\n    _removeListenerObject(this, type, obj)\n  }\n\n  close () {\n    if (this.closed) {\n      return\n    }\n    this.closed = true\n    const awaitPrepare = this._preparePromises ? this._preparePromises : Promise.resolve()\n\n    this._onMessageListener = null\n    this._addEventListeners.message = []\n\n    return awaitPrepare\n      // Wait until all current sending are processed\n      .then(() => Promise.all(Array.from(this._unSendMessagePromises)))\n      // Run before-close hooks\n      .then(() => Promise.all(this._beforeClose.map(fn => fn())))\n      // Close the channel\n      .then(() => this.method.close(this._state))\n  }\n\n  get type () {\n    return this.method.type\n  }\n\n  isClosed () {\n    return this.closed\n  }\n}\n\nfunction _post (messageChannel, type, msg) {\n  const time = messageChannel.method.microSeconds()\n  const msgObj = {\n    time,\n    type,\n    data: msg\n  }\n\n  const awaitPrepare = messageChannel._preparePromises ? messageChannel._preparePromises : Promise.resolve()\n  return awaitPrepare.then(() => {\n    const sendPromise = messageChannel.method.postMessage(\n      messageChannel._state,\n      msgObj\n    )\n\n    // add/remove to un-send messages list\n    messageChannel._unSendMessagePromises.add(sendPromise)\n    sendPromise\n      .catch()\n      .then(() => messageChannel._unSendMessagePromises.delete(sendPromise))\n\n    return sendPromise\n  })\n}\n\nfunction _prepareChannel (channel) {\n  const maybePromise = channel.method.create(channel.name, channel.options)\n  /* istanbul ignore next */\n  if (isPromise(maybePromise)) {\n    channel._preparePromises = maybePromise\n    maybePromise.then(s => {\n      channel._state = s\n    })\n  } else {\n    channel._state = maybePromise\n  }\n}\n\nfunction _hasMessageListeners (channel) {\n  if (channel._addEventListeners.message.length > 0) return true\n  if (channel._addEventListeners.internal.length > 0) return true\n  return false\n}\n\nfunction _addListenerObject (channel, type, obj) {\n  channel._addEventListeners[type].push(obj)\n  _startListening(channel)\n}\n\nfunction _removeListenerObject (channel, type, obj) {\n  channel._addEventListeners[type] = channel._addEventListeners[type].filter(o => o !== obj)\n  _stopListening(channel)\n}\n\nfunction _startListening (channel) {\n  if (!channel._isListening && _hasMessageListeners(channel)) {\n    // someone is listening, start subscribing\n\n    const listenerFn = msgObj => {\n      channel._addEventListeners[msgObj.type].forEach(obj => {\n        if (msgObj.time >= obj.time) {\n          obj.fn(msgObj.data)\n        }\n      })\n    }\n\n    const time = channel.method.microSeconds()\n    if (channel._preparePromises) {\n      /* istanbul ignore next */\n      channel._preparePromises.then(() => {\n        channel._isListening = true\n        channel.method.onMessage(\n          channel._state,\n          listenerFn,\n          time\n        )\n      })\n    } else {\n      channel._isListening = true\n      channel.method.onMessage(\n        channel._state,\n        listenerFn,\n        time\n      )\n    }\n  }\n}\n\nfunction _stopListening (channel) {\n  if (channel._isListening && !_hasMessageListeners(channel)) {\n    // no one is listening, stop subscribing\n    channel._isListening = false\n    const time = channel.method.microSeconds()\n    channel.method.onMessage(\n      channel._state,\n      null,\n      time\n    )\n  }\n}\n","import { IS_BROWSER, sleep, randomToken } from '../utils'\n\nclass LeaderElection {\n  constructor (channel, options) {\n    this._channel = channel\n    this._options = options\n\n    this.isLeader = false\n    this.isDead = false\n    this.token = randomToken()\n\n    this._isApplying = false\n    this._reApply = false\n\n    // things to clean up\n    this._unloadFns = []\n    this._listeners = []\n    this._intervals = []\n    this._duplicateListeners = () => { }\n    this._duplicateCalled = false\n    this._onBeforeDie = async () => {}\n\n    const unloadFn = async () => this.die()\n\n    if (IS_BROWSER) {\n      window.addEventListener('beforeUnload', unloadFn)\n      window.addEventListener('unload', unloadFn)\n\n      this._unloadFns.push(['beforeUnload', unloadFn])\n      this._unloadFns.push(['unload', unloadFn])\n    }\n  }\n\n  applyOnce () {\n    if (this.isLeader) return Promise.resolve(false)\n    if (this.isDead) return Promise.resolve(false)\n\n    // do nothing if already running\n    if (this._isApplying) {\n      this._reApply = true\n      return Promise.resolve(false)\n    }\n    this._isApplying = true\n\n    let stopCriteria = false\n    const received = []\n\n    const handleMessage = (msg) => {\n      if (msg.context === 'leader' && msg.token !== this.token) {\n        received.push(msg)\n\n        if (msg.action === 'apply') {\n          // Other is applying\n          if (msg.token > this.token) {\n            // Other has higher token, stop applying\n            stopCriteria = true\n          }\n        }\n\n        if (msg.action === 'tell') {\n          // Other is already leader\n          stopCriteria = true\n        }\n      }\n    }\n    this._channel.addEventListener('internal', handleMessage)\n\n    return _sendMessage(this, 'apply') // send out that this one is applying\n      .then(() => sleep(this._options.responseTime)) // let others time to respond\n      .then(() => {\n        if (stopCriteria) return Promise.reject(new Error())\n        else return _sendMessage(this, 'apply')\n      })\n      .then(() => sleep(this._options.responseTime)) // let others time to respond\n      .then(() => {\n        if (stopCriteria) return Promise.reject(new Error())\n        else return _sendMessage(this)\n      })\n      .then(() => beLeader(this)) // no one disagreed -> this one is now leader\n      .then(() => true)\n      .catch(() => false) // apply not successful\n      .then(success => {\n        this._channel.removeEventListener('internal', handleMessage)\n        this._isApplying = false\n        if (!success && this._reApply) {\n          this._reApply = false\n          return this.applyOnce()\n        } else return success\n      })\n  }\n\n  awaitLeadership () {\n    if (\n      !this._awaitLeadershipPromise\n    ) {\n      this._awaitLeadershipPromise = _awaitLeadershipOnce(this)\n    }\n    return this._awaitLeadershipPromise\n  }\n\n  set onDuplicate (fn) {\n    this._duplicateListeners = fn\n  }\n\n  /* istanbul ignore next */\n  get onDuplicate () {\n    return this._duplicateListeners\n  }\n\n  set onBeforeDie (fn) {\n    this._onBeforeDie = fn\n  }\n\n  /* istanbul ignore next */\n  get onBeforeDie () {\n    return this._onBeforeDie\n  }\n\n  async die () {\n    if (this.isDead) return\n    this.isDead = true\n\n    await this.onBeforeDie()\n    this._listeners.forEach(listener => this._channel.removeEventListener('internal', listener))\n    this._intervals.forEach(interval => clearInterval(interval))\n    this._unloadFns.forEach(uFn => {\n      if (IS_BROWSER) {\n        window.removeEventListener(uFn[0], uFn[1])\n      }\n    })\n    return _sendMessage(this, 'death')\n  }\n}\n\nfunction _awaitLeadershipOnce (leaderElector) {\n  if (leaderElector.isLeader) return Promise.resolve()\n\n  return new Promise(resolve => {\n    let resolved = false\n\n    function finish () {\n      /* istanbul ignore next */\n      if (resolved) {\n        return\n      }\n      resolved = true\n      clearInterval(interval)\n      leaderElector._channel.removeEventListener('internal', whenDeathListener)\n      resolve(true)\n    }\n\n    // try once now\n    leaderElector.applyOnce().then(() => {\n      if (leaderElector.isLeader) {\n        finish()\n      }\n    })\n\n    // try on fallbackInterval\n    const interval = setInterval(() => {\n      /* istanbul ignore next */\n      leaderElector.applyOnce().then(() => {\n        if (leaderElector.isLeader) {\n          finish()\n        }\n      })\n    }, leaderElector._options.fallbackInterval)\n    leaderElector._intervals.push(interval)\n\n    // try when other leader dies\n    const whenDeathListener = msg => {\n      if (msg.context === 'leader' && msg.action === 'death') {\n        leaderElector.applyOnce().then(() => {\n          if (leaderElector.isLeader) finish()\n        })\n      }\n    }\n    leaderElector._channel.addEventListener('internal', whenDeathListener)\n    leaderElector._listeners.push(whenDeathListener)\n  })\n}\n\n/**\n * Sends and internal message over the broadcast-channel\n */\nfunction _sendMessage (leaderElector, action) {\n  const msgJson = {\n    context: 'leader',\n    action,\n    token: leaderElector.token\n  }\n  return leaderElector._channel.postInternal(msgJson)\n}\n\nexport function beLeader (leaderElector) {\n  leaderElector.isLeader = true\n\n  const isLeaderListener = msg => {\n    if (msg.context === 'leader' && msg.action === 'apply') {\n      _sendMessage(leaderElector, 'tell')\n    }\n\n    if (msg.context === 'leader' && msg.action === 'tell' && !leaderElector._duplicateCalled) {\n      /**\n       * Another instance is also leader!\n       * This can happen on rare events\n       * like when the CPU is at 100% for long time\n       * or the tabs are open very long and the browser throttles them.\n       */\n      leaderElector._duplicateCalled = true\n      leaderElector._duplicateListeners() // message the lib user so the app can handle the problem\n      _sendMessage(leaderElector, 'tell') // ensure other leader also knows the problem\n    }\n  }\n  leaderElector._channel.addEventListener('internal', isLeaderListener)\n  leaderElector._listeners.push(isLeaderListener)\n  return _sendMessage(leaderElector, 'tell')\n}\n\nexport function createLeaderElection (channel, options) {\n  if (channel._leaderElector) {\n    throw new Error('❌ MessageChannel already has a leader-elector')\n  }\n\n  const elector = new LeaderElection(channel, options)\n  channel._beforeClose.push(async () => elector.die())\n\n  channel._leaderElector = elector\n  return elector\n}\n","import { MessageChannel, createLeaderElection } from './MessageChannel'\nexport const TabManager = ({\n  type,\n  channelName,\n  fallbackInterval,\n  responseTime,\n  emitOnAllTabs,\n  callbacks,\n  start,\n  reset,\n  pause,\n  resume\n}) => {\n  const channel = new MessageChannel(channelName, { type })\n  const elector = createLeaderElection(channel, { fallbackInterval, responseTime })\n  const registry = {}\n\n  // Register self\n  registry[elector.token] = false\n\n  let leader = false\n  let allIdle = true\n\n  const isLeader = () => leader\n\n  elector.awaitLeadership().then(() => {\n    leader = true\n  })\n\n  channel.addEventListener('message', ([type, id]) => {\n    switch (type) {\n      case 'register':\n        registry[id] = false\n        break\n      case 'deregister':\n        delete registry[id]\n        break\n      case 'idle':\n        idle(id)\n        break\n      case 'active':\n        active(id)\n        break\n      case 'emitIdle':\n        callbacks.onIdle()\n        break\n      case 'emitActive':\n        callbacks.onActive()\n        break\n      case 'start':\n        start(true)\n        break\n      case 'reset':\n        reset(true)\n        break\n      case 'pause':\n        pause(true)\n        break\n      case 'resume':\n        resume(true)\n        break\n      default:\n        // no op\n    }\n  })\n\n  const setAllIdle = bool => {\n    allIdle = bool\n  }\n\n  const isAllIdle = () => allIdle\n\n  const idle = (id = elector.token) => {\n    registry[id] = true\n    const isIdle = Object.values(registry).every(v => v)\n    if (!allIdle && isIdle) {\n      allIdle = true\n      if (isLeader()) {\n        callbacks.onIdle()\n        if (emitOnAllTabs) send('emitIdle')\n      } else {\n        send('idle')\n      }\n    }\n  }\n\n  const active = (id = elector.token) => {\n    registry[id] = false\n    const isActive = Object.values(registry).some(v => !v)\n    if (allIdle && isActive) {\n      allIdle = false\n      if (isLeader()) {\n        callbacks.onActive()\n        if (emitOnAllTabs) send('emitActive')\n      } else {\n        send('active')\n      }\n    }\n  }\n\n  /* istanbul ignore next */\n  elector.onDuplicate = async () => await elector.die()\n  elector.onBeforeDie = async () => await send('deregister')\n\n  const send = async message => channel.postMessage([message, elector.token])\n\n  const close = async () => {\n    await elector.die()\n    await channel.close()\n  }\n\n  // Register self with remote tabs\n  send('register')\n\n  return { close, send, isLeader, idle, active, isAllIdle, setAllIdle }\n}\n","/**\n *  ___    _ _     _____ _\n * |_ _|__| | | __|_   _(_)_ __ ___   ___ _ __\n *  | |/ _` | |/ _ \\| | | | '_ ` _ \\ / _ \\ '__|\n *  | | (_| | |  __/| | | | | | | | |  __/ |\n * |___\\__,_|_|\\___||_| |_|_| |_| |_|\\___|_|\n *\n * @name IdleTimer\n * @author Randy Lebeau\n * @private\n */\n\nimport { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TabManager } from './TabManager'\nimport { IS_BROWSER, DEFAULT_ELEMENT, DEFAULT_EVENTS, debounced, throttled } from './utils'\n\n/**\n * Detects when your user is idle\n * @class IdleTimer\n * @private\n */\nclass IdleTimer extends Component {\n  /**\n   * Creates an instance of IdleTimer\n   * bind all of our internal events here\n   * for best performance\n   * @param {Object} props\n   * @return {IdleTimer}\n   * @private\n   */\n  constructor (props) {\n    super(props)\n\n    /**\n     * Sets initial component state\n     * @type {Object}\n     * @private\n     */\n    this.state = {\n      idle: false,\n      oldDate: +new Date(),\n      lastActive: +new Date(),\n      lastIdle: null,\n      idleTime: 0,\n      remaining: null,\n      pageX: null,\n      pageY: null\n    }\n\n    /**\n     * The timer instance\n     * @type {Timeout}\n     * @private\n     */\n    this.tId = null\n\n    /**\n     * Wether or not events are bound\n     * @type {boolean}\n     * @private\n     */\n    this.eventsBound = false\n\n    this.callbackRefs = {}\n\n    // Debounce and throttle can't both be set\n    if (props.debounce > 0 && props.throttle > 0) {\n      throw new Error('onAction can either be throttled or debounced (not both)')\n    }\n\n    // Create debounced action if applicable\n    if (props.debounce > 0) {\n      this._onAction = debounced(props.onAction, props.debounce)\n\n    // Create throttled action if applicable\n    } else if (props.throttle > 0) {\n      this._onAction = throttled(props.onAction, props.throttle)\n\n    // Set custom onAction\n    } else {\n      this._onAction = props.onAction\n    }\n\n    // Create a throttle event handler if applicable\n    if (props.eventsThrottle > 0) {\n      this.handleEvent = throttled(this._handleEvent.bind(this), props.eventsThrottle)\n    } else {\n      this.handleEvent = this._handleEvent.bind(this)\n    }\n\n    // If startOnMount is set, idle state defaults to true\n    if (!props.startOnMount || props.startManually) {\n      this.state.idle = true\n    }\n\n    // Bind all events to component scope, built for speed 🚀\n    this._toggleIdleState = this._toggleIdleState.bind(this)\n    this.start = this.start.bind(this)\n    this.reset = this.reset.bind(this)\n    this.pause = this.pause.bind(this)\n    this.resume = this.resume.bind(this)\n    this.isIdle = this.isIdle.bind(this)\n    this.getRemainingTime = this.getRemainingTime.bind(this)\n    this.getElapsedTime = this.getElapsedTime.bind(this)\n    this.getLastActiveTime = this.getLastActiveTime.bind(this)\n    this.getLastIdleTime = this.getLastIdleTime.bind(this)\n    this.getTotalIdleTime = this.getTotalIdleTime.bind(this)\n    this.getTotalActiveTime = this.getTotalActiveTime.bind(this)\n  }\n\n  /**\n   * Runs once the component has mounted\n   * here we handle automatically starting\n   * the idletimer\n   * @private\n   */\n  componentDidMount () {\n    const { startOnMount, startManually } = this.props\n\n    // Set up cross tab\n    this._setupTabManager()\n\n    if (startManually) return\n    if (startOnMount) {\n      this.start()\n    } else {\n      this._bindEvents()\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    // Update debounce function\n    if ((prevProps.debounce !== this.props.debounce) && this.props.debounce > 0) {\n      if (this._onAction.cancel) this._onAction.cancel()\n      this._onAction = debounced(this.props.onAction, this.props.debounce)\n    } else\n    // Update throttle function\n    if ((prevProps.throttle !== this.props.throttle) && this.props.throttle > 0) {\n      if (this._onAction.cancel) this._onAction.cancel()\n      this._onAction = throttled(this.props.onAction, this.props.throttle)\n    } else\n    // Remove throttle or debounce\n    if (\n      (prevProps.throttle && this.props.throttle === 0) ||\n      (prevProps.debounce && this.props.debounce === 0)\n    ) {\n      if (this._onAction.cancel) this._onAction.cancel()\n      this._onAction = this.props.onAction\n    }\n\n    // Update event throttle function\n    if (prevProps.eventsThrottle !== this.props.eventsThrottle) {\n      this._unbindEvents()\n      this.handleEvent = throttled(this._handleEvent.bind(this), this.props.eventsThrottle)\n      this._bindEvents()\n    }\n    // Update timeout value\n    if (prevProps.timeout !== this.props.timeout) {\n      if (this.state.idle) this.reset()\n    }\n\n    // Update callback refs\n    if (prevProps.onActive !== this.props.onActive) this.callbackRefs.onActive = this.props.onActive\n    if (prevProps.onIdle !== this.props.onIdle) this.callbackRefs.onIdle = this.props.onIdle\n  }\n\n  /**\n   * Called before the component un-mounts\n   * here we clear the timer and remove\n   * all the event listeners\n   * @private\n   */\n  componentWillUnmount () {\n    // Clear timeout to prevent delayed state changes\n    clearTimeout(this.tId)\n    this._unbindEvents(true)\n    // Cancel any debounced onAction handlers\n    if (this._onAction.cancel) this._onAction.cancel()\n    /* istanbul ignore next */\n    if (this.manager) {\n      this.manager.close().catch(console.error)\n    }\n  }\n\n  /**\n   * Render children if IdleTimer is used as a wrapper\n   * @return {Component} children\n   * @private\n   */\n  render () {\n    const { children } = this.props\n    return children || null\n  }\n\n  /**\n   * Setup the Tab Manager.\n   * @private\n   */\n  _setupTabManager () {\n    const { crossTab, onIdle, onActive } = this.props\n    this.callbackRefs = { onIdle, onActive }\n\n    /* istanbul ignore next */\n    if (crossTab) {\n      const {\n        type,\n        channelName,\n        fallbackInterval,\n        responseTime,\n        emitOnAllTabs\n      } = Object.assign({\n        channelName: 'idle-timer',\n        fallbackInterval: 2000,\n        responseTime: 100,\n        removeTimeout: 1000 * 60,\n        emitOnAllTabs: false\n      }, crossTab === true ? {} : crossTab)\n\n      this.manager = TabManager({\n        type,\n        channelName,\n        fallbackInterval,\n        responseTime,\n        emitOnAllTabs,\n        callbacks: this.callbackRefs,\n        start: this.start,\n        reset: this.reset,\n        pause: this.pause,\n        resume: this.resume\n      })\n    }\n  }\n\n  /**\n   * Binds the specified events\n   * @private\n   */\n  _bindEvents () {\n    // Don't bind events if\n    // we are not in a browser\n    if (!IS_BROWSER) return\n    // Otherwise we bind all the events\n    // to the supplied element\n    const { element, events, passive, capture } = this.props\n    if (!this.eventsBound) {\n      events.forEach(e => {\n        element.addEventListener(e, this.handleEvent, {\n          capture,\n          passive\n        })\n      })\n      this.eventsBound = true\n    }\n  }\n\n  /**\n   * Unbinds all the bound events\n   * @private\n   */\n  _unbindEvents (force = false) {\n    // If we are not in a browser\n    // we don't need to unbind events\n    if (!IS_BROWSER) return\n    // Unbind all events\n    const { element, events, passive, capture } = this.props\n    if (this.eventsBound || force) {\n      events.forEach(e => {\n        element.removeEventListener(e, this.handleEvent, {\n          capture,\n          passive\n        })\n      })\n      this.eventsBound = false\n    }\n  }\n\n  /**\n   * Toggles the idle state and calls\n   * the correct action function\n   * @private\n   */\n  _toggleIdleState (e) {\n    // Fire the appropriate action\n    // and pass the event through\n    // Toggle the idle state\n    this.setState((prevState) => ({\n      idle: !prevState.idle,\n      lastIdle: !prevState.idle ? (+new Date()) - this.props.timeout : prevState.lastIdle,\n      idleTime: prevState.idle ? prevState.idleTime + (+new Date()) - prevState.lastIdle : prevState.idleTime\n    }), () => {\n      const { onActive, onIdle, stopOnIdle } = this.props\n      const { idle } = this.state\n      if (idle) {\n        if (stopOnIdle) {\n          // Clear any existing timeout\n          clearTimeout(this.tId)\n          this.tId = null\n          // Unbind events\n          this._unbindEvents()\n        }\n\n        if (this.manager) {\n          /* istanbul ignore next */\n          this.manager.idle()\n        } else {\n          onIdle(e)\n        }\n      } else {\n        this._bindEvents()\n        if (this.manager) {\n          /* istanbul ignore next */\n          this.manager.active()\n        } else {\n          onActive(e)\n        }\n      }\n    })\n  }\n\n  /**\n   * Event handler for supported event types\n   * @param  {Object} e event object\n   * @private\n   */\n  _handleEvent (e) {\n    const { remaining, pageX, pageY, idle } = this.state\n    const { timeout, stopOnIdle } = this.props\n\n    // Fire onAction event\n    this._onAction(e)\n\n    // Already active, ignore events\n    if (remaining) return\n\n    // Mousemove event\n    if (e.type === 'mousemove') {\n      // If coords are same, it didn't move\n      /* istanbul ignore next */\n      if (e.pageX === pageX && e.pageY === pageY) {\n        return\n      }\n      // If coords don't exist how could it move\n      if (typeof e.pageX === 'undefined' && typeof e.pageY === 'undefined') {\n        return\n      }\n      // Under 200 ms is hard to do\n      // continuous activity will bypass this\n      /* istanbul ignore next */\n      const elapsed = this.getElapsedTime()\n      /* istanbul ignore next */\n      if (elapsed < 200) {\n        return\n      }\n    }\n\n    // Clear any existing timeout\n    clearTimeout(this.tId)\n    this.tId = null\n\n    // Determine last time User was active, as can't rely on setTimeout ticking at the correct interval\n    const elapsedTimeSinceLastActive = +new Date() - this.getLastActiveTime()\n\n    // If the user is idle or last active time is more than timeout, flip the idle state\n    if ((idle && !stopOnIdle) || (!idle && elapsedTimeSinceLastActive > timeout)) {\n      this._toggleIdleState(e)\n    }\n\n    // Store when the user was last active\n    // and update the mouse coordinates\n    this.setState({\n      lastActive: +new Date(),\n      pageX: e.pageX,\n      pageY: e.pageY\n    })\n\n    // If the user is idle and stopOnIdle flag is not set\n    // set a new timeout\n    if (idle) {\n      if (!stopOnIdle) {\n        this.tId = setTimeout(this._toggleIdleState, timeout)\n      }\n    } else {\n      this.tId = setTimeout(this._toggleIdleState, timeout)\n    }\n  }\n\n  /**\n   * Set initial state and start timer\n   * @name start\n   */\n  start (remote = true) {\n    // Clear timeout\n    clearTimeout(this.tId)\n    this.tId = null\n\n    // Bind the events\n    this._bindEvents()\n\n    // Reset state\n    this.setState({\n      idle: false,\n      oldDate: +new Date(),\n      lastActive: +new Date(),\n      remaining: null\n    })\n\n    if (this.manager) {\n      /* istanbul ignore next */\n      this.manager.setAllIdle(false)\n      /* istanbul ignore next */\n      if (!remote && this.props.crossTab.emitOnAllTabs) {\n        this.manager.send('start')\n      }\n    }\n\n    // Set new timeout\n    const { timeout } = this.props\n    this.tId = setTimeout(this._toggleIdleState, timeout)\n  }\n\n  /**\n   * Restore initial state and restart timer, calling onActive\n   * @name reset\n   */\n  reset (remote = false) {\n    // Clear timeout\n    clearTimeout(this.tId)\n    this.tId = null\n\n    // Bind the events\n    this._bindEvents()\n\n    if (this.state.idle) {\n      if (this.manager) {\n        /* istanbul ignore next */\n        this.manager.active()\n      } else {\n        this.props.onActive()\n      }\n    }\n\n    if (this.manager) {\n      /* istanbul ignore next */\n      this.manager.setAllIdle(false)\n      /* istanbul ignore next */\n      if (!remote && this.props.crossTab.emitOnAllTabs) {\n        this.manager.send('reset')\n      }\n    }\n\n    // Reset state\n    this.setState({\n      idle: false,\n      oldDate: +new Date(),\n      lastActive: +new Date(),\n      remaining: null\n    })\n\n    // Set new timeout\n    const { timeout } = this.props\n    this.tId = setTimeout(this._toggleIdleState, timeout)\n  }\n\n  /**\n   * Store remaining time and stop timer\n   * @name pause\n   */\n  pause (remote = false) {\n    // Timer is already paused\n    const { remaining } = this.state\n    if (remaining !== null) return\n\n    // Unbind events\n    this._unbindEvents()\n\n    // Clear existing timeout\n    clearTimeout(this.tId)\n    this.tId = null\n\n    // Send event to other tabs\n    if (this.manager) {\n      /* istanbul ignore next */\n      if (!remote && this.props.crossTab.emitOnAllTabs) {\n        this.manager.send('pause')\n      }\n    }\n\n    // Define how much is left on the timer\n    this.setState({\n      remaining: this.getRemainingTime()\n    })\n  }\n\n  /**\n   * Resumes a paused timer\n   * @name resume\n   */\n  resume (remote = false) {\n    // Timer is not paused\n    const { remaining, idle } = this.state\n    if (remaining === null) return\n\n    // Bind events\n    this._bindEvents()\n\n    // Send event to other tabs\n    if (this.manager) {\n      /* istanbul ignore next */\n      if (!remote && this.props.crossTab.emitOnAllTabs) {\n        this.manager.send('resume')\n      }\n    }\n\n    // Start timer and clear remaining\n    // if we are in the active state\n    if (!idle) {\n      // Set a new timeout\n      this.tId = setTimeout(this._toggleIdleState, remaining)\n      // Set new state\n      this.setState({ remaining: null, lastActive: +new Date() })\n    }\n  }\n\n  /**\n   * Time remaining before idle\n   * @name getRemainingTime\n   * @return {number} Milliseconds remaining\n   */\n  getRemainingTime () {\n    const { remaining, lastActive } = this.state\n    const { timeout } = this.props\n\n    // If idle there is no time remaining\n    if (remaining !== null) {\n      return remaining < 0 ? 0 : remaining\n    }\n\n    // Determine remaining, if negative idle didn't finish flipping, just return 0\n    const timeLeft = timeout - ((+new Date()) - lastActive)\n    return timeLeft < 0 ? 0 : timeLeft\n  }\n\n  /**\n   * How much time has elapsed\n   * @name getElapsedTime\n   * @return {Timestamp}\n   */\n  getElapsedTime () {\n    const { oldDate } = this.state\n    return (+new Date()) - oldDate\n  }\n\n  /**\n   * Last time the user was idle\n   * @name getLastIdleTime\n   * @return {Timestamp}\n   */\n  getLastIdleTime () {\n    const { lastIdle } = this.state\n    return lastIdle\n  }\n\n  /**\n   * Total time the user was idle\n   * @name getTotalIdleTime\n   * @return {number}\n   */\n  getTotalIdleTime () {\n    const { idle, lastIdle, idleTime } = this.state\n    if (idle) {\n      return ((+new Date()) - lastIdle) + idleTime\n    } else {\n      return idleTime\n    }\n  }\n\n  /**\n   * Last time the user was active\n   * @name getLastActiveTime\n   * @return {Timestamp}\n   */\n  getLastActiveTime () {\n    const { lastActive } = this.state\n    return lastActive\n  }\n\n  /**\n   * Total time the user was active\n   * @name getTotalActiveTime\n   * @return {number}\n   */\n  getTotalActiveTime () {\n    return this.getElapsedTime() - this.getTotalIdleTime()\n  }\n\n  /**\n   * Returns wether or not the user is idle\n   * @name isIdle\n   * @return {boolean}\n   */\n  isIdle () {\n    const { idle } = this.state\n    return idle\n  }\n\n  /**\n   * Returns wether or not this is the leader tab\n   * @name isLeader\n   * @return {boolean}\n   */\n  isLeader () {\n    return this.manager ? this.manager.isLeader() : true\n  }\n}\n\n/**\n * Type checks for every property\n * @type {Object}\n * @private\n */\nIdleTimer.propTypes = {\n  /**\n   * Activity Timeout in milliseconds\n   * default: 1200000\n   * @type {Number}\n   */\n  timeout: PropTypes.number,\n  /**\n   * DOM events to listen to\n   * default: see [default events](https://github.com/SupremeTechnopriest/react-idle-timer#default-events)\n   * @type {Array}\n   */\n  events: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * Function to call when user is idle\n   * default: () => {}\n   * @type {Function}\n   */\n  onIdle: PropTypes.func,\n  /**\n   * Function to call when user becomes active\n   * default: () => {}\n   * @type {Function}\n   */\n  onActive: PropTypes.func,\n  /**\n   * Function to call on user actions\n   * default: () => {}\n   * @type {Function}\n   */\n  onAction: PropTypes.func,\n  /**\n   * Debounce the onAction function by setting delay in milliseconds\n   * default: 0\n   * @type {Number}\n   */\n  debounce: PropTypes.number,\n  /**\n   * Throttle the onAction function by setting delay in milliseconds\n   * default: 0\n   * @type {Number}\n   */\n  throttle: PropTypes.number,\n  /**\n   * Throttle the event handler function by setting delay in milliseconds\n   * default: 200\n   * @type {Number}\n   */\n  eventsThrottle: PropTypes.number,\n  /**\n   * Element reference to bind activity listeners to\n   * default: document\n   * @type {Object}\n   */\n  element: PropTypes.oneOfType([PropTypes.object, PropTypes.element]),\n  /**\n   * Start the timer on mount\n   * default: true\n   * @type {Boolean}\n   */\n  startOnMount: PropTypes.bool,\n  /**\n   * Require the timer to be started manually.\n   * default: false\n   * @type {Boolean}\n   */\n  startManually: PropTypes.bool,\n  /**\n   * Once the user goes idle the IdleTimer will not\n   * reset on user input instead, reset() must be\n   * called manually to restart the timer\n   * default: false\n   * @type {Boolean}\n   */\n  stopOnIdle: PropTypes.bool,\n  /**\n   * Bind events passively\n   * default: true\n   * @type {Boolean}\n   */\n  passive: PropTypes.bool,\n  /**\n   * Capture events\n   * default: true\n   * @type {Boolean}\n   */\n  capture: PropTypes.bool,\n  /**\n   * Cross Tab functionality.\n   * default: false\n   * @type {Boolean|Object}\n   */\n  crossTab: PropTypes.oneOfType([\n    PropTypes.bool,\n    PropTypes.shape({\n      type: PropTypes.oneOf(['broadcastChannel', 'localStorage', 'simulate']),\n      channelName: PropTypes.string,\n      fallbackInterval: PropTypes.number,\n      responseTime: PropTypes.number,\n      removeTimeout: PropTypes.number,\n      emitOnAllTabs: PropTypes.bool\n    })\n  ])\n}\n\n/**\n * Sets default property values\n * @type {Object}\n * @private\n */\nIdleTimer.defaultProps = {\n  timeout: 1000 * 60 * 20,\n  element: DEFAULT_ELEMENT,\n  events: DEFAULT_EVENTS,\n  onIdle: () => { },\n  onActive: () => { },\n  onAction: () => { },\n  debounce: 0,\n  throttle: 0,\n  eventsThrottle: 200,\n  startOnMount: true,\n  startManually: false,\n  stopOnIdle: false,\n  capture: true,\n  passive: true,\n  crossTab: false\n}\n\nexport default IdleTimer\n","/**\n *  ___    _ _     _____ _\n * |_ _|__| | | __|_   _(_)_ __ ___   ___ _ __\n *  | |/ _` | |/ _ \\| | | | '_ ` _ \\ / _ \\ '__|\n *  | | (_| | |  __/| | | | | | | | |  __/ |\n * |___\\__,_|_|\\___||_| |_|_| |_| |_|\\___|_|\n *\n * @name useIdleTimer\n * @author Randy Lebeau\n * @private\n */\n\nimport { useEffect, useRef, useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { TabManager } from './TabManager'\nimport { IS_BROWSER, DEFAULT_ELEMENT, DEFAULT_EVENTS, debounced, throttled } from './utils'\n\n/**\n * Detects when your user is idle\n * @function useIdleTimer\n * @private\n */\nfunction useIdleTimer ({\n  timeout = 1000 * 60 * 20,\n  element = DEFAULT_ELEMENT,\n  events = DEFAULT_EVENTS,\n  onIdle = () => { },\n  onActive = () => { },\n  onAction = () => { },\n  debounce = 0,\n  throttle = 0,\n  eventsThrottle = 200,\n  startOnMount = true,\n  startManually = false,\n  stopOnIdle = false,\n  capture = true,\n  passive = true,\n  crossTab = false\n} = {}) {\n  const eventsBound = useRef(false)\n  const idle = useRef(true)\n  const oldDate = useRef(+new Date())\n  const remaining = useRef(null)\n  const pageX = useRef(null)\n  const pageY = useRef(null)\n  const tId = useRef(null)\n  const lastActive = useRef(null)\n  const lastIdle = useRef(null)\n  const idleTime = useRef(0)\n  const firstLoad = useRef(true)\n  const _timeout = useRef(timeout)\n  const manager = useRef(null)\n\n  /* istanbul ignore next */\n  if (crossTab) {\n    if (crossTab === true) crossTab = {}\n    crossTab = Object.assign({\n      channelName: 'idle-timer',\n      fallbackInterval: 2000,\n      responseTime: 100,\n      removeTimeout: 1000 * 60,\n      emitOnAllTabs: false\n    }, crossTab)\n  }\n\n  // Event emitters\n  const emitOnIdle = useRef(onIdle)\n  const emitOnActive = useRef(onActive)\n  const emitOnAction = useRef(onAction)\n\n  useEffect(() => {\n    emitOnIdle.current = onIdle\n  }, [onIdle])\n\n  useEffect(() => {\n    emitOnActive.current = onActive\n  }, [onActive])\n\n  useEffect(() => {\n    emitOnAction.current = onAction\n  }, [onAction])\n\n  const intermediateOnAction = useMemo(() => {\n    function callOnAction (e) {\n      emitOnAction.current(e)\n    }\n\n    // Cancel any existing debounce timeouts\n    if (callOnAction.cancel) callOnAction.cancel()\n\n    // Create debounced action if applicable\n    if (debounce > 0) {\n      return debounced(callOnAction, debounce)\n\n      // Create throttled action if applicable\n    } else if (throttle > 0) {\n      return throttled(callOnAction, throttle)\n\n      // No throttle or debounce\n    } else {\n      return callOnAction\n    }\n  }, [throttle, debounce])\n\n  /**\n   * Toggles the idle state and calls\n   * the correct action function\n   * @private\n   */\n  const _toggleIdleState = e => {\n    const nextIdle = !idle.current\n    idle.current = nextIdle\n    if (nextIdle) {\n      if (stopOnIdle) {\n        // Clear any existing timeout\n        clearTimeout(tId.current)\n        tId.current = null\n        // Unbind events\n        _unbindEvents()\n      }\n      lastIdle.current = (+new Date()) - _timeout.current\n      if (manager.current) {\n        /* istanbul ignore next */\n        manager.current.idle()\n      } else {\n        emitOnIdle.current(e)\n      }\n    } else {\n      idleTime.current += (+new Date()) - lastIdle.current\n      _bindEvents()\n      if (manager.current) {\n        /* istanbul ignore next */\n        manager.current.active()\n      } else {\n        emitOnActive.current(e)\n      }\n    }\n  }\n\n  /**\n   * Event handler\n   * @param {Event} e\n   */\n  const _handleEvent = e => {\n    // Fire onAction event\n    intermediateOnAction(e)\n\n    // Already active, ignore events\n    if (remaining.current) return\n\n    // Mousemove event\n    /* istanbul ignore next */\n    if (e.type === 'mousemove') {\n      // If coords are same, it didn't move\n      if (e.pageX === pageX && e.pageY === pageY) {\n        return\n      }\n      // If coords don't exist how could it move\n      if (typeof e.pageX === 'undefined' && typeof e.pageY === 'undefined') {\n        return\n      }\n      // Under 200 ms is hard to do\n      // continuous activity will bypass this\n      const elapsed = getElapsedTime()\n      if (elapsed < 200) {\n        return\n      }\n    }\n\n    // Clear any existing timeout\n    clearTimeout(tId.current)\n    tId.current = null\n\n    // Determine last time User was active, as can't rely on setTimeout ticking at the correct interval\n    const elapsedTimeSinceLastActive = +new Date() - getLastActiveTime()\n\n    // If the user is idle or last active time is more than timeout, flip the idle state\n    if (\n      (idle.current && !stopOnIdle) ||\n      (!idle.current && elapsedTimeSinceLastActive > _timeout.current)\n    ) {\n      _toggleIdleState(e)\n    }\n\n    // Store when the user was last active\n    // and update the mouse coordinates\n    lastActive.current = +new Date()\n    pageX.current = e.pageX\n    pageY.current = e.pageY\n\n    // If the user is active, set a new timeout\n    if (!idle.current) {\n      tId.current = setTimeout(_toggleIdleState, _timeout.current)\n    }\n  }\n\n  /**\n   * Reference to current handleEvent function.\n   * @private\n   */\n  const handleEvent = useRef(_handleEvent)\n\n  /**\n   * Binds the specified events\n   * @private\n   */\n  const _bindEvents = () => {\n    // Don't bind events if\n    // we are not in a browser\n    if (!IS_BROWSER) return\n    // Otherwise we bind all the events\n    // to the supplied element\n    if (!eventsBound.current) {\n      events.forEach(e => {\n        element.addEventListener(e, handleEvent.current, {\n          capture,\n          passive\n        })\n      })\n      eventsBound.current = true\n    }\n  }\n\n  /**\n   * Unbinds all the bound events\n   * @private\n   */\n  const _unbindEvents = (force = false) => {\n    // If we are not in a browser\n    // we don't need to unbind events\n    if (!IS_BROWSER) return\n    // Unbind all events\n    if (eventsBound.current || force) {\n      events.forEach(e => {\n        element.removeEventListener(e, handleEvent.current, {\n          capture,\n          passive\n        })\n      })\n      eventsBound.current = false\n    }\n  }\n\n  /**\n   * Time remaining before idle\n   * @name getRemainingTime\n   * @return {number} Milliseconds remaining\n   */\n  const getRemainingTime = () => {\n    // If idle there is no time remaining\n    if (remaining.current !== null) {\n      return remaining.current < 0 ? 0 : remaining.current\n    }\n\n    // Determine remaining, if negative idle didn't finish flipping, just return 0\n    const timeLeft = _timeout.current - ((+new Date()) - lastActive.current)\n    return timeLeft < 0 ? 0 : timeLeft\n  }\n\n  /**\n   * How much time has elapsed\n   * @name getElapsedTime\n   * @return {Timestamp}\n   */\n  const getElapsedTime = () => (+new Date()) - oldDate.current\n\n  /**\n   * Last time the user was idle\n   * @name getLastIdleTime\n   * @return {Timestamp}\n   */\n  const getLastIdleTime = () => lastIdle.current\n\n  /**\n   * Get the total time user is idle\n   * @name getTotalIdleTime\n   * @return {number} Milliseconds idle\n   */\n  const getTotalIdleTime = () => {\n    if (idle.current) {\n      return ((+new Date()) - lastIdle.current) + idleTime.current\n    } else {\n      return idleTime.current\n    }\n  }\n\n  /**\n   * Last time the user was active\n   * @name getLastActiveTime\n   * @return {Timestamp}\n   */\n  const getLastActiveTime = () => lastActive.current\n\n  /**\n   * Get the total time user is active\n   * @name getTotalActiveTime\n   * @return {number} Milliseconds active\n   */\n  const getTotalActiveTime = () => getElapsedTime() - getTotalIdleTime()\n\n  /**\n   * Returns wether or not the user is idle\n   * @name isIdle\n   * @return {Boolean}\n   */\n  const isIdle = () => idle.current\n\n  /**\n   * Returns wether or not this is the leader tab\n   * @returns {Boolean}\n   */\n  const isLeader = () => manager.current ? manager.current.isLeader() : true\n\n  /**\n  * Set initial state and start timer\n  * @name reset\n  */\n  const start = (remote = false) => {\n    // Clear timeout\n    clearTimeout(tId.current)\n    tId.current = null\n\n    // Bind the events\n    _bindEvents()\n\n    // Set state\n    idle.current = false\n    oldDate.current = +new Date()\n    lastActive.current = +new Date()\n    remaining.current = null\n\n    if (manager.current) {\n      /* istanbul ignore next */\n      manager.current.setAllIdle(false)\n      /* istanbul ignore next */\n      if (!remote && crossTab.emitOnAllTabs) {\n        manager.current.send('start')\n      }\n    }\n\n    // Set new timeout\n    tId.current = setTimeout(_toggleIdleState, _timeout.current)\n  }\n\n  /**\n  * Restore initial state and restart timer, calling onActive\n  * @name reset\n  */\n  const reset = (remote = false) => {\n    // Clear timeout\n    clearTimeout(tId.current)\n    tId.current = null\n\n    // Bind the events\n    _bindEvents()\n\n    // Emit active\n    if (idle.current) {\n      if (manager.current) {\n        /* istanbul ignore next */\n        manager.current.active()\n      } else {\n        emitOnActive.current()\n      }\n    }\n\n    // Reset state\n    idle.current = false\n    oldDate.current = +new Date()\n    lastActive.current = +new Date()\n    remaining.current = null\n\n    if (manager.current) {\n      /* istanbul ignore next */\n      manager.current.setAllIdle(false)\n      /* istanbul ignore next */\n      if (!remote && crossTab.emitOnAllTabs) {\n        manager.current.send('reset')\n      }\n    }\n\n    // Set new timeout\n    tId.current = setTimeout(_toggleIdleState, _timeout.current)\n  }\n\n  /**\n   * Store remaining time and stop timer\n   * @name pause\n   */\n  const pause = (remote = false) => {\n    // Timer is already paused\n    if (remaining.current !== null) return\n\n    // Unbind events\n    _unbindEvents()\n\n    // Clear existing timeout\n    clearTimeout(tId.current)\n    tId.current = null\n\n    // Define how much is left on the timer\n    remaining.current = getRemainingTime()\n\n    if (manager.current) {\n      /* istanbul ignore next */\n      if (!remote && crossTab.emitOnAllTabs) {\n        manager.current.send('pause')\n      }\n    }\n  }\n\n  /**\n   * Resumes a paused timer\n   * @name resume\n   */\n  const resume = (remote = false) => {\n    // Timer is not paused\n    if (remaining.current === null) return\n\n    // Bind events\n    _bindEvents()\n\n    // Start timer and clear remaining\n    // if we are in the idle state\n    if (!idle.current) {\n      // Set a new timeout\n      tId.current = setTimeout(_toggleIdleState, remaining.current)\n      // Set states\n      remaining.current = null\n      lastActive.current = +new Date()\n    }\n\n    if (manager.current) {\n      /* istanbul ignore next */\n      if (!remote && crossTab.emitOnAllTabs) {\n        manager.current.send('resume')\n      }\n    }\n  }\n\n  /**\n   * Hook lifecycle\n   */\n  useEffect(() => {\n    // Debounce and throttle can't both be set\n    if (debounce > 0 && throttle > 0) {\n      throw new Error('onAction can either be throttled or debounced (not both)')\n    }\n\n    // Set up cross tab\n    /* istanbul ignore next */\n    if (crossTab) {\n      manager.current = TabManager({\n        type: crossTab.type,\n        channelName: crossTab.channelName,\n        fallbackInterval: crossTab.fallbackInterval,\n        responseTime: crossTab.responseTime,\n        emitOnAllTabs: crossTab.emitOnAllTabs,\n        callbacks: {\n          onIdle: emitOnIdle.current,\n          onActive: emitOnActive.current\n        },\n        start,\n        reset,\n        pause,\n        resume\n      })\n    }\n\n    // If startOnMount is enabled, start the timer\n    if (startManually) {\n      return async () => {\n        clearTimeout(tId.current)\n        _unbindEvents(true)\n        if (crossTab) await manager.current.close()\n      }\n    }\n\n    if (startOnMount) {\n      start()\n    } else {\n      _bindEvents()\n    }\n\n    // Clear and unbind on unmount\n    return async () => {\n      clearTimeout(tId.current)\n      _unbindEvents(true)\n      if (intermediateOnAction.cancel) intermediateOnAction.cancel()\n      if (crossTab) await manager.current.close()\n    }\n  }, [])\n\n  useEffect(() => {\n    const eventsWereBound = eventsBound.current\n    if (eventsWereBound) _unbindEvents()\n    if (eventsThrottle > 0) {\n      handleEvent.current = throttled(_handleEvent, eventsThrottle)\n    } else {\n      handleEvent.current = _handleEvent\n    }\n    if (eventsWereBound) _bindEvents()\n  }, [eventsThrottle])\n\n  useEffect(() => {\n    _timeout.current = timeout\n    if (!firstLoad.current && idle.current) {\n      reset()\n    }\n    firstLoad.current = false\n  }, [timeout])\n\n  return {\n    isIdle,\n    isLeader,\n    start,\n    pause,\n    reset,\n    resume,\n    getLastIdleTime,\n    getTotalIdleTime,\n    getLastActiveTime,\n    getTotalActiveTime,\n    getElapsedTime,\n    getRemainingTime\n  }\n}\n\n/**\n * Type checks for every property\n * @type {Object}\n * @private\n */\nuseIdleTimer.propTypes = {\n  /**\n   * Activity Timeout in milliseconds\n   * default: 1200000\n   * @type {number}\n   */\n  timeout: PropTypes.number,\n  /**\n   * DOM events to listen to\n   * default: see [default events](https://github.com/SupremeTechnopriest/react-idle-timer#default-events)\n   * @type {Array}\n   */\n  events: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * Function to call when user is idle.\n   * default: () => {}\n   * @type {Function}\n   */\n  onIdle: PropTypes.func,\n  /**\n   * Function to call when user becomes active.\n   * default: () => {}\n   * @type {Function}\n   */\n  onActive: PropTypes.func,\n  /**\n   * Function to call on user actions.\n   * default: () => {}\n   * @type {Function}\n   */\n  onAction: PropTypes.func,\n  /**\n   * Debounce the onAction function by setting delay in milliseconds.\n   * default: 0\n   * @type {number}\n   */\n  debounce: PropTypes.number,\n  /**\n   * Throttle the onAction function by setting delay in milliseconds.\n   * default: 0\n   * @type {number}\n   */\n  throttle: PropTypes.number,\n  /**\n   * Throttle the event handler function by setting delay in milliseconds.\n   * default: 200\n   * @type {number}\n   */\n  eventsThrottle: PropTypes.number,\n  /**\n   * Element reference to bind activity listeners to.\n   * default: document\n   * @type {Object}\n   */\n  element: PropTypes.oneOfType([PropTypes.object, PropTypes.element]),\n  /**\n   * Start the timer on mount.\n   * default: true\n   * @type {Boolean}\n   */\n  startOnMount: PropTypes.bool,\n  /**\n   * Require the timer to be started manually.\n   * default: false\n   * @type {Boolean}\n   */\n  startManually: PropTypes.bool,\n  /**\n   * Once the user goes idle the IdleTimer will not\n   * reset on user input instead, start() or reset() must be\n   * called manually to restart the timer.\n   * default: false\n   * @type {Boolean}\n   */\n  stopOnIdle: PropTypes.bool,\n  /**\n   * Bind events passively.\n   * default: true\n   * @type {Boolean}\n   */\n  passive: PropTypes.bool,\n  /**\n   * Capture events.\n   * default: true\n   * @type {Boolean}\n   */\n  capture: PropTypes.bool,\n  /**\n   * Cross Tab functionality.\n   * default: false\n   * @type {Boolean|Object}\n   */\n  crossTab: PropTypes.oneOfType([\n    PropTypes.bool,\n    PropTypes.shape({\n      type: PropTypes.oneOf(['broadcastChannel', 'localStorage', 'simulate']),\n      channelName: PropTypes.string,\n      fallbackInterval: PropTypes.number,\n      responseTime: PropTypes.number,\n      removeTimeout: PropTypes.number,\n      emitOnAllTabs: PropTypes.bool\n    })\n  ])\n}\n\n/**\n * Sets default property values\n * @type {Object}\n * @private\n */\nuseIdleTimer.defaultProps = {\n  timeout: 1000 * 60 * 20,\n  element: DEFAULT_ELEMENT,\n  events: DEFAULT_EVENTS,\n  onIdle: () => { },\n  onActive: () => { },\n  onAction: () => { },\n  debounce: 0,\n  throttle: 0,\n  eventsThrottle: 200,\n  startOnMount: true,\n  startManually: false,\n  stopOnIdle: false,\n  capture: true,\n  passive: true,\n  crossTab: false\n}\n\nexport default useIdleTimer\n"]},"metadata":{},"sourceType":"module"}