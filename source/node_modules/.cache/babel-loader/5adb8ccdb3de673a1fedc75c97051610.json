{"ast":null,"code":"import _classCallCheck from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _applyDecoratedDescriptor from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";var _dec,_class;import{browser}from'webextension-polyfill-ts';import{Rpc}from'../lib/rpc/rpc';import{action}from'mobx';export var BackgroundManager=(_dec=action.bound,(_class=/*#__PURE__*/function(){function BackgroundManager(appState,errors){var _this=this;_classCallCheck(this,BackgroundManager);this.appState=appState;this.errors=errors;this.rpc=void 0;// RPC is duplex\nthis.rpc=new Rpc({addListener:browser.runtime.onMessage.addListener,destination:'background',logMessages:false,postMessage:browser.runtime.sendMessage,source:'popup'});this.rpc.register('popup.updateState',this.onStateUpdate.bind(this));this.rpc.call('background.getState').then(function(appState){_this.onStateUpdate(appState);});}_createClass(BackgroundManager,[{key:\"onStateUpdate\",value:function onStateUpdate(appState){this.appState.isIntegratedSite=appState.isIntegratedSite;this.appState.isUnlocked=appState.isUnlocked;this.appState.unlockAttempts=appState.unlockAttempts;this.appState.lockoutTimerStarted=appState.lockoutTimerStarted;this.appState.remainingMins=appState.remainingMins;this.appState.currentTab=appState.currentTab;this.appState.connectionRequested=appState.connectionRequested;this.appState.connectedSites=appState.connectedSites;this.appState.hasCreatedVault=appState.hasCreatedVault;this.appState.activeUserAccount=appState.activeUserAccount;this.appState.userAccounts.replace(appState.userAccounts);this.appState.unsignedDeploys.replace(appState.unsignedDeploys);this.appState.unsignedMessages.replace(appState.unsignedMessages);this.appState.idleTimeoutMins=appState.idleTimeoutMins;this.appState.isTimeToSecurityCheckup=appState.isTimeToSecurityCheckup;}},{key:\"resetSecurityCheckup\",value:function resetSecurityCheckup(){return this.errors.withCapture(this.rpc.call('account.resetSecurityCheckup'));}},{key:\"unlock\",value:function unlock(password){return this.errors.withCapture(this.rpc.call('account.unlock',password));}},{key:\"createNewVault\",value:function createNewVault(password){return this.rpc.call('account.createNewVault',password);}},{key:\"lock\",value:function lock(){return this.rpc.call('account.lock');}},{key:\"importUserAccount\",value:function importUserAccount(name,secretKeyBase64,algorithm,backedUp){return this.errors.withCapture(this.rpc.call('account.importUserAccount',name,secretKeyBase64,algorithm,backedUp));}},{key:\"reorderAccount\",value:function reorderAccount(index1,index2){return this.errors.withCapture(this.rpc.call('account.reorderAccount',index1,index2));}},{key:\"removeUserAccount\",value:function removeUserAccount(name){return this.errors.withCapture(this.rpc.call('account.removeUserAccount',name));}},{key:\"isBackedUp\",value:function isBackedUp(alias){return this.errors.withCapture(this.rpc.call('account.isBackedUp',alias));}},{key:\"signDeploy\",value:function signDeploy(deployId){return this.errors.withCapture(this.rpc.call('sign.signDeploy',deployId));}},{key:\"rejectSignDeploy\",value:function rejectSignDeploy(deployId){return this.errors.withCapture(this.rpc.call('sign.rejectSignDeploy',deployId));}},{key:\"parseDeployData\",value:function parseDeployData(deployId){return this.errors.withCapture(this.rpc.call('sign.parseDeployData',deployId));}},{key:\"approveSigningMessage\",value:function approveSigningMessage(messageId){return this.errors.withCapture(this.rpc.call('sign.approveSigningMessage',messageId));}},{key:\"cancelSigningMessage\",value:function cancelSigningMessage(messageId){return this.errors.withCapture(this.rpc.call('sign.cancelSigningMessage',messageId));}},{key:\"switchToAccount\",value:function switchToAccount(accountName){return this.errors.withCapture(this.rpc.call('account.switchToAccount',accountName));}},{key:\"getActiveUserAccount\",value:function getActiveUserAccount(){return this.errors.withCapture(this.rpc.call('account.getActiveUserAccount'));}},{key:\"getActivePublicKeyHex\",value:function getActivePublicKeyHex(){return this.errors.withCapture(this.rpc.call('account.getActivePublicKeyHex'));}},{key:\"getActiveAccountHash\",value:function getActiveAccountHash(){return this.errors.withCapture(this.rpc.call('account.getActiveAccountHash'));}},{key:\"getPublicKeyHexByAlias\",value:function getPublicKeyHexByAlias(alias){return this.errors.withCapture(this.rpc.call('account.getPublicKeyHexByAlias',alias));}},{key:\"getAccountHashByAlias\",value:function getAccountHashByAlias(alias){return this.errors.withCapture(this.rpc.call('account.getAccountHashByAlias',alias));}},{key:\"resetVault\",value:function resetVault(){return this.errors.withCapture(this.rpc.call('account.resetVault'));}},{key:\"resetLockout\",value:function resetLockout(){return this.errors.withCapture(this.rpc.call('account.resetLockout'));}},{key:\"startLockoutTimer\",value:function startLockoutTimer(timeInMinutes){return this.errors.withCapture(this.rpc.call('account.startLockoutTimer',timeInMinutes));}},{key:\"resetLockoutTimer\",value:function resetLockoutTimer(){return this.errors.withCapture(this.rpc.call('account.resetLockoutTimer'));}},{key:\"renameUserAccount\",value:function renameUserAccount(oldName,newName){return this.errors.withCapture(this.rpc.call('account.renameUserAccount',oldName,newName));}},{key:\"downloadAccountKeys\",value:function downloadAccountKeys(alias){return this.errors.withCapture(this.rpc.call('account.downloadAccountKeys',alias));}},{key:\"connectToSite\",value:function connectToSite(url){return this.errors.withCapture(this.rpc.call('connection.connectToSite',url));}},{key:\"disconnectFromSite\",value:function disconnectFromSite(site){return this.errors.withCapture(this.rpc.call('connection.disconnectFromSite',site));}},{key:\"removeSite\",value:function removeSite(url){return this.errors.withCapture(this.rpc.call('connection.removeSite',url));}},{key:\"resetConnectionRequest\",value:function resetConnectionRequest(){return this.errors.withCapture(this.rpc.call('connection.resetConnectionRequest'));}},{key:\"confirmPassword\",value:function confirmPassword(password){return this.errors.withCapture(this.rpc.call('account.confirmPassword',password));}},{key:\"isIntegratedSite\",value:function isIntegratedSite(hostname){return this.errors.withCapture(this.rpc.call('connection.isIntegratedSite',hostname));}},{key:\"configureTimeout\",value:function configureTimeout(durationMins){return this.errors.withCapture(this.rpc.call('account.configureTimeout',durationMins));}},{key:\"callOpenPopup\",value:function callOpenPopup(purposeForOpening){return this.errors.withCapture(this.rpc.call('popup.openPopup',purposeForOpening));}},{key:\"callClosePopup\",value:function callClosePopup(signingId){// first parameter is undefined to cover the optional windowId arg\nreturn this.errors.withCapture(this.rpc.call('popup.closePopup',undefined,signingId));}}]);return BackgroundManager;}(),(_applyDecoratedDescriptor(_class.prototype,\"onStateUpdate\",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,\"onStateUpdate\"),_class.prototype)),_class));","map":{"version":3,"sources":["/home/chef/Desktop/signer/src/popup/BackgroundManager.ts"],"names":["browser","Rpc","action","BackgroundManager","bound","appState","errors","rpc","addListener","runtime","onMessage","destination","logMessages","postMessage","sendMessage","source","register","onStateUpdate","bind","call","then","isIntegratedSite","isUnlocked","unlockAttempts","lockoutTimerStarted","remainingMins","currentTab","connectionRequested","connectedSites","hasCreatedVault","activeUserAccount","userAccounts","replace","unsignedDeploys","unsignedMessages","idleTimeoutMins","isTimeToSecurityCheckup","withCapture","password","name","secretKeyBase64","algorithm","backedUp","index1","index2","alias","deployId","messageId","accountName","timeInMinutes","oldName","newName","url","site","hostname","durationMins","purposeForOpening","signingId","undefined"],"mappings":"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","sourcesContent":["import { browser } from 'webextension-polyfill-ts';\nimport { Rpc } from '../lib/rpc/rpc';\nimport { AppState } from '../lib/MemStore';\nimport { action } from 'mobx';\nimport ErrorContainer from './container/ErrorContainer';\nimport { KeyPairWithAlias } from '../@types/models';\nimport { DeployData } from '../background/SigningManager';\nimport { PurposeForOpening } from '../shared';\n\nexport class BackgroundManager {\n  private rpc: Rpc;\n\n  constructor(private appState: AppState, private errors: ErrorContainer) {\n    // RPC is duplex\n    this.rpc = new Rpc({\n      addListener: browser.runtime.onMessage.addListener,\n      destination: 'background',\n      logMessages: false,\n      postMessage: browser.runtime.sendMessage,\n      source: 'popup'\n    });\n\n    this.rpc.register('popup.updateState', this.onStateUpdate.bind(this));\n    this.rpc.call<AppState>('background.getState').then(appState => {\n      this.onStateUpdate(appState);\n    });\n  }\n\n  @action.bound\n  private onStateUpdate(appState: AppState) {\n    this.appState.isIntegratedSite = appState.isIntegratedSite;\n    this.appState.isUnlocked = appState.isUnlocked;\n    this.appState.unlockAttempts = appState.unlockAttempts;\n    this.appState.lockoutTimerStarted = appState.lockoutTimerStarted;\n    this.appState.remainingMins = appState.remainingMins;\n    this.appState.currentTab = appState.currentTab;\n    this.appState.connectionRequested = appState.connectionRequested;\n    this.appState.connectedSites = appState.connectedSites;\n    this.appState.hasCreatedVault = appState.hasCreatedVault;\n    this.appState.activeUserAccount = appState.activeUserAccount;\n    this.appState.userAccounts.replace(appState.userAccounts);\n    this.appState.unsignedDeploys.replace(appState.unsignedDeploys);\n    this.appState.unsignedMessages.replace(appState.unsignedMessages);\n    this.appState.idleTimeoutMins = appState.idleTimeoutMins;\n    this.appState.isTimeToSecurityCheckup = appState.isTimeToSecurityCheckup;\n  }\n\n  public resetSecurityCheckup() {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.resetSecurityCheckup')\n    );\n  }\n\n  public unlock(password: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.unlock', password)\n    );\n  }\n\n  public createNewVault(password: string) {\n    return this.rpc.call<void>('account.createNewVault', password);\n  }\n\n  public lock() {\n    return this.rpc.call<void>('account.lock');\n  }\n\n  public importUserAccount(\n    name: string,\n    secretKeyBase64: string,\n    algorithm: string,\n    backedUp: boolean\n  ) {\n    return this.errors.withCapture(\n      this.rpc.call<void>(\n        'account.importUserAccount',\n        name,\n        secretKeyBase64,\n        algorithm,\n        backedUp\n      )\n    );\n  }\n\n  public reorderAccount(index1: number, index2: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.reorderAccount', index1, index2)\n    );\n  }\n\n  public removeUserAccount(name: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.removeUserAccount', name)\n    );\n  }\n\n  public isBackedUp(alias: string) {\n    return this.errors.withCapture(\n      this.rpc.call<boolean>('account.isBackedUp', alias)\n    );\n  }\n\n  public signDeploy(deployId: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('sign.signDeploy', deployId)\n    );\n  }\n\n  public rejectSignDeploy(deployId: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('sign.rejectSignDeploy', deployId)\n    );\n  }\n\n  public parseDeployData(deployId: number) {\n    return this.errors.withCapture(\n      this.rpc.call<DeployData>('sign.parseDeployData', deployId)\n    );\n  }\n\n  public approveSigningMessage(messageId: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('sign.approveSigningMessage', messageId)\n    );\n  }\n\n  public cancelSigningMessage(messageId: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('sign.cancelSigningMessage', messageId)\n    );\n  }\n\n  public switchToAccount(accountName: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.switchToAccount', accountName)\n    );\n  }\n\n  public getActiveUserAccount() {\n    return this.errors.withCapture(\n      this.rpc.call<KeyPairWithAlias>('account.getActiveUserAccount')\n    );\n  }\n\n  public getActivePublicKeyHex() {\n    return this.errors.withCapture(\n      this.rpc.call<string>('account.getActivePublicKeyHex')\n    );\n  }\n\n  public getActiveAccountHash() {\n    return this.errors.withCapture(\n      this.rpc.call<string>('account.getActiveAccountHash')\n    );\n  }\n\n  public getPublicKeyHexByAlias(alias: string) {\n    return this.errors.withCapture(\n      this.rpc.call<string>('account.getPublicKeyHexByAlias', alias)\n    );\n  }\n\n  public getAccountHashByAlias(alias: string) {\n    return this.errors.withCapture(\n      this.rpc.call<string>('account.getAccountHashByAlias', alias)\n    );\n  }\n\n  public resetVault() {\n    return this.errors.withCapture(this.rpc.call<void>('account.resetVault'));\n  }\n\n  public resetLockout() {\n    return this.errors.withCapture(this.rpc.call<void>('account.resetLockout'));\n  }\n\n  public startLockoutTimer(timeInMinutes: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.startLockoutTimer', timeInMinutes)\n    );\n  }\n\n  public resetLockoutTimer() {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.resetLockoutTimer')\n    );\n  }\n\n  public renameUserAccount(oldName: string, newName: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.renameUserAccount', oldName, newName)\n    );\n  }\n\n  public downloadAccountKeys(alias: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.downloadAccountKeys', alias)\n    );\n  }\n  public connectToSite(url?: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('connection.connectToSite', url)\n    );\n  }\n\n  public disconnectFromSite(site?: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('connection.disconnectFromSite', site)\n    );\n  }\n\n  public removeSite(url: string) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('connection.removeSite', url)\n    );\n  }\n\n  public resetConnectionRequest() {\n    return this.errors.withCapture(\n      this.rpc.call<void>('connection.resetConnectionRequest')\n    );\n  }\n\n  public confirmPassword(password: string) {\n    return this.errors.withCapture(\n      this.rpc.call<boolean>('account.confirmPassword', password)\n    );\n  }\n\n  public isIntegratedSite(hostname: string) {\n    return this.errors.withCapture(\n      this.rpc.call<boolean>('connection.isIntegratedSite', hostname)\n    );\n  }\n\n  public configureTimeout(durationMins: number) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('account.configureTimeout', durationMins)\n    );\n  }\n\n  public callOpenPopup(purposeForOpening: PurposeForOpening) {\n    return this.errors.withCapture(\n      this.rpc.call<void>('popup.openPopup', purposeForOpening)\n    );\n  }\n\n  public callClosePopup(signingId?: number) {\n    // first parameter is undefined to cover the optional windowId arg\n    return this.errors.withCapture(\n      this.rpc.call<void>('popup.closePopup', undefined, signingId)\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}