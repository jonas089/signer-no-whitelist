{"ast":null,"code":"import _regeneratorRuntime from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _class;import{Typography,Box,Grid,Button}from'@material-ui/core';import{observer}from'mobx-react';import React from'react';import{Redirect,withRouter}from'react-router-dom';import{browser}from'webextension-polyfill-ts';import Pages from'./Pages';import confirmConnect from'./ConfirmConnect';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConnectSignerPage=observer(_class=/*#__PURE__*/function(_React$Component){_inherits(ConnectSignerPage,_React$Component);var _super=_createSuper(ConnectSignerPage);function ConnectSignerPage(){_classCallCheck(this,ConnectSignerPage);return _super.apply(this,arguments);}_createClass(ConnectSignerPage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this=this;var w;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return browser.windows.getCurrent();case 2:w=_context.sent;if(w.type==='popup'){window.addEventListener('beforeunload',function(e){_this.props.connectSignerContainer.cancel();});}case 4:case\"end\":return _context.stop();}}},_callee);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;if(!this.props.connectSignerContainer.connectionStatus){var _this$props$connectSi;return!this.props.accountManager.isUnLocked||!this.props.accountManager.userAccounts.length?/*#__PURE__*/_jsx(Redirect,{to:Pages.Home}):/*#__PURE__*/_jsxs(\"div\",{style:{flexGrow:1},children:[/*#__PURE__*/_jsx(Typography,{align:'center',variant:'h5',style:{marginBottom:'1rem'},children:\"Connection Request\"}),/*#__PURE__*/_jsxs(Typography,{align:'center',variant:'body1',children:[\"Would you like to allow\",' ',/*#__PURE__*/_jsx(\"b\",{children:(_this$props$connectSi=this.props.connectSignerContainer.currentTab)===null||_this$props$connectSi===void 0?void 0:_this$props$connectSi.url}),\" to connect?\"]}),/*#__PURE__*/_jsx(Box,{mt:8,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,justify:'center',alignItems:'center',children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){_this2.props.connectSignerContainer.cancel();},children:\"Cancel\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){confirmConnect().then(function(){return _this2.props.connectSignerContainer.connectToSite();});},variant:\"contained\",color:\"primary\",style:{backgroundColor:'var(--cspr-dark-blue)'},children:\"Connect\"})})]})})]});}else{return/*#__PURE__*/_jsx(Redirect,{to:Pages.Home});}}}]);return ConnectSignerPage;}(React.Component))||_class;export default withRouter(ConnectSignerPage);","map":{"version":3,"sources":["/home/chef/Desktop/signer/src/popup/components/ConnectSignerPage.tsx"],"names":["Typography","Box","Grid","Button","observer","React","Redirect","withRouter","browser","Pages","confirmConnect","ConnectSignerPage","windows","getCurrent","w","type","window","addEventListener","e","props","connectSignerContainer","cancel","connectionStatus","accountManager","isUnLocked","userAccounts","length","Home","flexGrow","marginBottom","currentTab","url","then","connectToSite","backgroundColor","Component"],"mappings":"w1BAAA,OAASA,UAAT,CAAqBC,GAArB,CAA0BC,IAA1B,CAAgCC,MAAhC,KAA8C,mBAA9C,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAwCC,UAAxC,KAA0D,kBAA1D,CACA,OAASC,OAAT,KAAwB,0BAAxB,CAGA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,C,2FAQMC,CAAAA,iB,CADLP,Q,4YAEC,8KACgBI,CAAAA,OAAO,CAACI,OAAR,CAAgBC,UAAhB,EADhB,QACMC,CADN,eAEE,GAAIA,CAAC,CAACC,IAAF,GAAW,OAAf,CAAwB,CACtBC,MAAM,CAACC,gBAAP,CAAwB,cAAxB,CAAwC,SAAAC,CAAC,CAAI,CAC3C,KAAI,CAACC,KAAL,CAAWC,sBAAX,CAAkCC,MAAlC,GACD,CAFD,EAGD,CANH,sD,mIASA,iBAAS,iBACP,GAAI,CAAC,KAAKF,KAAL,CAAWC,sBAAX,CAAkCE,gBAAvC,CAAyD,2BACvD,MAAO,CAAC,KAAKH,KAAL,CAAWI,cAAX,CAA0BC,UAA3B,EACL,CAAC,KAAKL,KAAL,CAAWI,cAAX,CAA0BE,YAA1B,CAAuCC,MADnC,cAEL,KAAC,QAAD,EAAU,EAAE,CAAEjB,KAAK,CAACkB,IAApB,EAFK,cAIL,aAAK,KAAK,CAAE,CAAEC,QAAQ,CAAE,CAAZ,CAAZ,wBACE,KAAC,UAAD,EACE,KAAK,CAAE,QADT,CAEE,OAAO,CAAE,IAFX,CAGE,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAhB,CAHT,gCADF,cAQE,MAAC,UAAD,EAAY,KAAK,CAAE,QAAnB,CAA6B,OAAO,CAAE,OAAtC,qCAC0B,GAD1B,cAEE,0CAAI,KAAKV,KAAL,CAAWC,sBAAX,CAAkCU,UAAtC,gDAAI,sBAA8CC,GAAlD,EAFF,kBARF,cAaE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACE,MAAC,IAAD,EACE,SAAS,KADX,CAEE,OAAO,CAAE,CAFX,CAGE,OAAO,CAAE,QAHX,CAIE,UAAU,CAAE,QAJd,wBAME,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAC,WAFR,CAGE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACZ,KAAL,CAAWC,sBAAX,CAAkCC,MAAlC,GACD,CALH,oBADF,EANF,cAiBE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACbX,cAAc,GAAGsB,IAAjB,CAAsB,iBACpB,CAAA,MAAI,CAACb,KAAL,CAAWC,sBAAX,CAAkCa,aAAlC,EADoB,EAAtB,EAGD,CALH,CAME,OAAO,CAAC,WANV,CAOE,KAAK,CAAC,SAPR,CAQE,KAAK,CAAE,CACLC,eAAe,CAAE,uBADZ,CART,qBADF,EAjBF,GADF,EAbF,GAJF,CAuDD,CAxDD,IAwDO,CACL,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAEzB,KAAK,CAACkB,IAApB,EAAP,CACD,CACF,C,+BAtE6BtB,KAAK,CAAC8B,S,WAyEtC,cAAe5B,CAAAA,UAAU,CAACI,iBAAD,CAAzB","sourcesContent":["import { Typography, Box, Grid, Button } from '@material-ui/core';\nimport { observer } from 'mobx-react';\nimport React from 'react';\nimport { Redirect, RouteComponentProps, withRouter } from 'react-router-dom';\nimport { browser } from 'webextension-polyfill-ts';\nimport ConnectSignerContainer from '../container/ConnectSignerContainer';\nimport AccountManager from '../container/AccountManager';\nimport Pages from './Pages';\nimport confirmConnect from './ConfirmConnect';\n\ninterface Props extends RouteComponentProps {\n  connectSignerContainer: ConnectSignerContainer;\n  accountManager: AccountManager;\n}\n\n@observer\nclass ConnectSignerPage extends React.Component<Props, {}> {\n  async componentDidMount() {\n    let w = await browser.windows.getCurrent();\n    if (w.type === 'popup') {\n      window.addEventListener('beforeunload', e => {\n        this.props.connectSignerContainer.cancel();\n      });\n    }\n  }\n\n  render() {\n    if (!this.props.connectSignerContainer.connectionStatus) {\n      return !this.props.accountManager.isUnLocked ||\n        !this.props.accountManager.userAccounts.length ? (\n        <Redirect to={Pages.Home} />\n      ) : (\n        <div style={{ flexGrow: 1 }}>\n          <Typography\n            align={'center'}\n            variant={'h5'}\n            style={{ marginBottom: '1rem' }}\n          >\n            Connection Request\n          </Typography>\n          <Typography align={'center'} variant={'body1'}>\n            Would you like to allow{' '}\n            <b>{this.props.connectSignerContainer.currentTab?.url}</b> to\n            connect?\n          </Typography>\n          <Box mt={8}>\n            <Grid\n              container\n              spacing={4}\n              justify={'center'}\n              alignItems={'center'}\n            >\n              <Grid item>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={() => {\n                    this.props.connectSignerContainer.cancel();\n                  }}\n                >\n                  Cancel\n                </Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  onClick={() => {\n                    confirmConnect().then(() =>\n                      this.props.connectSignerContainer.connectToSite()\n                    );\n                  }}\n                  variant=\"contained\"\n                  color=\"primary\"\n                  style={{\n                    backgroundColor: 'var(--cspr-dark-blue)'\n                  }}\n                >\n                  Connect\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        </div>\n      );\n    } else {\n      return <Redirect to={Pages.Home} />;\n    }\n  }\n}\n\nexport default withRouter(ConnectSignerPage);\n"]},"metadata":{},"sourceType":"module"}