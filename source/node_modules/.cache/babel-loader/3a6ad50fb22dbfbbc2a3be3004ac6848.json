{"ast":null,"code":"\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar mobx_1 = require(\"mobx\");\n\nvar types_1 = require(\"./types\");\n/**\n * Makes it easier to work with dynamically maintained array\n */\n\n\nvar FormStateLazy =\n/** @class */\nfunction () {\n  function FormStateLazy(\n  /** It is a function as fields can change over time */\n  getFields) {\n    var _this = this;\n\n    this.getFields = getFields;\n    this.validating = false;\n    this._validators = [];\n\n    this.validators = function () {\n      var validators = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        validators[_i] = arguments[_i];\n      }\n\n      _this._validators = validators;\n      return _this;\n    };\n\n    this.enableAutoValidation = function () {\n      _this.getFields().forEach(function (x) {\n        return x.enableAutoValidation();\n      });\n    };\n\n    this.disableAutoValidation = function () {\n      _this.getFields().forEach(function (x) {\n        return x.disableAutoValidation();\n      });\n    };\n\n    this._error = '';\n  }\n\n  Object.defineProperty(FormStateLazy.prototype, \"$\", {\n    get: function () {\n      return this.getFields();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FormStateLazy.prototype.validate = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var values, fieldsResult, done, error, res;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.validating = true;\n            values = this.getFields();\n            return [4\n            /*yield*/\n            , Promise.all(values.map(function (value) {\n              return value.validate();\n            }))];\n\n          case 1:\n            fieldsResult = _a.sent();\n            done = mobx_1.runInAction(function () {\n              if (fieldsResult.some(function (f) {\n                return f.hasError;\n              })) {\n                _this.validating = false;\n                return true;\n              }\n\n              return false;\n            });\n            if (done) return [2\n            /*return*/\n            , {\n              hasError: true\n            }];\n            return [4\n            /*yield*/\n            , types_1.applyValidators(this.$, this._validators || [])];\n\n          case 2:\n            error = _a.sent();\n            res = mobx_1.runInAction(function () {\n              if (error != _this._error) {\n                _this._error = error;\n              }\n\n              _this.validating = false;\n              var hasError = !!error;\n\n              if (hasError) {\n                return {\n                  hasError: true\n                };\n              }\n\n              return {\n                hasError: false,\n                value: _this.$\n              };\n            });\n            return [2\n            /*return*/\n            , res];\n        }\n      });\n    });\n  };\n\n  Object.defineProperty(FormStateLazy.prototype, \"hasError\", {\n    /**\n     * Does any field or form have an error\n     */\n    get: function () {\n      return this.hasFieldError || this.hasFormError;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FormStateLazy.prototype, \"hasFieldError\", {\n    /**\n     * Does any field have an error\n     */\n    get: function () {\n      return this.getFields().some(function (f) {\n        return f.hasError;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FormStateLazy.prototype, \"hasFormError\", {\n    /**\n     * Does form level validation have an error\n     */\n    get: function () {\n      return !!this._error;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Call it when you are `reinit`ing child fields\n   */\n\n  FormStateLazy.prototype.clearFormError = function () {\n    this._error = '';\n  };\n\n  Object.defineProperty(FormStateLazy.prototype, \"fieldError\", {\n    /**\n     * Error from some sub field if any\n     */\n    get: function () {\n      var subItemWithError = this.getFields().find(function (f) {\n        return !!f.hasError;\n      });\n      return subItemWithError ? subItemWithError.error : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FormStateLazy.prototype, \"formError\", {\n    /**\n     * Error from form if any\n     */\n    get: function () {\n      return this._error;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FormStateLazy.prototype, \"error\", {\n    /**\n     * The first error from any sub (if any) or form error\n     */\n    get: function () {\n      return this.fieldError || this.formError;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FormStateLazy.prototype, \"showFormError\", {\n    /**\n     * You should only show the form error if there are no field errors\n     */\n    get: function () {\n      return !this.hasFieldError && this.hasFormError;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"$\", null);\n\n  __decorate([mobx_1.observable], FormStateLazy.prototype, \"validating\", void 0);\n\n  __decorate([mobx_1.action], FormStateLazy.prototype, \"validators\", void 0);\n\n  __decorate([mobx_1.action], FormStateLazy.prototype, \"validate\", null);\n\n  __decorate([mobx_1.action], FormStateLazy.prototype, \"enableAutoValidation\", void 0);\n\n  __decorate([mobx_1.action], FormStateLazy.prototype, \"disableAutoValidation\", void 0);\n\n  __decorate([mobx_1.observable], FormStateLazy.prototype, \"_error\", void 0);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"hasError\", null);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"hasFieldError\", null);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"hasFormError\", null);\n\n  __decorate([mobx_1.action], FormStateLazy.prototype, \"clearFormError\", null);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"fieldError\", null);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"formError\", null);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"error\", null);\n\n  __decorate([mobx_1.computed], FormStateLazy.prototype, \"showFormError\", null);\n\n  return FormStateLazy;\n}();\n\nexports.FormStateLazy = FormStateLazy;","map":{"version":3,"sources":["/home/chef/Desktop/signer/node_modules/formstate/lib/core/formStateLazy.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","exports","mobx_1","require","types_1","FormStateLazy","getFields","_this","validating","_validators","validators","_i","enableAutoValidation","forEach","x","disableAutoValidation","_error","prototype","get","enumerable","configurable","validate","values","fieldsResult","error","res","_a","all","map","runInAction","some","hasError","applyValidators","$","hasFieldError","hasFormError","clearFormError","subItemWithError","find","fieldError","formError","computed","observable","action"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar types_1 = require(\"./types\");\n/**\n * Makes it easier to work with dynamically maintained array\n */\nvar FormStateLazy = /** @class */ (function () {\n    function FormStateLazy(\n    /** It is a function as fields can change over time */\n    getFields) {\n        var _this = this;\n        this.getFields = getFields;\n        this.validating = false;\n        this._validators = [];\n        this.validators = function () {\n            var validators = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                validators[_i] = arguments[_i];\n            }\n            _this._validators = validators;\n            return _this;\n        };\n        this.enableAutoValidation = function () {\n            _this.getFields().forEach(function (x) { return x.enableAutoValidation(); });\n        };\n        this.disableAutoValidation = function () {\n            _this.getFields().forEach(function (x) { return x.disableAutoValidation(); });\n        };\n        this._error = '';\n    }\n    Object.defineProperty(FormStateLazy.prototype, \"$\", {\n        get: function () {\n            return this.getFields();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FormStateLazy.prototype.validate = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var values, fieldsResult, done, error, res;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.validating = true;\n                        values = this.getFields();\n                        return [4 /*yield*/, Promise.all(values.map(function (value) { return value.validate(); }))];\n                    case 1:\n                        fieldsResult = _a.sent();\n                        done = mobx_1.runInAction(function () {\n                            if (fieldsResult.some(function (f) { return f.hasError; })) {\n                                _this.validating = false;\n                                return true;\n                            }\n                            return false;\n                        });\n                        if (done)\n                            return [2 /*return*/, { hasError: true }];\n                        return [4 /*yield*/, types_1.applyValidators(this.$, this._validators || [])];\n                    case 2:\n                        error = _a.sent();\n                        res = mobx_1.runInAction(function () {\n                            if (error != _this._error) {\n                                _this._error = error;\n                            }\n                            _this.validating = false;\n                            var hasError = !!error;\n                            if (hasError) {\n                                return { hasError: true };\n                            }\n                            return { hasError: false, value: _this.$ };\n                        });\n                        return [2 /*return*/, res];\n                }\n            });\n        });\n    };\n    Object.defineProperty(FormStateLazy.prototype, \"hasError\", {\n        /**\n         * Does any field or form have an error\n         */\n        get: function () {\n            return this.hasFieldError || this.hasFormError;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FormStateLazy.prototype, \"hasFieldError\", {\n        /**\n         * Does any field have an error\n         */\n        get: function () {\n            return this.getFields().some(function (f) { return f.hasError; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FormStateLazy.prototype, \"hasFormError\", {\n        /**\n         * Does form level validation have an error\n         */\n        get: function () {\n            return !!this._error;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Call it when you are `reinit`ing child fields\n     */\n    FormStateLazy.prototype.clearFormError = function () {\n        this._error = '';\n    };\n    Object.defineProperty(FormStateLazy.prototype, \"fieldError\", {\n        /**\n         * Error from some sub field if any\n         */\n        get: function () {\n            var subItemWithError = this.getFields().find(function (f) { return !!f.hasError; });\n            return subItemWithError ? subItemWithError.error : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FormStateLazy.prototype, \"formError\", {\n        /**\n         * Error from form if any\n         */\n        get: function () {\n            return this._error;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FormStateLazy.prototype, \"error\", {\n        /**\n         * The first error from any sub (if any) or form error\n         */\n        get: function () {\n            return this.fieldError || this.formError;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FormStateLazy.prototype, \"showFormError\", {\n        /**\n         * You should only show the form error if there are no field errors\n         */\n        get: function () {\n            return !this.hasFieldError && this.hasFormError;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"$\", null);\n    __decorate([\n        mobx_1.observable\n    ], FormStateLazy.prototype, \"validating\", void 0);\n    __decorate([\n        mobx_1.action\n    ], FormStateLazy.prototype, \"validators\", void 0);\n    __decorate([\n        mobx_1.action\n    ], FormStateLazy.prototype, \"validate\", null);\n    __decorate([\n        mobx_1.action\n    ], FormStateLazy.prototype, \"enableAutoValidation\", void 0);\n    __decorate([\n        mobx_1.action\n    ], FormStateLazy.prototype, \"disableAutoValidation\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], FormStateLazy.prototype, \"_error\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"hasError\", null);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"hasFieldError\", null);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"hasFormError\", null);\n    __decorate([\n        mobx_1.action\n    ], FormStateLazy.prototype, \"clearFormError\", null);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"fieldError\", null);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"formError\", null);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"error\", null);\n    __decorate([\n        mobx_1.computed\n    ], FormStateLazy.prototype, \"showFormError\", null);\n    return FormStateLazy;\n}());\nexports.FormStateLazy = FormStateLazy;\n"]},"metadata":{},"sourceType":"script"}