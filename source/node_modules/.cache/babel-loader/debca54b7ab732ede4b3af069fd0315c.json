{"ast":null,"code":"import _slicedToArray from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/chef/Desktop/signer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _class;import{observer}from'mobx-react';import React from'react';import{Redirect,withRouter}from'react-router';import{parseRow}from'../container/SigningContainer';import Pages from'./Pages';import{browser}from'webextension-polyfill-ts';import{Box,Button,Collapse,IconButton,Grid,Table,TableBody,TableCell,TableContainer,TableRow,Typography}from'@material-ui/core';import KeyboardArrowDownIcon from'@material-ui/icons/KeyboardArrowDown';import KeyboardArrowUpIcon from'@material-ui/icons/KeyboardArrowUp';import{BlankTooltipContent,TooltippedTableRow}from'./Tooltipped';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignDeployPage=observer(_class=/*#__PURE__*/function(_React$Component){_inherits(SignDeployPage,_React$Component);var _super=_createSuper(SignDeployPage);function SignDeployPage(props){var _this;_classCallCheck(this,SignDeployPage);_this=_super.call(this,props);_this.state={genericRows:[],deploySpecificRows:[],deployToSign:_this.props.signingContainer.deployToSign,argsExpanded:false};return _this;}_createClass(SignDeployPage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var w;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return browser.windows.getCurrent();case 2:w=_context.sent;if(w.type==='popup'){window.addEventListener('beforeunload',function(e){var _this2$state$deployTo;_this2.props.signingContainer.cancel((_this2$state$deployTo=_this2.state.deployToSign)===null||_this2$state$deployTo===void 0?void 0:_this2$state$deployTo.id);});}if(this.state.deployToSign){this.generateDeployInfo(this.state.deployToSign);}case 5:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"generateDeployInfo\",value:function(){var _generateDeployInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(deployToSign){var deployData,orderedGenericData,baseRows,_i,_Object$entries,_Object$entries$_i,key,value,row,argRows,_i2,_Object$entries2,_Object$entries2$_i,_key,_value,_row;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.props.signingContainer.parseDeployData(deployToSign.id);case 2:deployData=_context2.sent;// Filters out non-generic and irrelevant data points, also re-orders.\norderedGenericData={'Signing Key':deployData.signingKey,Account:deployData.account,'Deploy Hash':deployData.deployHash,Timestamp:deployData.timestamp,'Chain Name':deployData.chainName,Payment:deployData.payment,'Deploy Type':deployData.deployType};baseRows=[];for(_i=0,_Object$entries=Object.entries(orderedGenericData);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];row=parseRow({key:key,value:value,tooltipContent:BlankTooltipContent});baseRows.push(row);}argRows=[];for(_i2=0,_Object$entries2=Object.entries(deployData.deployArgs);_i2<_Object$entries2.length;_i2++){_Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),_key=_Object$entries2$_i[0],_value=_Object$entries2$_i[1];_row=parseRow({key:_key,value:_value,tooltipContent:BlankTooltipContent});argRows.push(_row);}this.setState({genericRows:baseRows,deploySpecificRows:argRows,argsExpanded:argRows.length<4});case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function generateDeployInfo(_x){return _generateDeployInfo.apply(this,arguments);}return generateDeployInfo;}()},{key:\"render\",value:function render(){var _this3=this;if(this.state.deployToSign&&this.props.accountManager.isUnLocked){var _this$props$signingCo;var deployId=(_this$props$signingCo=this.props.signingContainer.deployToSign)===null||_this$props$signingCo===void 0?void 0:_this$props$signingCo.id;return/*#__PURE__*/_jsxs(\"div\",{style:{flexGrow:1,marginTop:'-30px',width:'100vw'},children:[/*#__PURE__*/_jsx(Typography,{align:'center',variant:'h6',children:\"Signature Request\"}),/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsx(Table,{style:{width:'90%'},children:/*#__PURE__*/_jsxs(TableBody,{children:[this.state.genericRows.map(function(row){return/*#__PURE__*/_jsx(TooltippedTableRow,{data:row});}),this.state.genericRows.some(function(row){return row.key==='Deploy Type'&&row.value==='Transfer';})?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",style:{fontWeight:'bold'},colSpan:2,align:\"center\",children:\"Transfer Data\"})}),/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{style:{paddingBottom:0,paddingTop:0},colSpan:2,children:/*#__PURE__*/_jsx(Table,{size:\"small\",children:/*#__PURE__*/_jsx(TableBody,{children:this.state.deploySpecificRows.map(function(row){return/*#__PURE__*/_jsx(TooltippedTableRow,{data:row});})})})})})]}):/*#__PURE__*/ /**\n                   *  Deploy specific arguments\n                   */_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",style:{fontWeight:'bold'},children:\"Contract Arguments\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:function onClick(){return _this3.setState({argsExpanded:!_this3.state.argsExpanded});},children:this.state.argsExpanded?/*#__PURE__*/_jsx(KeyboardArrowUpIcon,{}):/*#__PURE__*/_jsx(KeyboardArrowDownIcon,{})})})]}),/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{style:{paddingBottom:0,paddingTop:0},colSpan:2,children:/*#__PURE__*/_jsx(Collapse,{in:this.state.argsExpanded,timeout:\"auto\",unmountOnExit:true,children:/*#__PURE__*/_jsx(Table,{size:\"small\",children:/*#__PURE__*/_jsx(TableBody,{children:this.state.deploySpecificRows.map(function(row){return/*#__PURE__*/_jsx(TooltippedTableRow,{data:row});})})})})})})]})]})})}),/*#__PURE__*/_jsx(Box,{mt:8,children:/*#__PURE__*/_jsxs(Grid,{container:true,style:{marginTop:'-50px'},spacing:4,justify:'center',alignItems:'center',children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this3.props.signingContainer.cancel(deployId);case 2:_context3.next=4;return _this3.props.popupContainer.callClosePopup();case 4:// This is required in the case that the user avoids the popup and instead\n// interacts with the default extension window.\nwindow.close();case 5:case\"end\":return _context3.stop();}}},_callee3);})),children:\"Cancel\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this3.props.signingContainer.signDeploy(deployId);case 2:_context4.next=4;return _this3.props.popupContainer.callClosePopup();case 4:// This is required in the case that the user avoids the popup and instead\n// interacts with the default extension window.\nwindow.close();case 5:case\"end\":return _context4.stop();}}},_callee4);})),variant:\"contained\",color:\"primary\",style:{backgroundColor:'var(--cspr-dark-blue)'},children:\"Sign\"})})]})})]});}else{return/*#__PURE__*/_jsx(Redirect,{to:Pages.Home});}}}]);return SignDeployPage;}(React.Component))||_class;export default withRouter(SignDeployPage);","map":{"version":3,"sources":["/home/chef/Desktop/signer/src/popup/components/SignDeployPage.tsx"],"names":["observer","React","Redirect","withRouter","parseRow","Pages","browser","Box","Button","Collapse","IconButton","Grid","Table","TableBody","TableCell","TableContainer","TableRow","Typography","KeyboardArrowDownIcon","KeyboardArrowUpIcon","BlankTooltipContent","TooltippedTableRow","SignDeployPage","props","state","genericRows","deploySpecificRows","deployToSign","signingContainer","argsExpanded","windows","getCurrent","w","type","window","addEventListener","e","cancel","id","generateDeployInfo","parseDeployData","deployData","orderedGenericData","signingKey","Account","account","deployHash","Timestamp","timestamp","chainName","Payment","payment","deployType","baseRows","Object","entries","key","value","row","tooltipContent","push","argRows","deployArgs","setState","length","accountManager","isUnLocked","deployId","flexGrow","marginTop","width","map","some","fontWeight","paddingBottom","paddingTop","popupContainer","callClosePopup","close","signDeploy","backgroundColor","Home","Component"],"mappings":"w+BAAA,OAASA,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAwCC,UAAxC,KAA0D,cAA1D,CACA,OAA2BC,QAA3B,KAA2C,+BAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,OAASC,OAAT,KAAwB,0BAAxB,CAEA,OACEC,GADF,CAEEC,MAFF,CAGEC,QAHF,CAIEC,UAJF,CAKEC,IALF,CAMEC,KANF,CAOEC,SAPF,CAQEC,SARF,CASEC,cATF,CAUEC,QAVF,CAWEC,UAXF,KAYO,mBAZP,CAaA,MAAOC,CAAAA,qBAAP,KAAkC,sCAAlC,CACA,MAAOC,CAAAA,mBAAP,KAAgC,oCAAhC,CAIA,OAASC,mBAAT,CAA8BC,kBAA9B,KAAwD,cAAxD,C,gJASMC,CAAAA,c,CADLtB,Q,mIAUC,wBAAYuB,KAAZ,CAA0B,gDACxB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,WAAW,CAAE,EADF,CAEXC,kBAAkB,CAAE,EAFT,CAGXC,YAAY,CAAE,MAAKJ,KAAL,CAAWK,gBAAX,CAA4BD,YAH/B,CAIXE,YAAY,CAAE,KAJH,CAAb,CAFwB,aAQzB,C,sJAED,+KACgBvB,CAAAA,OAAO,CAACwB,OAAR,CAAgBC,UAAhB,EADhB,QACMC,CADN,eAEE,GAAIA,CAAC,CAACC,IAAF,GAAW,OAAf,CAAwB,CACtBC,MAAM,CAACC,gBAAP,CAAwB,cAAxB,CAAwC,SAAAC,CAAC,CAAI,2BAC3C,MAAI,CAACb,KAAL,CAAWK,gBAAX,CAA4BS,MAA5B,wBAAmC,MAAI,CAACb,KAAL,CAAWG,YAA9C,gDAAmC,sBAAyBW,EAA5D,EACD,CAFD,EAGD,CACD,GAAI,KAAKd,KAAL,CAAWG,YAAf,CAA6B,CAC3B,KAAKY,kBAAL,CAAwB,KAAKf,KAAL,CAAWG,YAAnC,EACD,CATH,2D,0OAYA,kBAAyBA,YAAzB,8SAC2B,MAAKJ,KAAL,CAAWK,gBAAX,CAA4BY,eAA5B,CACvBb,YAAY,CAACW,EADU,CAD3B,QACQG,UADR,gBAIE;AACMC,kBALR,CAK6B,CACzB,cAAeD,UAAU,CAACE,UADD,CAEzBC,OAAO,CAAEH,UAAU,CAACI,OAFK,CAGzB,cAAeJ,UAAU,CAACK,UAHD,CAIzBC,SAAS,CAAEN,UAAU,CAACO,SAJG,CAKzB,aAAcP,UAAU,CAACQ,SALA,CAMzBC,OAAO,CAAET,UAAU,CAACU,OANK,CAOzB,cAAeV,UAAU,CAACW,UAPD,CAL7B,CAcMC,QAdN,CAcmC,EAdnC,CAeE,yBAAyBC,MAAM,CAACC,OAAP,CAAeb,kBAAf,CAAzB,gCAA6D,0DAAnDc,GAAmD,uBAA9CC,KAA8C,uBACrDC,GADqD,CAC/CtD,QAAQ,CAAC,CAAEoD,GAAG,CAAHA,GAAF,CAAOC,KAAK,CAALA,KAAP,CAAcE,cAAc,CAAEvC,mBAA9B,CAAD,CADuC,CAE3DiC,QAAQ,CAACO,IAAT,CAAcF,GAAd,EACD,CACGG,OAnBN,CAmBkC,EAnBlC,CAoBE,2BAAyBP,MAAM,CAACC,OAAP,CAAed,UAAU,CAACqB,UAA1B,CAAzB,mCAAgE,6DAAtDN,IAAsD,wBAAjDC,MAAiD,wBACxDC,IADwD,CAClDtD,QAAQ,CAAC,CAAEoD,GAAG,CAAHA,IAAF,CAAOC,KAAK,CAALA,MAAP,CAAcE,cAAc,CAAEvC,mBAA9B,CAAD,CAD0C,CAE9DyC,OAAO,CAACD,IAAR,CAAaF,IAAb,EACD,CACD,KAAKK,QAAL,CAAc,CACZtC,WAAW,CAAE4B,QADD,CAEZ3B,kBAAkB,CAAEmC,OAFR,CAGZhC,YAAY,CAAEgC,OAAO,CAACG,MAAR,CAAiB,CAHnB,CAAd,EAxBF,6D,wIA+BA,iBAAS,iBACP,GAAI,KAAKxC,KAAL,CAAWG,YAAX,EAA2B,KAAKJ,KAAL,CAAW0C,cAAX,CAA0BC,UAAzD,CAAqE,2BACnE,GAAMC,CAAAA,QAAQ,wBAAG,KAAK5C,KAAL,CAAWK,gBAAX,CAA4BD,YAA/B,gDAAG,sBAA0CW,EAA3D,CACA,mBACE,aACE,KAAK,CAAE,CACL8B,QAAQ,CAAE,CADL,CAELC,SAAS,CAAE,OAFN,CAGLC,KAAK,CAAE,OAHF,CADT,wBAOE,KAAC,UAAD,EAAY,KAAK,CAAE,QAAnB,CAA6B,OAAO,CAAE,IAAtC,+BAPF,cAUE,KAAC,cAAD,wBACE,KAAC,KAAD,EAAO,KAAK,CAAE,CAAEA,KAAK,CAAE,KAAT,CAAd,uBACE,MAAC,SAAD,YAIG,KAAK9C,KAAL,CAAWC,WAAX,CAAuB8C,GAAvB,CAA2B,SAAAb,GAAG,qBAC7B,KAAC,kBAAD,EAAoB,IAAI,CAAEA,GAA1B,EAD6B,EAA9B,CAJH,CAWG,KAAKlC,KAAL,CAAWC,WAAX,CAAuB+C,IAAvB,CACC,SAAAd,GAAG,QAAIA,CAAAA,GAAG,CAACF,GAAJ,GAAY,aAAZ,EAA6BE,GAAG,CAACD,KAAJ,GAAc,UAA/C,EADJ,eAGC,wCACE,KAAC,QAAD,wBACE,KAAC,SAAD,EACE,SAAS,CAAC,IADZ,CAEE,KAAK,CAAC,KAFR,CAGE,KAAK,CAAE,CAAEgB,UAAU,CAAE,MAAd,CAHT,CAIE,OAAO,CAAE,CAJX,CAKE,KAAK,CAAC,QALR,2BADF,EADF,cAYE,KAAC,QAAD,wBACE,KAAC,SAAD,EACE,KAAK,CAAE,CAAEC,aAAa,CAAE,CAAjB,CAAoBC,UAAU,CAAE,CAAhC,CADT,CAEE,OAAO,CAAE,CAFX,uBAIE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,uBACE,KAAC,SAAD,WACG,KAAKnD,KAAL,CAAWE,kBAAX,CAA8B6C,GAA9B,CAAkC,SAAAb,GAAG,qBACpC,KAAC,kBAAD,EAAoB,IAAI,CAAEA,GAA1B,EADoC,EAArC,CADH,EADF,EAJF,EADF,EAZF,GAHD,eA+BC;AAClB;AACA,qBACkB,wCACE,MAAC,QAAD,yBACE,KAAC,SAAD,EACE,SAAS,CAAC,IADZ,CAEE,KAAK,CAAC,KAFR,CAGE,KAAK,CAAE,CAAEe,UAAU,CAAE,MAAd,CAHT,gCADF,cAQE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBACE,KAAC,UAAD,EACE,IAAI,CAAC,OADP,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACV,QAAL,CAAc,CACZlC,YAAY,CAAE,CAAC,MAAI,CAACL,KAAL,CAAWK,YADd,CAAd,CADO,EAFX,UAQG,KAAKL,KAAL,CAAWK,YAAX,cACC,KAAC,mBAAD,IADD,cAGC,KAAC,qBAAD,IAXJ,EADF,EARF,GADF,cA0BE,KAAC,QAAD,wBACE,KAAC,SAAD,EACE,KAAK,CAAE,CAAE6C,aAAa,CAAE,CAAjB,CAAoBC,UAAU,CAAE,CAAhC,CADT,CAEE,OAAO,CAAE,CAFX,uBAIE,KAAC,QAAD,EACE,EAAE,CAAE,KAAKnD,KAAL,CAAWK,YADjB,CAEE,OAAO,CAAC,MAFV,CAGE,aAAa,KAHf,uBAKE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,uBACE,KAAC,SAAD,WACG,KAAKL,KAAL,CAAWE,kBAAX,CAA8B6C,GAA9B,CAAkC,SAAAb,GAAG,qBACpC,KAAC,kBAAD,EAAoB,IAAI,CAAEA,GAA1B,EADoC,EAArC,CADH,EADF,EALF,EAJF,EADF,EA1BF,GA7CJ,GADF,EADF,EAVF,cA4GE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACE,MAAC,IAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAE,CAAEW,SAAS,CAAE,OAAb,CAFT,CAGE,OAAO,CAAE,CAHX,CAIE,OAAO,CAAE,QAJX,CAKE,UAAU,CAAE,QALd,wBAOE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAC,WAFR,CAGE,OAAO,sEAAE,+JACD,CAAA,MAAI,CAAC9C,KAAL,CAAWK,gBAAX,CAA4BS,MAA5B,CAAmC8B,QAAnC,CADC,+BAED,CAAA,MAAI,CAAC5C,KAAL,CAAWqD,cAAX,CAA0BC,cAA1B,EAFC,QAGP;AACA;AACA3C,MAAM,CAAC4C,KAAP,GALO,wDAAF,EAHT,oBADF,EAPF,cAsBE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,sEAAE,+JACD,CAAA,MAAI,CAACvD,KAAL,CAAWK,gBAAX,CAA4BmD,UAA5B,CAAuCZ,QAAvC,CADC,+BAED,CAAA,MAAI,CAAC5C,KAAL,CAAWqD,cAAX,CAA0BC,cAA1B,EAFC,QAGP;AACA;AACA3C,MAAM,CAAC4C,KAAP,GALO,wDAAF,EADT,CAQE,OAAO,CAAC,WARV,CASE,KAAK,CAAC,SATR,CAUE,KAAK,CAAE,CACLE,eAAe,CAAE,uBADZ,CAVT,kBADF,EAtBF,GADF,EA5GF,GADF,CA0JD,CA5JD,IA4JO,CACL,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE3E,KAAK,CAAC4E,IAApB,EAAP,CACD,CACF,C,4BA9N0BhF,KAAK,CAACiF,S,WAiOnC,cAAe/E,CAAAA,UAAU,CAACmB,cAAD,CAAzB","sourcesContent":["import { observer } from 'mobx-react';\nimport React from 'react';\nimport { Redirect, RouteComponentProps, withRouter } from 'react-router';\nimport SigningContainer, { parseRow } from '../container/SigningContainer';\nimport Pages from './Pages';\nimport { browser } from 'webextension-polyfill-ts';\nimport AccountManager from '../container/AccountManager';\nimport {\n  Box,\n  Button,\n  Collapse,\n  IconButton,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Typography\n} from '@material-ui/core';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport { deployWithID } from '../../background/SigningManager';\nimport PopupContainer from '../container/PopupContainer';\nimport { SigningDataRow } from '../../shared';\nimport { BlankTooltipContent, TooltippedTableRow } from './Tooltipped';\n\ninterface Props extends RouteComponentProps {\n  signingContainer: SigningContainer;\n  accountManager: AccountManager;\n  popupContainer: PopupContainer;\n}\n\n@observer\nclass SignDeployPage extends React.Component<\n  Props,\n  {\n    genericRows: SigningDataRow[];\n    deploySpecificRows: SigningDataRow[];\n    deployToSign: deployWithID | null;\n    argsExpanded: boolean;\n  }\n> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      genericRows: [],\n      deploySpecificRows: [],\n      deployToSign: this.props.signingContainer.deployToSign,\n      argsExpanded: false\n    };\n  }\n\n  async componentDidMount() {\n    let w = await browser.windows.getCurrent();\n    if (w.type === 'popup') {\n      window.addEventListener('beforeunload', e => {\n        this.props.signingContainer.cancel(this.state.deployToSign?.id!);\n      });\n    }\n    if (this.state.deployToSign) {\n      this.generateDeployInfo(this.state.deployToSign);\n    }\n  }\n\n  async generateDeployInfo(deployToSign: deployWithID) {\n    const deployData = await this.props.signingContainer.parseDeployData(\n      deployToSign.id\n    );\n    // Filters out non-generic and irrelevant data points, also re-orders.\n    const orderedGenericData = {\n      'Signing Key': deployData.signingKey,\n      Account: deployData.account,\n      'Deploy Hash': deployData.deployHash,\n      Timestamp: deployData.timestamp,\n      'Chain Name': deployData.chainName,\n      Payment: deployData.payment,\n      'Deploy Type': deployData.deployType\n    };\n    let baseRows: SigningDataRow[] = [];\n    for (let [key, value] of Object.entries(orderedGenericData)) {\n      const row = parseRow({ key, value, tooltipContent: BlankTooltipContent });\n      baseRows.push(row);\n    }\n    let argRows: SigningDataRow[] = [];\n    for (let [key, value] of Object.entries(deployData.deployArgs)) {\n      const row = parseRow({ key, value, tooltipContent: BlankTooltipContent });\n      argRows.push(row);\n    }\n    this.setState({\n      genericRows: baseRows,\n      deploySpecificRows: argRows,\n      argsExpanded: argRows.length < 4\n    });\n  }\n\n  render() {\n    if (this.state.deployToSign && this.props.accountManager.isUnLocked) {\n      const deployId = this.props.signingContainer.deployToSign?.id;\n      return (\n        <div\n          style={{\n            flexGrow: 1,\n            marginTop: '-30px',\n            width: '100vw'\n          }}\n        >\n          <Typography align={'center'} variant={'h6'}>\n            Signature Request\n          </Typography>\n          <TableContainer>\n            <Table style={{ width: '90%' }}>\n              <TableBody>\n                {/* \n                  Displays the data generic to all deploys\n                */}\n                {this.state.genericRows.map(row => (\n                  <TooltippedTableRow data={row} />\n                ))}\n                {/* \n                  Deploy Specific Arguments\n                  Special handling for native transfers\n                */}\n                {this.state.genericRows.some(\n                  row => row.key === 'Deploy Type' && row.value === 'Transfer'\n                ) ? (\n                  <>\n                    <TableRow>\n                      <TableCell\n                        component=\"th\"\n                        scope=\"row\"\n                        style={{ fontWeight: 'bold' }}\n                        colSpan={2}\n                        align=\"center\"\n                      >\n                        Transfer Data\n                      </TableCell>\n                    </TableRow>\n                    <TableRow>\n                      <TableCell\n                        style={{ paddingBottom: 0, paddingTop: 0 }}\n                        colSpan={2}\n                      >\n                        <Table size=\"small\">\n                          <TableBody>\n                            {this.state.deploySpecificRows.map(row => (\n                              <TooltippedTableRow data={row} />\n                            ))}\n                          </TableBody>\n                        </Table>\n                      </TableCell>\n                    </TableRow>\n                  </>\n                ) : (\n                  /**\n                   *  Deploy specific arguments\n                   */\n                  <>\n                    <TableRow>\n                      <TableCell\n                        component=\"th\"\n                        scope=\"row\"\n                        style={{ fontWeight: 'bold' }}\n                      >\n                        Contract Arguments\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() =>\n                            this.setState({\n                              argsExpanded: !this.state.argsExpanded\n                            })\n                          }\n                        >\n                          {this.state.argsExpanded ? (\n                            <KeyboardArrowUpIcon />\n                          ) : (\n                            <KeyboardArrowDownIcon />\n                          )}\n                        </IconButton>\n                      </TableCell>\n                    </TableRow>\n                    <TableRow>\n                      <TableCell\n                        style={{ paddingBottom: 0, paddingTop: 0 }}\n                        colSpan={2}\n                      >\n                        <Collapse\n                          in={this.state.argsExpanded}\n                          timeout=\"auto\"\n                          unmountOnExit\n                        >\n                          <Table size=\"small\">\n                            <TableBody>\n                              {this.state.deploySpecificRows.map(row => (\n                                <TooltippedTableRow data={row} />\n                              ))}\n                            </TableBody>\n                          </Table>\n                        </Collapse>\n                      </TableCell>\n                    </TableRow>\n                  </>\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          <Box mt={8}>\n            <Grid\n              container\n              style={{ marginTop: '-50px' }}\n              spacing={4}\n              justify={'center'}\n              alignItems={'center'}\n            >\n              <Grid item>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={async () => {\n                    await this.props.signingContainer.cancel(deployId!);\n                    await this.props.popupContainer.callClosePopup();\n                    // This is required in the case that the user avoids the popup and instead\n                    // interacts with the default extension window.\n                    window.close();\n                  }}\n                >\n                  Cancel\n                </Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  onClick={async () => {\n                    await this.props.signingContainer.signDeploy(deployId!);\n                    await this.props.popupContainer.callClosePopup();\n                    // This is required in the case that the user avoids the popup and instead\n                    // interacts with the default extension window.\n                    window.close();\n                  }}\n                  variant=\"contained\"\n                  color=\"primary\"\n                  style={{\n                    backgroundColor: 'var(--cspr-dark-blue)'\n                  }}\n                >\n                  Sign\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        </div>\n      );\n    } else {\n      return <Redirect to={Pages.Home} />;\n    }\n  }\n}\n\nexport default withRouter(SignDeployPage);\n"]},"metadata":{},"sourceType":"module"}